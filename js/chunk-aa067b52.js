(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa067b52"],{"6d14":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("master-view",{attrs:{header:{heading:"Channels",subheading:"Plug-In Social Connectors",icon:"icon-gradient bg-happy-itmeo fa fa-plug"},table:e.table,actions:[{name:"add_channel",label:"Add Channel"}]},on:{action:e.onAction},scopedSlots:e._u([{key:"action(add_channel)",fn:function(t){var a=t.action;return[n("base-dropdown",{staticClass:"nav-item",attrs:{"menu-on-right":"","title-tag":"a"}},[n("a",{staticClass:"btn btn-primary",attrs:{slot:"title-container",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},slot:"title-container"},[e._v("\n                    "+e._s(a.label)+"\n                ")]),n("a",{staticClass:"dropdown-item",on:{click:function(t){return e.addItem("wa360")}}},[e._v("WhatsApp")]),n("a",{staticClass:"dropdown-item",on:{click:function(t){return e.addItem("tg")}}},[e._v("Telegram")]),n("a",{staticClass:"dropdown-item",on:{click:function(t){return e.addItem("fb")}}},[e._v("Facebook")]),n("a",{staticClass:"dropdown-item",on:{click:function(t){return e.addItem("tw")}}},[e._v("Twitter")]),n("a",{staticClass:"dropdown-item",on:{click:function(t){return e.addItem("ig")}}},[e._v("Instagram")]),n("a",{staticClass:"dropdown-item",on:{click:function(t){return e.addItem("web")}}},[e._v("WebChat")])])]}},{key:"cell(details)",fn:function(t){return[n("i",{class:[e.$global.MyDict.socialPrefix(t.item.contactType,"fa")]}),e._v("\n         "+e._s(t.item.lane)+"\n      ")]}},{key:"cell(status)",fn:function(t){return[n("my-status",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Connected",expression:"'Connected'"}],attrs:{value:!t.item.disabled,icon:"fa fa-wave-square"}}),t.item.sandbox?n("my-status",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Sandbox",expression:"'Sandbox'"}],staticClass:"ml-1",attrs:{value:t.item.sandbox,icon:"fa fa-box-open"}}):e._e()]}},{key:"cell(actions)",fn:function(t){return[n("b-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.item.message,expression:"row.item.message"}],attrs:{size:"sm",variant:"outline-primary"},on:{click:function(n){return e.editItem(t.item,t.index,n.target)}}},[n("i",{staticClass:"fas fa-edit"})]),e._v(" \n        "),n("b-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.item.message,expression:"row.item.message"}],attrs:{size:"sm",variant:"outline-primary"},on:{click:function(n){return e.viewItem(t.item,t.index,n.target)}}},[n("i",{staticClass:"fas fa-eye"})]),e._v(" \n        "),n("b-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.item.disabled?"Connect":"Disconnect",expression:"row.item.disabled ? 'Connect' : 'Disconnect'"}],attrs:{size:"sm",variant:"outline-primary"},on:{click:function(n){return e.disableItem(t.item,t.index,n.target)}}},[n("i",{staticClass:"fas fa-plug",class:{"fa-x":t.item.disabled}})]),e._v(" \n        "),n("b-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],attrs:{size:"sm",variant:"outline-primary"},on:{click:function(n){return e.deleteItem(t.item,t.index,n.target)}}},[n("i",{staticClass:"fas fa-trash"})])]}}])}),e.oneItem?n("b-modal",{attrs:{id:e.modelName+"_VIEW",title:"View Details ",size:"md"},on:{hidden:e.cancelItem},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var a=t.ok;return[n("div",{staticClass:"position-relative form-group"},[n("button",{staticClass:"form-control btn btn-primary",on:{click:function(e){return a()}}},[e._v("OK")])])]}}],null,!1,2708243911)},[n("b-input-group",{staticClass:"mt-3"},[n("b-input-group-prepend",[n("b-button",{staticClass:"text-sm w-120px",attrs:{variant:"outline-dark"}},[e._v("\n                    Channel Id")])],1),n("b-form-input",{attrs:{readonly:"",value:e.oneItemView.channelId}}),n("b-input-group-append",[n("b-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.oneItemView.channelId,expression:"oneItemView.channelId",arg:"copy"}],attrs:{variant:"outline-success"}},[e._v("Copy")])],1)],1),n("b-input-group",{staticClass:"mt-3"},[n("b-input-group-prepend",[n("b-button",{staticClass:"text-sm w-120px",attrs:{variant:"outline-dark"}},[e._v("\n                     Webhook URL")])],1),n("b-form-input",{attrs:{readonly:"",value:e.oneItemView.webhookUrl+"/"+e.oneItemView.callbackPath}}),n("b-input-group-append",[n("b-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.oneItemView.webhookUrl+"/"+e.oneItemView.callbackPath,expression:"oneItemView.webhookUrl + '/' + oneItemView.callbackPath",arg:"copy"}],staticClass:"w-20",attrs:{variant:"outline-success"}},[e._v("Copy")])],1)],1)],1):e._e(),n("ValidationObserver",{ref:"form",staticClass:"modal-form",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.invalid;return[e.oneItem?n("b-modal",{attrs:{id:e.modelName,title:"Add/Edit Details ",size:"md","header-class":"py-2"},on:{hidden:e.cancelItem},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[n("button",{staticClass:"btn btn-primary btn-sm",attrs:{name:"password",id:"examplePassword",disabled:!e.isChanged||a},on:{click:e.saveItem}},[e._v("Save")])]},proxy:!0}],null,!0)},[n("x-simple-form",{attrs:{size:"sm",inputs:e.modalInputs,isnew:!e.oneItem.id},on:{change:e.onConfigChange}})],1):e._e()]}}])})],1)},i=[],r=(n("7f7f"),n("96cf"),n("3b8d")),o=n("2f9b"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"x-form"},e._l(e.inputs,(function(t){return n("span",{key:t.key},[t.meta.hidden?e._e():n("span",["OPTIONS"==t.meta.inputType&&(t.meta.optionsSource||t.meta.options.length>5)?n("BaseVSelect",{attrs:{size:e.size,clearable:!1,name:t.meta.title||t.meta.key,optionKey:t.meta.optionsKey,options:t.meta.optionsSource||t.meta.options,readonly:t.meta.readonly||t.meta.createonly&&!e.isnew,placeholder:"Select"},model:{value:t.config.value,callback:function(n){e.$set(t.config,"value",n)},expression:"input.config.value"}}):"OPTIONS"==t.meta.inputType?n("ButtonRadioGroup",{attrs:{name:t.meta.title||t.meta.key,size:"sm",options:t.meta.options,readonly:t.meta.readonly||t.meta.createonly&&!e.isnew},model:{value:t.config.value,callback:function(n){e.$set(t.config,"value",n)},expression:"input.config.value"}}):n("base-input",{staticClass:"mb-0",attrs:{size:e.size,label:t.meta.title||t.meta.key,readonly:t.meta.readonly||t.meta.createonly&&!e.isnew,value:t.meta.defaultValue,required:!t.meta.optional},on:{change:function(n){return e.onChange(t.meta,t.config)}},model:{value:t.config.value,callback:function(n){e.$set(t.config,"value",n)},expression:"input.config.value"}})],1)])})),0)},c=[],l={name:"x-simple-form",components:{},props:{inputs:{type:Array,description:"pass list of input configs",default:function(){return[{}]}},isnew:{type:Boolean,default:!1},size:{}},data:function(){return{empty:function(e){return void 0==e||null===e||""===e}}},mounted:function(e){},methods:{onChange:function(e,t){this.$emit("change",{meta:e,config:t})},getOutput:function(){return inputs}}},u=l,m=n("2877"),p=Object(m["a"])(u,s,c,!1,null,null,null),d=p.exports,f=n("d166"),h=n("b351"),v=(n("b3a4"),n("96bd"));function b(e){return{channelType:e,config:{},meta:{}}}var g={components:{MasterView:o["default"],XSimpleForm:d,MyStatus:v["a"]},data:function(){return{MyFlags:f["c"],MyDict:f["b"],MyConst:f["a"],actions:[],table:{fields:[{key:"details",label:"Channel"},{key:"name",label:"Desc"},{key:"status",label:"Status"},{key:"actions",label:"Action"}],items:[],perPage:25,currentPage:1,rows:0,api:"api/options/channels"},oneItem:b(),oneItemView:b(),modelName:"MODAL_CHANNELS",modalInputs:[],oldHash:null}},computed:{isChanged:function(){return!0}},created:function(e){},methods:{loadItems:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.get("api/options/channels");case 2:t=e.sent,this.table.items=t.results;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveItem:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.post("api/config/channel/"+this.oneItem.channelType,this.oneItem);case 2:return t=e.sent,e.next=5,this.onAction({name:"CANCEL"});case 5:this.viewItem(t.results[0]),this.loadItems();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelItem:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.oneItem=b(),console.log("Cannnnnn"),this.onAction({name:"CANCEL"});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),editItem:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n in this.oneItem=b(),t)this.oneItem[n]=JSON.parse(JSON.stringify(t[n]));this.onAction({name:"EDIT_ITEM"});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),viewItem:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.get("api/config/channel/"+t.channelId);case 2:n=e.sent,this.oneItemView=n.results[0],this.$bvModal.show(this.modelName+"_VIEW");case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),disableItem:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.post("api/config/channel/"+t.channelType+"?disabled="+!t.disabled,t);case 2:this.loadItems();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),deleteItem:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.delete("api/config/channel/"+t.channelId+"?disabled="+!t.disabled,t);case 2:this.loadItems();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addItem:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.oneItem=b(t),this.onAction({name:"ADD_ITEM"});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onAction:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=t.name,e.next="ADD_ITEM"===e.t0?3:"EDIT_ITEM"===e.t0?6:"VIEW_ITEM"===e.t0?9:"CANCEL"===e.t0?11:13;break;case 3:return this.oldHash=JSON.stringify(this.oneItem),this.openForm(this.oneItem),e.abrupt("break",14);case 6:return this.oldHash=JSON.stringify(this.oneItem),this.openForm(this.oneItem),e.abrupt("break",14);case 9:return this.openForm(this.oneItem),e.abrupt("break",14);case 11:return this.$bvModal.hide(this.modelName),e.abrupt("break",14);case 13:console.log("NoMapping",t);case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),openForm:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.get("api/meta/channel_configs/"+t.channelType);case 2:n=e.sent,console.log("oldHash",this.oldHash),this.modalInputs=n.results.map((function(e){var n=e.path||e.key;return console.log("meta.key",n,Object(h["a"])({path:"$."+n,json:t})),{meta:e,config:{key:e.key,path:e.path,value:Object(h["a"])({path:"$."+n,json:t})[0]||e.defaultValue||""}}})),this.$bvModal.show(this.modelName);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onConfigChange:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.meta,a=t.config,i=n.path||n.key,Object(h["a"])({path:"$."+i,json:this.oneItem,resultType:"all",value:a.value}),this.oneItem.__ob__.dep.notify();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},w=g,y=Object(m["a"])(w,a,i,!1,null,null,null);t["default"]=y.exports},"96bd":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("i",{class:[e.icon,e.colorClass]}),e._t("default")],2)},i=[],r={approved:"s",rejected:"d",submitted:"w",true:"s",false:"d"},o={props:{value:{},icon:{default:"fa fa-circle"},noColor:{type:Boolean,default:!1}},computed:{colorClass:function(){if(this.noColor)return"";var e=r[this.value];return"s"==e?"text-success":"d"==e?"text-danger":"w"==e?"text-warning":void 0}}},s=o,c=n("2877"),l=Object(c["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},b3a4:function(e,t,n){}}]);