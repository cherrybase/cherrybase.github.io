(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d37d7e42"],{"02fc":function(t,e,n){"use strict";n("3170")},1027:function(t,e,n){},"1af6":function(t,e,n){var a=n("63b6");a(a.S,"Array",{isArray:n("9003")})},"20fd":function(t,e,n){"use strict";var a=n("d9f6"),s=n("aebd");t.exports=function(t,e,n){e in t?a.f(t,e,s(0,n)):t[e]=n}},3170:function(t,e,n){},"549b":function(t,e,n){"use strict";var a=n("d864"),s=n("63b6"),i=n("241e"),r=n("b0dc"),o=n("3702"),c=n("b447"),l=n("20fd"),u=n("7cd6");s(s.S+s.F*!n("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,s,d,p=i(t),f="function"==typeof this?this:Array,m=arguments.length,h=m>1?arguments[1]:void 0,v=void 0!==h,b=0,g=u(p);if(v&&(h=a(h,m>2?arguments[2]:void 0,2)),void 0==g||f==Array&&o(g))for(e=c(p.length),n=new f(e);e>b;b++)l(n,b,v?h(p[b],b):p[b]);else for(d=g.call(p),n=new f;!(s=d.next()).done;b++)l(n,b,v?r(d,h,[s.value,b],!0):s.value);return n.length=b,n}})},6704:function(t,e,n){"use strict";n("7907")},"75fc":function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var a=n("a745"),s=n.n(a);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function r(t){if(s()(t))return i(t)}var o=n("67bb"),c=n.n(o),l=n("5d58"),u=n.n(l),d=n("774e"),p=n.n(d);function f(t){if("undefined"!==typeof c.a&&null!=t[u.a]||null!=t["@@iterator"])return p()(t)}function m(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?p()(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(t){return r(t)||f(t)||m(t)||h()}},"774e":function(t,e,n){t.exports=n("d2d5")},7907:function(t,e,n){},a745:function(t,e,n){t.exports=n("f410")},b82a:function(t,e,n){"use strict";n("1027")},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from},da41:function(t,e,n){},e492:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-page-title"},[n("div",{staticClass:"page-title-wrapper"},[n("div",{staticClass:"page-title-heading"},[n("div",{staticClass:"page-title-icon"},[n("i",{class:t.icon})]),n("div",[t._v("\n                "+t._s(t.heading)+"\n                "),n("div",{staticClass:"page-title-subheading"},[t._t("subheading",(function(){return[t._v("\n                        "+t._s(t.subheading)+"\n                    ")]}))],2)])]),n("div",{staticClass:"page-title-actions"},[t._l(t.filters,(function(e,a){return n("span",{key:"filter-"+a,staticClass:"filter-wrapper"},[t._t("filter("+e.name+")",(function(){return[e.hidden?t._e():n("span")]}),null,{filter:e})],2)})),t._l(t.actions,(function(e,a){return n("span",{key:"action-"+a,staticClass:"action-wrapper"},[t._t("action("+e.name+")",(function(){return[e.hidden||!1===t.actionShow[e.name]?t._e():n("span",[e.link?n("router-link",{staticClass:"btn-shadow d-inline-flex align-items-center btn",class:{"btn-link":"link"==e.type,"btn-success":!e.type||"button"==e.type},attrs:{tag:"button",to:e.link,type:"button"}},[e.icon?n("i",{staticClass:"mr-2",class:e.icon}):t._e(),t._v("\n                        "+t._s(e.label)+" \n                    ")]):"lane"==e.type?n("div",{staticClass:"d-inline-flex align-items-center",staticStyle:{"min-width":"220px"}},[n("v-select",{staticClass:"w-100",attrs:{options:t.input.lane.options,searchable:!1,clearable:!1,placeholder:"Select Account"},on:{input:function(n){return t.clickAction(e)}},scopedSlots:t._u([{key:"selected-option",fn:function(e){return[n("div",{},[n("span",{staticClass:"contact_type contact_type-24 fab",class:t.MyDict.social[e.contactType]}),t._v("  "+t._s(e.lane))])]}},{key:"open-indicator",fn:function(e){var a=e.attributes;return[n("span",t._b({staticClass:"fa fa-caret-down"},"span",a,!1))]}},{key:"option",fn:function(e){var a=e.contactType,s=e.lane;return[n("span",{staticClass:"contact_type contact_type-24 fab",class:t.MyDict.social[a]}),t._v("  "+t._s(s)+"\n                            ")]}}],null,!0),model:{value:t.input.lane.value,callback:function(e){t.$set(t.input.lane,"value",e)},expression:"input.lane.value"}})],1):"search"==e.type?n("div",{staticClass:"d-inline-flex"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input.search.value,expression:"input.search.value"}],staticClass:"form-control",attrs:{type:"text",name:""},domProps:{value:t.input.search.value},on:{input:function(e){e.target.composing||t.$set(t.input.search,"value",e.target.value)}}})]):"apply"==e.type?n("div",{staticClass:"d-inline-flex"},[n("button",{staticClass:"btn-shadow  align-items-center btn btn-success",on:{click:function(n){return t.clickAction(e)}}},[e.icon?n("i",{class:e.icon}):t._e(),t._v(t._s(e.label))])]):n("div",{staticClass:"d-inline-flex"},[n("button",{staticClass:"btn-shadow  align-items-center btn",class:{"btn-link":"link"==e.type,"btn-success":!e.type||"button"==e.type},on:{click:function(n){return t.clickAction(e)}}},[e.icon?n("i",{staticClass:"mr-2",class:e.icon}):t._e(),t._v("\n                            "+t._s(e.label)+" \n                        ")])])],1)]}),null,{action:e})],2)})),t.dateranegeinput&&!t.dateranegeinput.hidden?n("span",{staticClass:"action-wrapper"},[n("date-range-picker",{attrs:{opens:"left","time-picker":!1,"control-container-class":"reportrange-text btn btn-success",ranges:t.dateranegeinput.ranges},on:{select:t.onDateRangeSelect,update:t.onDateRangeUpdate},scopedSlots:t._u([{key:"input",fn:function(e){return[n("i",{staticClass:"fa fa-calendar-alt"}),t._v(" "+t._s(t._f("date")(e.startDate))+" - "+t._s(t._f("date")(e.endDate))+"\n                ")]}}],null,!1,4282143172),model:{value:t.dateranegeinput.range,callback:function(e){t.$set(t.dateranegeinput,"range",e)},expression:"dateranegeinput.range"}})],1):t._e()],2)]),n("div",{staticStyle:{clear:"both",height:"0px"}})])},s=[],i=(n("7f7f"),n("96cf"),n("3b8d")),r=n("bbf5"),o=n.n(r),c=(n("53b4"),n("2ead"),n("c1df")),l=n.n(c),u=n("4a7a"),d=n.n(u),p=(n("6dfc"),n("d166"));function f(t){return t.hour(0).minute(0).seconds(0).milliseconds(0)}function m(t){return t.hour(23).minute(59).seconds(59).milliseconds(999)}var h={components:{DateRangePicker:o.a,vSelect:d.a},data:function(){var t=this;return{MyFlags:p["c"],MyDict:p["b"],MyConst:p["a"],dateranegeinput:function(){if(!t.daterange)return null;var e=t.daterange.startDate||f(l()().subtract(7,"day")).toDate(),n=t.daterange.endDate||m(l()()).toDate();return{range:{startDate:e,endDate:n},ranges:{Today:[f(l()()).toDate(),m(l()()).toDate()],"Last 7 Days":[f(l()().subtract(7,"day")).toDate(),m(l()()).toDate()],Yesterday:[f(l()().subtract(1,"day")).toDate(),m(l()().subtract(1,"day")).toDate()],"This month":[f(l()().date(1)).toDate(),m(l()()).toDate()],"Last month":[f(l()().subtract(1,"month").date(1)).toDate(),m(l()().date(0)).toDate()],"This year":[f(l()().month(0).date(1)).toDate(),m(l()()).toDate()],"Last year":[f(l()().subtract(1,"year").month(0).date(1)).toDate(),m(l()().month(0).date(0)).toDate()]}}}(),input:{lane:{options:[],value:null,sender:""},search:{value:null},contacts:""}}},computed:{},filters:{date:function(t){return t?t.toLocaleString():""}},created:function(t){this.daterange&&(this.daterange.startDate||(this.daterange.startDate=f(l()()).toDate()),this.daterange.endDate||(this.daterange.endDate=m(l()()).toDate()),this.sanitizeDateRange(this.daterange)),this.loadLanes()},methods:{sanitizeDateRange:function(t){var e=l()(t.startDate),n=l()(t.endDate);return t.startDate=f(e).toDate(),t.endDate=m(n).toDate(),t},loadLanes:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$service.getX("/api/options/channels");case 2:t.sent,this.input.lane.options=this.$store.getters.StateApi.OptionsChannels;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onDateRangeSelect:function(t){console.log("select",t);var e=this.sanitizeDateRange(t);this.dateranegeinput.range.startDate=e.startDate,this.dateranegeinput.range.endDate=e.endDate},onDateRangeUpdate:function(t){console.log("c_update",t),this.daterange&&(this.daterange.startDate=t.startDate,this.daterange.endDate=t.endDate,this.$emit("dateRangeOnUpdate",t))},clickAction:function(t){this.$emit("action",t)},action:function(t,e,n){for(var a in this.actions)if(this.actions[a].name==t){this.actions[a][e]=n;break}},getInput:function(t){var e;return null===(e=this.input[t])||void 0===e?void 0:e.value}},props:{icon:String,heading:String,subheading:String,actions:Array,filters:Array,daterange:{type:Object,default:function(){return null}},actionShow:{type:Object,default:function(){return{message:"hello"}}}}},v=h,b=(n("02fc"),n("fb11"),n("2877")),g=Object(b["a"])(v,a,s,!1,null,null,null);e["a"]=g.exports},e740:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("page-title",{attrs:{heading:t.heading,subheading:t.subheading,icon:t.icon,actions:t.actions},on:{action:t.onAction}}),n("ValidationObserver",{ref:"session_form",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.invalid;return[n("div",{staticClass:"row"},[n("b-card",{staticClass:"col-md-4"},[n("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("label",[t._v("Account Details")]),n("v-select",{staticClass:"w-100",attrs:{options:t.input.lane.values,searchable:!1,clearable:!1,placeholder:"Select Account"},scopedSlots:t._u([{key:"selected-option",fn:function(e){return[n("div",{staticClass:"user_assignment-selected"},[n("span",{staticClass:"contact_type fab",class:t.MyDict.social[e.contactType]}),t._v("  "+t._s(e.lane))])]}},{key:"open-indicator",fn:function(e){var a=e.attributes;return[n("span",t._b({staticClass:"fa fa-caret-down"},"span",a,!1))]}},{key:"option",fn:function(e){var a=e.contactType,s=e.lane;return[n("span",{staticClass:"contact_type fab",class:t.MyDict.social[a]}),t._v("  "+t._s(s)+"\n                              ")]}}],null,!0),model:{value:t.input.lane.selected,callback:function(e){t.$set(t.input.lane,"selected",e)},expression:"input.lane.selected"}})]}}],null,!0)}),n("br"),n("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required|phoneML",vid:"input_contact_number",name:"Contact Number",mode:"lazy"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("label",[t._v("Contacts")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input.contacts,expression:"input.contacts"}],staticClass:"form-control",attrs:{rows:"10"},domProps:{value:t.input.contacts},on:{input:function(e){e.target.composing||t.$set(t.input,"contacts",e.target.value)}}}),n("span",{staticClass:"v-input-error"},[t._v(t._s(e.errors[0]))])]}}],null,!0)})],1),n("b-card",{staticClass:"col-md-4 session-list"},[n("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("label",[t._v("Template")]),n("v-select",{staticClass:"w-100",attrs:{options:t.input.templates.values,searchable:!1,clearable:!1,placeholder:"Select Account"},scopedSlots:t._u([{key:"selected-option",fn:function(e){return[t._v("\n                                  "+t._s(e.name)+"    \n                              ")]}},{key:"open-indicator",fn:function(e){var a=e.attributes;return[n("span",t._b({staticClass:"fa fa-caret-down"},"span",a,!1))]}},{key:"option",fn:function(e){var a=e.category,s=e.name;return[n("small",{},[t._v(t._s(a))]),t._v("   "+t._s(s)+"\n                              ")]}}],null,!0),model:{value:t.input.templates.selected,callback:function(e){t.$set(t.input.templates,"selected",e)},expression:"input.templates.selected"}})]}}],null,!0)}),n("br"),n("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required|phone",vid:"input_contact_number",name:"Contact Number"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("label",[t._v("Message Preview")]),t.input.templates.selected?n("TemplatePreview",{attrs:{template:t.input.templates.selected}}):t._e(),n("span",{staticClass:"v-input-error"},[t._v(t._s(e.errors[0]))])]}}],null,!0)}),n("br"),n("b-form-row",[n("button",{staticClass:"form-control btn btn-primary",attrs:{name:"password",id:"examplePassword",disabled:a},on:{click:t.sendBulk}},[t._v("Send")])])],1)],1)]}}])})],1)},s=[],i=(n("4917"),n("7f7f"),n("96cf"),n("3b8d")),r=(n("28a5"),n("88b4")),o=n("d166"),c=n("3ef3"),l=n("e492"),u=n("9dbb"),d=n.n(u),p=n("ecee"),f=n("c074"),m=n("ad3d"),h=n("4a7a"),v=n.n(h);n("6dfc");function b(){return{code:"",dept_email:"",id:null,name:""}}p["c"].add(f["B"],f["A"],f["r"]);var g={contact:{name:"John Doe",phone:"919876543210",email:"John.Doe@company.com"}},y={components:{PageTitle:l["a"],"font-awesome-icon":m["a"],vSelect:v.a,TemplatePreview:r["a"]},data:function(){return{MyFlags:o["c"],MyDict:o["b"],MyConst:o["a"],heading:"Send Bulk",subheading:"Send bulk Messages to conatcts",icon:"pe-7s-chat icon-gradient bg-tempting-azure fa fa-file-import",actions:[{label:"View Past Jobs",name:"BULK_PUSH_JOBS",link:"/app/moderate/bulk-push-jobs",type:"link"}],input:{lane:{values:[],selected:[],sender:""},templates:{values:[],selected:null,sender:""},contacts:""},table:{fields:[{key:"actions",label:"Action"},{key:"startSessionStamp",label:"Start@"},{key:"closeSessionStamp",label:"Closed@"}],items:[],perPage:25,currentPage:1,rows:0},meta:{sender:null,contact:null,contactMobile:null,contactName:null,lane:null},newItem:b(),modelName:"MODAL_ADD_TEAM",sample:g}},computed:{preview:function(t){if(!this.input.templates.selected||!this.input.templates.selected.template)return{preview:"",text:""};var e=this.input.templates.selected.template.split("---options---");return{text:d.a.render(e[0],this.sample),options:c["a"].message_form_options(c["a"].map_from_string(e[1]))}}},created:function(t){this.loadLanes(),this.loadTemplates()},methods:{loadLanes:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$service.get("/api/options/channels");case 2:e=t.sent,this.input.lane.values=e.results.filter((function(t){return"WHATSAPP"==t.contactType}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadTemplates:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$service.get("/api/tmpl/pushtemplate");case 2:e=t.sent,this.input.templates.values=e.results;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onAction:function(t){switch(t.name){case"IMPORT_CHAT":this.$refs.file.click();break;case"EDIT_ITEM":this.oldHash=JSON.stringify(this.newItem),this.$bvModal.show(this.modelName),console.log("ADD_ITEM",t);break;case"CANCEL":this.$bvModal.hide(this.modelName);break;default:console.log("NoMapping",t)}},sendBulk:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$service.post("/api/message/bulk/push/send",{message:this.preview.text,subject:this.input.lane.selected.title,templateId:this.input.templates.selected.id,contact:{contactType:this.input.lane.selected.contactType,lane:this.input.lane.selected.lane,channel:this.input.lane.selected.channel},to:this.input.contacts.match(/[^\r\n\,]+/g).map((function(t){return t.trim()})).filter((function(t){return!!t}))});case 2:t.sent,this.$router.push("/app/moderate/bulk-push-jobs");case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},_=y,D=(n("6704"),n("b82a"),n("2877")),w=Object(D["a"])(_,a,s,!1,null,"aa3a184a",null);e["default"]=w.exports},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray},fb11:function(t,e,n){"use strict";n("da41")}}]);