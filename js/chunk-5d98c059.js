(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d98c059"],{"02fc":function(t,e,a){"use strict";a("3170")},"0423":function(t,e,a){},"08a2":function(t,e,a){},"0fd8":function(t,e,a){},"0fdc":function(t,e,a){},"1ec90":function(t,e,a){"use strict";a("08a2")},"2f21":function(t,e,a){"use strict";var s=a("79e5");t.exports=function(t,e){return!!t&&s((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"2fdb":function(t,e,a){"use strict";var s=a("5ca1"),n=a("d2c8"),i="includes";s(s.P+s.F*a("5147")(i),"String",{includes:function(t){return!!~n(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},3170:function(t,e,a){},3902:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.activeChat?a("div",t._l(t.messages,(function(e,s){return a("div",{key:s,attrs:{id:"message-"+t.activeChat.sessionId+"-"+e.messageId}},[e?a("span",[t.$global.MyFunc.isInbound(e.type)?a("div",{staticClass:"d-flex justify-content-start mb-4 chat-bubble",attrs:{title:e.tags?e.tags.categories:null}},[a("div",{staticClass:"msg_cotainer"},[e.replyIdExt||e.replyMessage?a("div",[a("div",{staticClass:"msg_cotainer_with_reply",attrs:{id:"reply-id-"+e.replyIdExt+"-"+e.messageId},on:{click:function(a){return t.jumpFor(e)}}},[t._v("\n                        Reply to  "),a("i",{staticClass:"fa fa-chevron-right"}),a("span",{attrs:{hidden:""}},[t._v(t._s(e.replyMessage))])]),a("b-popover",{attrs:{triggers:"hover focus",target:"reply-id-"+e.replyIdExt+"-"+e.messageId,"custom-class":"message-preview",placement:"right"},on:{show:function(a){return t.onReplyShow(e)}},scopedSlots:t._u([{key:"default",fn:function(){return[e.replyMessage?a("ChatMessageContent",{attrs:{message:e.replyMessage}}):a("span",[t._v("Loading\n                            ")]),a("loading",{attrs:{active:!e.replyMessage,loader:"dots",opacity:.3,"is-full-page":!1}})]},proxy:!0}],null,!0)})],1):t._e(),a("ChatMessageContent",{attrs:{message:e}})],1),a("span",{staticClass:"msg_time"},[a("span",{staticClass:"msg_user"},[t._v(t._s(e.name||"---"))]),t._v("  "+t._s(t._f("formatDate")(e.timestamp))+"\n                "),e.logs||e.stamps?a("span",{staticClass:"msg_status_send-wrapper"},[t._v("\n                     \n                    "),e.stamps.FORWARDED?a("b-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Forwarded @ "+t.$formatters.formatStamp(e.stamps.FORWARDED),expression:"'Forwarded @ ' + $formatters.formatStamp(m.stamps.FORWARDED)"}],staticClass:"msg_status",attrs:{icon:"skip-forward-fill",variant:"dark"}}):t._e()],1):t._e()])]):t.$global.MyFunc.isOutbound(e.type)?a("div",{staticClass:"d-flex justify-content-end mb-4 chat-bubble",attrs:{"data-local-id":"m.localId","data-message-id":e.messageId}},[a("div",{staticClass:"msg_cotainer_send"},[a("ChatMessageContent",{attrs:{message:e}}),a("span",{staticClass:"msg_time_send"},[a("span",[t._v(t._s(t._f("formatDate")(e.timestamp))+"  ")]),a("span",{staticClass:"msg_user"},[t._v(t._s(e.name||"---"))]),a("span",[t._v("  ")]),e.logs||e.stamps?a("span",{staticClass:"msg_status_send-wrapper"},[e.messageId?e.stamps.CCWIN?a("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Out of customer care window",expression:"`Out of customer care window`"}],staticClass:"fa fa-comment-slash msg_status_send text-danger"}):e.stamps.SENT_ERR?a("b-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.cleanlog(e.logs),expression:"cleanlog(m.logs)"}],staticClass:"msg_status_send",attrs:{icon:"exclamation-triangle",scale:".8",variant:"danger"}}):e.stamps.BLCKD?a("b-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.cleanlog(e.logs),expression:"cleanlog(m.logs)"}],staticClass:"msg_status_send",attrs:{icon:"slash-circle-fill",scale:".8",variant:"danger"}}):e.logs||e.stamps.FAILD||e.stamps.NSENT||e.stamps.SENTX_ERR?a("b-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.cleanlog(e.logs),expression:"cleanlog(m.logs)"}],staticClass:"msg_status_send",attrs:{icon:"exclamation-triangle-fill",scale:".8",variant:"danger"}}):e.stamps.READ?a("b-icon",{staticClass:"msg_status_send",attrs:{icon:"check-all",variant:"success"}}):e.stamps.DLVRD?a("b-icon",{staticClass:"msg_status_send",attrs:{icon:"check-all",variant:"dark"}}):e.stamps.SENTX?a("b-icon",{staticClass:"msg_status_send",attrs:{icon:"check",variant:"dark"}}):e.stamps.SENT?a("b-icon",{staticClass:"msg_status_send muted",attrs:{icon:"check",variant:"muted"}}):a("b-icon",{staticClass:"msg_status_send",attrs:{icon:"check",variant:"light"}}):a("i",{staticClass:"sending fa fa-spinner fa-spin msg_status_send"},[t._v(" ")])],1):t._e()])],1)]):"A"==e.type||"L"==e.type||"N"==e.type?a("ChatMessageLog",{staticClass:"chat-bubble chat-bubble-note",attrs:{message:e}}):t._e()],1):t._e()])})),0):t._e()},n=[],i=(a("96cf"),a("3b8d")),o=(a("a481"),a("55dd"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-center",attrs:{"data-local-id":"m.localId","data-message-id":t.m.messageId}},[t.m.messageId?t._e():a("i",{staticClass:"sending fa fa-spinner fa-spin"},[t._v(" ")]),"N"==t.m.type?a("div",{staticClass:"msg_cotainer_note"},[a("div",{staticClass:"text"},[t._v(t._s(t._f("newlines")(t._f("striphtml")(t.m.text))))]),a("span",{staticClass:"msg_user",class:{"float-right":t.m.sender==t.$global.MyConst.agent}},[t._v(t._s(t._f("blank3dash")(t.m.name)))]),a("span",{class:{"float-right":t.m.name==t.$global.MyConst.agent}},[t._v("\n            "+t._s(t._f("formatDate")(t.m.timestamp))+"  \n        ")])]):a("div",{staticClass:"msg_cotainer_action"},[t._v("\n        "+t._s(t._f("formatDate")(t.m.timestamp))+"  "),a("span",{staticClass:"msg_user"},[t._v(t._s(t._f("blank3dash")(t.m.name)))]),t._v(" "),a("span",{staticClass:"fa fa-long-arrow-alt-right"}),t._v(" "+t._s(t._f("newlines")(t._f("striphtml")(t.m.action)))+"\n        "),t.m.logs?a("span",t._l(t.m.logs,(function(e,s){return a("i",{key:s,staticClass:"prepend-comma"},[t._v("\n             "+t._s(t._f("newlines")(t._f("striphtml")(t._f("log_option")(e,t.m.action)))))])})),0):t._e()])])}),r=[],c={name:"ChatMessageLog",components:{},computed:{m:function(){return this.message}},data:function(){return{}},props:{message:{type:Object}}},l=c,u=(a("92cf"),a("2877")),d=Object(u["a"])(l,o,r,!1,null,"be560cf2",null),p=d.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.m?a("span",["DELTD"==t.m.status?a("span",{staticClass:"text-capitalize text-sm"},[a("span",{staticClass:"fa fa-ban"}),t._v(" "),a("i",[t._v("message deleted ")])]):a("span",[t.m.text?a("span",{directives:[{name:"linkify",rawName:"v-linkify",value:{className:"my-clickable-link"},expression:"{ className: 'my-clickable-link'}"}]},[t._v(t._s(t._f("newlines")(t._f("striphtml")(t.m.text))))]):t._e(),t.m.attachments?a("div",[t.m.template?a("span",[a("span",{staticClass:"fa fa-paperclip"}),t._v(" "+t._s(t.m.template))]):t._e(),a("div",{staticClass:"input-group my-attachments"},t._l(t.m.attachments,(function(e,s){return a("span",{directives:[{name:"viewer",rawName:"v-viewer",value:t.viewerOptions,expression:"viewerOptions"}],key:e.mediaURL,staticClass:"my-attachment",class:["mediaType-"+e.mediaType]},["IMAGE"==e.mediaType?a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$formatters.https_thumburl(e.mediaURL),expression:"$formatters.https_thumburl(atch.mediaURL)"}],attrs:{id:"attachment-"+t.m.messageId+"-"+s,"data-full-src":t._f("https")(e.mediaURL)}}):"AUDIO"==e.mediaType?a("audio-player",{attrs:{file:e.mediaURL}}):a("a",{staticClass:"my-attachment-link text-center w-100 d-block bg-greyish",attrs:{id:"attachment-"+t.m.messageId+"-"+s,href:t._f("https")(e.mediaURL),target:"_blank",download:""}},[a("my-icon",{attrs:{type:"fileType",value:e.mediaMimeType,status:e.mediaMimeType,meta:e.mediaName}})],1),e.mediaCaption&&e.mediaCaption!==t.m.text?a("label",{staticClass:"my-attachment-title mediaCaption",attrs:{for:"attachment-"+t.m.messageId+"-"+s}},[t._v(t._s(e.mediaCaption))]):e.mediaName?a("label",{staticClass:"my-attachment-title mediaName",attrs:{for:"attachment-"+t.m.messageId+"-"+s}},[t._v(t._s(e.mediaName))]):t._e()],1)})),0)]):t.m.template?a("div",{staticClass:"my-msg-template-tag"},[a("span",{staticClass:"fa fa-tag"}),t._v(" "+t._s(t.m.template)+"\n        ")]):t._e()])]):t._e()},f=[],h=a("a026"),g=a("8c57");const v={URL0:/(https?:\/\/[^\s]+)/gim,URL:/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,PSEUDO_URL:/\bwww\.[\S]+\.[\S]+/gim,EMAIL_ADDRESS:/[\w.]+@[a-zA-Z_-]+?(?:\.[a-zA-Z]{2,6})+/gim},_={DEFAULT:"_blank"};function y(t=""){return[...t.matchAll(v.EMAIL_ADDRESS),...t.matchAll(v.URL)].flat()}function b(t){if(w(t)){const e=x(t?t.className:null),a=D(t?t.target:null);return`${e} ${a}`}return D()}function C(t,e,a){return null!==e.match(v.EMAIL_ADDRESS)&&(t=k(t,e,a)),null===e.match(v.URL)&&null===e.match(v.PSEUDO_URL)||(t=S(t,e,a)),t}function w(t){return t&&"object"===typeof t&&null!==t&&!Array.isArray(t)}function x(t){return t?`class="${t}"`:""}function D(t){return`target="${t||_.DEFAULT}"`}function k(t,e,a){return t.replace(e,`<a ${a} href="mailto:${e}">${e}</a>`)}function S(t,e,a){const s=-1===e.toLowerCase().indexOf("http")&&-1===e.toLowerCase().indexOf("ftp")?"//":"";return t.replace(e,`<a ${a} href="${s+e.trim()}">${e}</a>`)}function T(t,e){t.innerHTML=t.textContent.split(" ").map(t=>{let a=y(t)||[];if(a.length){const s=b(e);a.forEach(e=>{t=C(t,e,s)})}return t}).join(" ")}const M={bind:function(t,e){T(t,e?e.value:null)},componentUpdated:function(t,e,a){const s=t;s.textContent="",a&&a.children&&a.children[0]&&a.children[0].text&&(s.textContent=a.children[0].text),T(s,e?e.value:null)}};h["default"].use(M);var R={name:"ChatMessageContent",components:{AudioPlayer:g["a"]},directives:{linkify:M},computed:{m:function(t){return this.message}},data:function(){return{viewerOptions:{url:"data-full-src"}}},props:{message:{type:Object,default:function(){return{text:""}}}}},I=R,$=(a("ac7f"),a("6a3f"),Object(u["a"])(I,m,f,!1,null,"7824bf71",null)),O=$.exports,L=a("8760"),A={name:"ChatMessages",components:{ChatMessageLog:p,ChatMessageContent:O},watch:{"$store.getters.StateChatsVersion":function(){this.refreshKey=!this.refreshKey},"$route.params.sessionId":function(t){this.$route.params.jumpTo&&this.jumpTo(this.$route.params.jumpTo)}},computed:{messages:function(){this.refreshKey;var t=this.activeChat.sessionId;return(this.activeChat.messages||[]).filter((function(e){return t==e.sessionId})).sort((function(t,e){return t.timestamp-e.timestamp}))}},data:function(){return{refreshKey:!1,cleanlog:function(t){return(t+"").replace("360dialog","whatsapp")}}},mounted:function(){},methods:{onReplyShow:Object(L["a"])(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.activeChat||!this.activeChat.messages){t.next=7;break}for(a in this.activeChat.messages)(e.replyId&&this.activeChat.messages[a].messageId==e.replyId||e.replyIdExt&&this.activeChat.messages[a].messageIdExt==e.replyIdExt)&&(e.replyMessage=this.activeChat.messages[a]);if(e.replyMessage){t.next=7;break}return t.next=5,this.$service.get("/api/session/messages",{sessionId:this.activeChat.sessionId,messageId:e.replyId,messageIdExt:e.replyIdExt});case 5:s=t.sent,s.results[0]&&(e.replyMessage=s.results[0]);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),500),jumpTo:Object(L["a"])(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$scrollTo(e,{container:".msg_card_body"});case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()),jumpFor:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.onReplyShow(e);case 2:a=this.activeChat.contactId.replace("/","-"),e.replyMessage.sessionId==this.activeChat.sessionId?this.jumpTo("#message-".concat(this.activeChat.sessionId,"-").concat(e.replyMessage.messageId)):this.$router.push({name:"defAgentView",params:{contactId:a,sessionId:e.replyMessage.sessionId,profileId:a,mvu:"CHATBOX",jumpTo:"#message-".concat(e.replyMessage.sessionId,"-").concat(e.replyMessage.messageId)}});case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},props:{activeChat:{type:Object}}},N=A,j=(a("540d"),Object(u["a"])(N,s,n,!1,null,"99737960",null));e["a"]=j.exports},"3daa":function(t,e,a){},"3e84":function(t,e,a){"use strict";e["a"]={name:"SlideUpDown",props:{active:Boolean,duration:{type:Number,default:500},tag:{type:String,default:"div"},useHidden:{type:Boolean,default:!0}},data:function(){return{style:{},initial:!1,hidden:!1}},watch:{active:function(){this.layout()}},render:function(t){return t(this.tag,{style:this.style,attrs:this.attrs,ref:"container",on:{transitionend:this.onTransitionEnd}},this.$slots.default)},mounted:function(){this.layout(),this.initial=!0},created:function(){this.hidden=!this.active},computed:{el:function(){return this.$refs.container},attrs:function(){var t={"aria-hidden":!this.active,"aria-expanded":this.active};return this.useHidden&&(t.hidden=this.hidden),t}},methods:{layout:function(){var t=this;this.active?(this.hidden=!1,this.$emit("open-start"),this.initial&&this.setHeight("0px",(function(){return t.el.scrollHeight+"px"}))):(this.$emit("close-start"),this.setHeight(this.el.scrollHeight+"px",(function(){return"0px"})))},asap:function(t){this.initial?this.$nextTick(t):t()},setHeight:function(t,e){var a=this;this.style={height:t},this.asap((function(){a.__=a.el.scrollHeight,a.style={height:e(),overflow:"hidden","transition-property":"height","transition-duration":a.duration+"ms"}}))},onTransitionEnd:function(t){t.target===this.el&&(this.active?(this.style={},this.$emit("open-end")):(this.style={height:"0",overflow:"hidden"},this.hidden=!0,this.$emit("close-end")))}}}},"457f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("master-view",{attrs:{id:"agent-session-list",header:{heading:t.heading,subheading:t.subheading,icon:t.icon},filters:[{label:"Date Range",name:"daterange"},{label:"Refresh",name:"sync"}],table:Object.assign({},t.sessions,{items:t.filtered}),busy:t.sessions.busy},scopedSlots:t._u([{key:"filter(sync)",fn:function(){return[a("span",{staticClass:"btn btn-success margin-right-5px",on:{click:t.openFilterPopup}},[a("i",{staticClass:"fa fa-filter"})]),a("span",{staticClass:"btn btn-success",on:{click:t.loadSessions}},[a("i",{staticClass:"fa fa-refresh"})])]},proxy:!0},{key:"top-row",fn:function(e){return[a("b-th",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.assignedToAgent,expression:"filters.assignedToAgent"}],staticClass:"form-control form-control-sm",attrs:{type:"text"},domProps:{value:t.filters.assignedToAgent},on:{input:function(e){e.target.composing||t.$set(t.filters,"assignedToAgent",e.target.value)}}})]),a("b-th",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.contactName,expression:"filters.contactName"}],staticClass:"form-control form-control-sm",attrs:{type:"text"},domProps:{value:t.filters.contactName},on:{input:function(e){e.target.composing||t.$set(t.filters,"contactName",e.target.value)}}})]),a("b-th",[t._v(" ")]),a("b-th",[t._v(" ")]),a("b-th",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.fistResponseStamp,expression:"filters.fistResponseStamp"}],staticClass:"form-control form-control-sm",on:{click:function(t){t.stopPropagation(),t.preventDefault()},change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filters,"fistResponseStamp",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("--")]),t._l(t.fistResponseOptions,(function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.label))])}))],2)]),a("b-th",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.closeSessionStamp,expression:"filters.closeSessionStamp"}],staticClass:"form-control form-control-sm",on:{click:function(t){t.stopPropagation(),t.preventDefault()},change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filters,"closeSessionStamp",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("--")]),t._l(t.closeSessionOptions,(function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.label))])}))],2)])]}},{key:"cell(assignedToAgent)",fn:function(e){return[a("my-icon",{attrs:{type:"chatmode",value:e.item.mode}}),t._v("\n                "+t._s(e.item.assignedToAgent)+"\n                "),e.item.assignedToDept?a("span",[t._v("\n                  ("+t._s(e.item.assignedToDept)+")\n                ")]):t._e(),e.item.assignedToQueue?a("span",[t._v("\n                  | "+t._s(e.item.assignedToQueue)+"\n                ")]):t._e()]}},{key:"cell(contactId)",fn:function(e){return[a("MyText",{staticClass:"mr-2 btn btn-xs btn-outline-grey text-xs text-uppercase",attrs:{options:"getx:/api/options/channels",invalidDisplay:"DEMO",optionLabel:"channelCode"},model:{value:e.item.local.channelId,callback:function(a){t.$set(e.item.local,"channelId",a)},expression:"row.item.local.channelId"}}),a("i",{staticClass:"fab",class:t.MyDict.socialPrefix(e.item.contactType)}),t._v("\n                "+t._s(t._f("contactName")(e.item))+"\n\n                "),a("span",{staticClass:"fa fa-info-circle",attrs:{"cursor-pointer":"",id:"template-details-"+e.index}}),a("b-popover",{attrs:{triggers:"hover focus",target:"template-details-"+e.index,"custom-class":""},scopedSlots:t._u([{key:"default",fn:function(){return[a("div",{staticClass:"message-text text-bold "},[t._v(t._s(e.item.contactName))]),e.item.subject?a("div",{staticClass:"message-text text-bolder"},[t._v(t._s(e.item.subject))]):t._e(),a("div",{staticClass:"message-text text-italic text-xs"},[t._v(t._s(e.item.contactId))]),a("div",{staticClass:"message-text text-italic text-sm"},[t._v(t._s(e.item.sessionId))])]},proxy:!0}],null,!0)})]}},{key:"cell(startSessionStamp)",fn:function(e){return[t._v("\n                "+t._s(t._f("formatDate")(e.item.startSessionStamp))+"\n            ")]}},{key:"cell(fistResponseStamp)",fn:function(e){return[t._v("\n                "+t._s(t._f("formatDate")(e.item.fistResponseStamp))+" \n            ")]}},{key:"cell(closeSessionStamp)",fn:function(e){return[a("span",{staticClass:"fa text-xs",class:{"text-success":e.item.local.open,"text-danger":e.item.local.expired,"text-info":e.item.local.resolved,"fa-dot-circle":e.item.primary,"fa-circle":!e.item.primary}}),t._v("\n                  "+t._s(t._f("formatDate")(e.item.closeSessionStamp))+"\n            ")]}},{key:"cell(actions)",fn:function(e){return[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"View Chat",expression:"'View Chat'"}],staticClass:"far fa-comment-alt mg-1 pointer text-primary text-bold",on:{click:function(a){return t.showChat(e.item,e.index,a.target)}}})]}}])}),a("b-modal",{attrs:{id:t.modelName,title:"Session Filter",size:"lg","hide-footer":""},scopedSlots:t._u([{key:"modal-footer",fn:function(){},proxy:!0}])},[a("div",{staticClass:"filter-wrapper col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"},[a("span",{staticClass:"action-wrapper text-center"},[a("date-range-picker",{staticClass:"session-search-date-picker date-range-picker-mobile",attrs:{opens:"right","time-picker":!1,"control-container-class":"reportrange-text btn",ranges:t.dateranegeinput.ranges,"date-range":t.dateranegeinput.daterange},on:{select:t.onDateRangeSelect,update:t.onDateRangeUpdate},scopedSlots:t._u([{key:"input",fn:function(e){return[a("i",{staticClass:"fa fa-calendar-alt"}),t._v(" "+t._s(t._f("date")(e.startDate))+" - "+t._s(t._f("date")(e.endDate))+"\n                ")]}}]),model:{value:t.dateranegeinput.range,callback:function(e){t.$set(t.dateranegeinput,"range",e)},expression:"dateranegeinput.range"}})],1),a("br"),a("div",{staticClass:"section-divider"},[a("span",{staticClass:"cat-title section-title"},[t._v("Chat Status")])]),a("div",t._l(t.editableStatus,(function(e,s){return a("span",{key:s,staticClass:"tag-chat-status-lg tag",class:"tag-chat-status-"+s+(-1!=t.selectedStatus.indexOf(s)?" tag-chat-status-active":""),on:{click:function(e){return t.selectStatus(s)}}},[t._v("\n                "+t._s(e.label)+"\n            ")])})),0),t._l(t.sortedQuickTags,(function(e,s){return a("div",{key:s,staticClass:"mt-3"},[a("div",{staticClass:"section-divider"},[a("span",{staticClass:"cat-title section-title"},[t._v(t._s(s))])]),t._l(t.sortedQuickTags[s],(function(e,s){return a("span",{key:s,class:"tag-chat-status-lg tag "+(e.selected?" tag-chat-status-active":""),on:{click:function(a){return t.selectTag(e)}}},[t._v("\n                "+t._s(e.title)+" \n            ")])}))],2)})),a("hr"),a("i",{staticClass:"note",class:t.searchError?"shake-horizontal":""},[t._v("Select a minimum of one filter element to continue")]),a("div",{staticStyle:{"text-align":"center"}},[a("b-button",{staticClass:"btn btn-sm text-black:hover rounded-pill btn-outline-black-dirty",staticStyle:{width:"120px"},on:{click:t.loadSessions}},[t._v(" Search ")])],1),a("hr"),a("i",{staticClass:"note"},[t._v("The search works on the principle of AND / OR operation when elements from multiple categories are selected. AND is applied across different categories and OR is applied within the category")])],2)]),a("div",{staticClass:"chat_archive",class:{closed:!t.session}},[t.session?a("agent-chat",{key:t.session.sessionId,attrs:{session:t.session},on:{close:t.hideChat,update:t.updateChat}}):t._e()],1)],1)},n=[],i=a("75fc"),o=(a("96cf"),a("3b8d")),r=(a("7f7f"),a("6762"),a("2fdb"),a("ac6a"),a("456d"),a("e492")),c=a("d166"),l=a("df4b"),u=a("6172"),d=a("c1df"),p=a.n(d),m=a("bbf5"),f=a.n(m),h=(a("53b4"),a("3ef3"));function g(t){return t.hour(0).minute(0).seconds(0).milliseconds(0)}function v(t){return t.hour(23).minute(59).seconds(59).milliseconds(999)}var _={components:{PageTitle:r["a"],AgentChat:l["a"],DateRangePicker:f.a},computed:{filtered:function(){var t=this;if(!this.sessions.items.length)return[];var e=this.sessions.items.filter((function(e){return Object.keys(t.filters).every((function(a){var s,n,i,o;if("closeSessionStamp"===a)switch(t.filters[a]){case"resolved":return null===e||void 0===e||null===(s=e.local)||void 0===s?void 0:s.resolved;case"opened":return null===e||void 0===e||null===(n=e.local)||void 0===n?void 0:n.active;case"expired":return null===e||void 0===e||null===(i=e.local)||void 0===i?void 0:i.expired;case"closed":return null===e||void 0===e||null===(o=e.local)||void 0===o?void 0:o.closed;default:return!0}else{if("fistResponseStamp"!==a)return"contactName"===a?String(e._searchText).toLowerCase().includes(t.filters[a].toLowerCase()):String(e[a]).toLowerCase().includes(t.filters[a].toLowerCase());switch(t.filters[a]){case 0:return 0==e[a];case"attended":return 0!=e[a];default:return!0}}}))}));return e.length>0?e:[]},sortedQuickTags:function(){return this.$store.getters.StateQuickTagsSorted},editableStatus:function(){return Object.keys(c["b"].chatStatus).map((function(t){return c["b"].chatStatus[t]})).filter((function(t){return t.editable}))}},filters:{contactName:function(t){var e;return t.contactName||(null===t||void 0===t||null===(e=t.contact)||void 0===e?void 0:e.name)||t.contactId},date:function(t){return t?t.toLocaleDateString():""}},data:function(){return{MyFlags:c["c"],MyDict:c["b"],MyConst:c["a"],heading:"Chat Sessions",subheading:"Select date range for report",icon:"pe-7s-chat icon-gradient bg-tempting-azure fa fa-chalkboard-teacher",sessions:{sortBy:"startSessionStamp",sortDesc:!0,fields:[{key:"assignedToAgent",label:"Assigned",sortable:!0},{key:"contactId",label:"Contact",sortable:!1},{key:"actions",label:"Action",sortable:!1},{key:"startSessionStamp",label:"Start@",sortable:!0},{key:"fistResponseStamp",label:"Agent@",sortable:!1},{key:"closeSessionStamp",label:"Closed@",sortable:!0}],items:[],perPage:25,currentPage:1,rows:0,busy:!1},closeSessionOptions:[{label:"Closed",value:"closed"},{label:"Expired",value:"expired"},{label:"Resolved",value:"resolved"},{label:"Open",value:"opened"}],fistResponseOptions:[{label:"Attended",value:"attended"},{label:"Not Attended",value:0}],filters:{assignedToAgent:"",contactName:"",closeSessionStamp:"",fistResponseStamp:""},input:{daterange:{startDate:null,endDate:null,span:"Today"}},session:null,dateranegeinput:function(){var t=g(p()().subtract(7,"day")).toDate(),e=v(p()()).toDate();return{range:{startDate:t,endDate:e},ranges:{Today:[g(p()()).toDate(),v(p()()).toDate()],"Last 7 Days":[g(p()().subtract(7,"day")).toDate(),v(p()()).toDate()],Yesterday:[g(p()().subtract(1,"day")).toDate(),v(p()().subtract(1,"day")).toDate()],"This month":[g(p()().date(1)).toDate(),v(p()()).toDate()],"Last month":[g(p()().subtract(1,"month").date(1)).toDate(),v(p()().date(0)).toDate()]}}}(),filteron:!0,formatters:h["a"],modelName:"MODAL_FILTER",selectedStatus:[],selectedTag:null,searchError:!1,daterange:{startDate:null,endDate:null,span:"Today"}}},created:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("LoadQuickTags");case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(t){this.loadSessions()},methods:{openFilterPopup:function(){this.$bvModal.show(this.modelName)},selectTag:function(t){var e=this;this.sortedQuickTags[t.category].map((function(a,s){e.sortedQuickTags[t.category][s].selected=a.id==t.id?!a.selected:a.selected}))},selectStatus:function(t){var e=this.selectedStatus.indexOf(t);-1!=e?this.selectedStatus.splice(e,1):this.selectedStatus=[].concat(Object(i["a"])(this.selectedStatus),[t]),console.log("this.selectedStatus",this.selectedStatus,t,e)},sanitizeDateRange:function(t){var e=p()(t.startDate),a=p()(t.endDate);return t.startDate=g(e).toDate(),t.endDate=v(a).toDate(),t},onDateRangeSelect:function(t){var e=this.sanitizeDateRange(t);this.dateranegeinput.range.startDate=e.startDate,this.dateranegeinput.range.endDate=e.endDate},onDateRangeUpdate:function(t){this.daterange&&(this.daterange.startDate=t.startDate,this.daterange.endDate=t.endDate)},loadSessions:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a in e=[],this.sortedQuickTags)this.sortedQuickTags[a].map((function(t){t.selected&&e.push(t)}));return this.$bvModal.hide(this.modelName),this.sessions.busy=!0,t.prev=4,t.next=7,this.$store.dispatch("GetSessions",{agent:"TEAM",contactType:"MESSAGE_TWITTER",status:this.selectedStatus,tags:e,startStamp:(null===(s=this.daterange.startDate)||void 0===s?void 0:s.getTime())||this.dateranegeinput.range.startDate.getTime(),endStamp:(null===(n=this.daterange.endDate)||void 0===n?void 0:n.getTime())||this.dateranegeinput.range.endDate.getTime()});case 7:i=t.sent,this.sessions.items=i.results.map((function(t){return u["a"].session(t)})),this.sessions.rows=this.sessions.items.length,console.log("sessions",i,this.sessions);case 11:return t.prev=11,this.sessions.busy=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,this,[[4,,11,14]])})));function e(){return t.apply(this,arguments)}return e}(),dateRangeOnUpdate:function(t){console.log("dateRangeOnUpdate",t),this.input.daterange.startDate=t.startDate,this.input.daterange.endDate=t.endDate,this.loadSessions()},deleteChat:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("DeleteSessionChats",e);case 2:t.sent,this.sessions.items.splice(a,1);case 4:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),hideChat:function(t){this.session=null},showChat:function(t){this.session&&this.session.sessionId==t.sessionId?this.session=null:this.session=t},updateChat:function(t){this.loadSessions()}}},y=_,b=(a("e836"),a("69db"),a("6a11"),a("2877")),C=Object(b["a"])(y,s,n,!1,null,"681574bc",null);e["default"]=C.exports},"540d":function(t,e,a){"use strict";a("6a5c")},"55dd":function(t,e,a){"use strict";var s=a("5ca1"),n=a("d8e8"),i=a("4bf8"),o=a("79e5"),r=[].sort,c=[1,2,3];s(s.P+s.F*(o((function(){c.sort(void 0)}))||!o((function(){c.sort(null)}))||!a("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(i(this)):r.call(i(this),n(t))}})},6762:function(t,e,a){"use strict";var s=a("5ca1"),n=a("c366")(!0);s(s.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},"69db":function(t,e,a){"use strict";a("0fd8")},"6a11":function(t,e,a){"use strict";a("a308")},"6a3f":function(t,e,a){"use strict";a("0423")},"6a5c":function(t,e,a){},"75fc":function(t,e,a){"use strict";a.d(e,"a",(function(){return g}));var s=a("a745"),n=a.n(s),i=a("db2a");function o(t){if(n()(t))return Object(i["a"])(t)}var r=a("67bb"),c=a.n(r),l=a("5d58"),u=a.n(l),d=a("774e"),p=a.n(d);function m(t){if("undefined"!==typeof c.a&&null!=t[u.a]||null!=t["@@iterator"])return p()(t)}var f=a("e630");function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(t){return o(t)||m(t)||Object(f["a"])(t)||h()}},8760:function(t,e,a){"use strict";var s=a("b012"),n=a.n(s);const i=function(t,e,a,s){let i,o,r,c;var l=n()((function(){o(t.apply(r,c)),r=c=null,i=null}),e,a,s);let u=function(){return r=this,c=arguments,i=i||new Promise((function(t){o=t})),l(),i};return u.clear=function(t){l.clear(t)},u.flush=function(t){l.flush(t)},u};e["a"]=i},"8c57":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"player"},[a("div",{staticClass:"player-controls"},[t.stoppable?a("div",{attrs:{id:"stop"}},[a("a",{attrs:{title:"Stop",href:"#"},on:{click:function(e){return e.preventDefault(),t.stop.apply(null,arguments)}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[a("path",{attrs:{fill:"currentColor",d:"M16,4.995v9.808C16,15.464,15.464,16,14.804,16H4.997C4.446,16,4,15.554,4,15.003V5.196C4,4.536,4.536,4,5.196,4h9.808C15.554,4,16,4.446,16,4.995z"}})])])]):t._e(),a("div",{attrs:{id:"play"}},[a("a",{attrs:{title:t.playing?"Pause":"Play",href:"#"},on:{click:function(e){e.preventDefault(),t.playing=!t.playing}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[t.playing?a("path",{attrs:{fill:"currentColor",d:"M15,3h-2c-0.553,0-1,0.048-1,0.6v12.8c0,0.552,0.447,0.6,1,0.6h2c0.553,0,1-0.048,1-0.6V3.6C16,3.048,15.553,3,15,3z M7,3H5C4.447,3,4,3.048,4,3.6v12.8C4,16.952,4.447,17,5,17h2c0.553,0,1-0.048,1-0.6V3.6C8,3.048,7.553,3,7,3z"}}):a("path",{attrs:{fill:"currentColor",d:"M15,10.001c0,0.299-0.305,0.514-0.305,0.514l-8.561,5.303C5.51,16.227,5,15.924,5,15.149V4.852c0-0.777,0.51-1.078,1.135-0.67l8.561,5.305C14.695,9.487,15,9.702,15,10.001z"}})])])]),a("div",{attrs:{id:"seek"}},[a("div",{staticClass:"player-timeline"},[a("div",{staticClass:"player-progress",style:t.progressStyle}),a("div",{staticClass:"player-seeker",attrs:{title:"Seek"},on:{click:t.seek}})]),a("div",{staticClass:"player-time"},[a("div",{staticClass:"player-time-current"},[t._v(t._s(t._f("convertTimeHHMMSS")(this.currentSeconds)))]),a("div",{staticClass:"player-time-total"},[t._v(t._s(t._f("convertTimeHHMMSS")(this.durationSeconds)))])])]),t.downloading?a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showVolume,expression:"!showVolume"}],attrs:{id:"download"}},[a("a",{attrs:{href:"#",title:"Download"},on:{click:function(e){return e.preventDefault(),t.download.apply(null,arguments)}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[a("path",{attrs:{fill:"currentColor",d:"M15,7h-3V1H8v6H5l5,5L15,7z M19.338,13.532c-0.21-0.224-1.611-1.723-2.011-2.114C17.062,11.159,16.683,11,16.285,11h-1.757l3.064,2.994h-3.544c-0.102,0-0.194,0.052-0.24,0.133L12.992,16H7.008l-0.816-1.873c-0.046-0.081-0.139-0.133-0.24-0.133H2.408L5.471,11H3.715c-0.397,0-0.776,0.159-1.042,0.418c-0.4,0.392-1.801,1.891-2.011,2.114c-0.489,0.521-0.758,0.936-0.63,1.449l0.561,3.074c0.128,0.514,0.691,0.936,1.252,0.936h16.312c0.561,0,1.124-0.422,1.252-0.936l0.561-3.074C20.096,14.468,19.828,14.053,19.338,13.532z"}})])])]):t._e(),t.loopable?a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showVolume,expression:"!showVolume"}],attrs:{id:"loop"}},[a("a",{attrs:{href:"#",title:"Loop"},on:{click:function(e){e.preventDefault(),t.looping=!t.looping}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[t.looping?a("path",{attrs:{fill:"currentColor",d:"M20,7v7c0,1.103-0.896,2-2,2H2c-1.104,0-2-0.897-2-2V7c0-1.104,0.896-2,2-2h7V3l4,3.5L9,10V8H3v5h14V8h-3V5h4C19.104,5,20,5.896,20,7z"}}):a("path",{attrs:{fill:"currentColor",d:"M1,12V5h3v6h10V8l5,4.5L14,17v-3H3C1.895,14,1,13.104,1,12z"}})])])]):t._e(),t.mutable?a("div",{attrs:{id:"mute"}},[a("a",{attrs:{href:"#",title:"Mute"},on:{click:function(e){return e.preventDefault(),t.mute.apply(null,arguments)}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[t.muted?a("path",{attrs:{fill:"currentColor",d:"M14.201,9.194c1.389,1.883,1.818,3.517,1.559,3.777c-0.26,0.258-1.893-0.17-3.778-1.559l-5.526,5.527c4.186,1.838,9.627-2.018,10.605-2.996c0.925-0.922,0.097-3.309-1.856-5.754L14.201,9.194z M8.667,7.941c-1.099-1.658-1.431-3.023-1.194-3.26c0.233-0.234,1.6,0.096,3.257,1.197l1.023-1.025C9.489,3.179,7.358,2.519,6.496,3.384C5.568,4.31,2.048,9.261,3.265,13.341L8.667,7.941z M18.521,1.478c-0.39-0.391-1.023-0.391-1.414,0L1.478,17.108c-0.391,0.391-0.391,1.024,0,1.414c0.391,0.391,1.023,0.391,1.414,0l15.629-15.63C18.912,2.501,18.912,1.868,18.521,1.478z"}}):a("path",{attrs:{fill:"currentColor",d:"M5.312,4.566C4.19,5.685-0.715,12.681,3.523,16.918c4.236,4.238,11.23-0.668,12.354-1.789c1.121-1.119-0.335-4.395-3.252-7.312C9.706,4.898,6.434,3.441,5.312,4.566z M14.576,14.156c-0.332,0.328-2.895-0.457-5.364-2.928C6.745,8.759,5.956,6.195,6.288,5.865c0.328-0.332,2.894,0.457,5.36,2.926C14.119,11.258,14.906,13.824,14.576,14.156zM15.434,5.982l1.904-1.906c0.391-0.391,0.391-1.023,0-1.414c-0.39-0.391-1.023-0.391-1.414,0L14.02,4.568c-0.391,0.391-0.391,1.024,0,1.414C14.41,6.372,15.043,6.372,15.434,5.982z M11.124,3.8c0.483,0.268,1.091,0.095,1.36-0.388l1.087-1.926c0.268-0.483,0.095-1.091-0.388-1.36c-0.482-0.269-1.091-0.095-1.36,0.388L10.736,2.44C10.468,2.924,10.642,3.533,11.124,3.8z M19.872,6.816c-0.267-0.483-0.877-0.657-1.36-0.388l-1.94,1.061c-0.483,0.268-0.657,0.878-0.388,1.36c0.268,0.483,0.877,0.657,1.36,0.388l1.94-1.061C19.967,7.907,20.141,7.299,19.872,6.816z"}})])])]):t._e(),t.volumable?a("div",{attrs:{id:"volume"}},[a("a",{attrs:{title:t.volumeTitle,href:"#"},on:{click:function(t){t.preventDefault()},mouseenter:function(e){t.showVolume=!0},mouseleave:function(e){t.showVolume=!1}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[a("path",{attrs:{fill:"currentColor",d:"M19,13.805C19,14.462,18.462,15,17.805,15H1.533c-0.88,0-0.982-0.371-0.229-0.822l16.323-9.055C18.382,4.67,19,5.019,19,5.9V13.805z"}})]),a("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:t.volume,expression:"volume",modifiers:{lazy:!0,number:!0}},{name:"show",rawName:"v-show",value:t.showVolume,expression:"showVolume"}],staticClass:"player-volume",attrs:{type:"range",min:"0",max:"100"},domProps:{value:t.volume},on:{change:function(e){t.volume=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}})])]):t._e()]),a("audio",{ref:"audio",staticStyle:{display:"none"},attrs:{loop:t.looping,src:t.file,preload:"auto"},on:{timeupdate:t.update,loadeddata:t.load,pause:function(e){t.playing=!1},play:function(e){t.playing=!0}}})])},n=[],i=(a("96cf"),a("3b8d")),o={props:{stoppable:{type:Boolean,default:!1},downloading:{type:Boolean,default:!1},autoPlay:{type:Boolean,default:!1},file:{type:String,default:null},loop:{type:Boolean,default:!1},loopable:{type:Boolean,default:!1},mutable:{type:Boolean,default:!1},volumable:{type:Boolean,default:!1}},data:function(){return{currentSeconds:0,durationSeconds:0,loaded:!1,looping:!1,playing:!1,previousVolume:35,showVolume:!1,volume:100}},computed:{muted:function(){return this.volume/100===0},percentComplete:function(){return parseInt(this.currentSeconds/this.durationSeconds*100)},progressStyle:function(){return{width:"".concat(this.percentComplete,"%")}},volumeTitle:function(){return"Volume (".concat(this.volume,"%)")}},filters:{convertTimeHHMMSS:function(t){t=t||0;var e=new Date(1e3*t).toISOString().substr(11,8);return 0===e.indexOf("00:")?e.substr(3):e}},watch:{playing:function(t){if(t)return this.$refs.audio.play();this.$refs.audio.pause()},volume:function(t){this.$refs.audio.volume=this.volume/100}},methods:{download:function(){this.stop(),window.open(this.file,"download")},load:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$refs.audio){t.next=13;break}if(!(this.$refs.audio.readyState>=2)){t.next=12;break}this.loaded=!0;case 3:if(this.$refs.audio.duration!==1/0){t.next=9;break}return t.next=6,new Promise((function(t){return setTimeout(t,1e3)}));case 6:this.$refs.audio.currentTime=1e7*Math.random(),t.next=3;break;case 9:return this.durationSeconds=parseInt(this.$refs.audio.duration),this.$refs.audio.currentTime=0,t.abrupt("return",this.playing=this.autoPlay);case 12:console.error("Failed to load sound file.");case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mute:function(){if(this.muted)return this.volume=this.previousVolume;this.previousVolume=this.volume,this.volume=0},seek:function(t){if(this.loaded){var e=t.target.getBoundingClientRect(),a=(t.clientX-e.left)/e.width;this.$refs.audio.currentTime=parseInt(this.$refs.audio.duration*a)}},stop:function(){this.playing=!1,this.$refs.audio.currentTime=0},update:function(t){this.currentSeconds=parseInt(this.$refs.audio.currentTime)}},created:function(){this.looping=this.loop}},r=o,c=(a("f0fd"),a("2877")),l=Object(c["a"])(r,s,n,!1,null,"58ae25f8",null);e["a"]=l.exports},"92cf":function(t,e,a){"use strict";a("b9e7")},a308:function(t,e,a){},ac7f:function(t,e,a){"use strict";a("cc55")},b012:function(t,e){function a(t,e,a){var s,n,i,o,r;function c(){var l=Date.now()-o;l<e&&l>=0?s=setTimeout(c,e-l):(s=null,a||(r=t.apply(i,n),i=n=null))}null==e&&(e=100);var l=function(){i=this,n=arguments,o=Date.now();var l=a&&!s;return s||(s=setTimeout(c,e)),l&&(r=t.apply(i,n),i=n=null),r};return l.clear=function(){s&&(clearTimeout(s),s=null)},l.flush=function(){s&&(r=t.apply(i,n),i=n=null,clearTimeout(s),s=null)},l}a.debounce=a,t.exports=a},b9e7:function(t,e,a){},cc55:function(t,e,a){},da41:function(t,e,a){},df4b:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card card-shadow chat_box_wrapper"},[a("div",{staticClass:"card-header msg_head chat-head d-flex justify-content-between"},[a("div",{staticClass:"bd-highlight chat-header-left flex-fill d-flex justify-content-start "},[t.activeChat?a("div",{staticClass:"img_cont",on:{click:function(e){t.MyFlags.showContactProfile=!t.MyFlags.showContactProfile}}},[a("img",{staticClass:"rounded-circle user_img",attrs:{src:t.activeChat.profilePic||t.MyDict.profilePic}}),a("span",{staticClass:"online_icon",attrs:{hidden:""}})]):t._e(),t.activeChat?a("div",{staticClass:"user_info",on:{click:function(e){t.MyFlags.showContactProfile=!t.MyFlags.showContactProfile}}},[a("span",{staticClass:"user_name"},[t._v(t._s(t.activeChat.name))]),t.activeChat.msg&&t.activeChat.msg.lastInBoundMsg?a("div",{staticClass:"user_text text-xs"},[t._v(t._s(t._f("formatDate")(t.activeChat.msg.lastInBoundMsg.timestamp))+" ")]):t._e(),a("div",{staticClass:"user_text text-bold text-elisp"},[t._v(t._s(t.activeChat.subject))])]):t._e()]),a("div",{staticClass:"chat-header-right"},[a("div",{staticClass:"video_cam"},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Close",expression:"'Close'"}],staticStyle:{cursor:"pointer"},on:{click:t.closeBox}},[a("i",{staticClass:"fa fa-close"})])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showMediaOptions,expression:"!showMediaOptions"}],staticClass:"card-body msg_card_body"},[a("div",{staticClass:"msg_card_body-bubbles"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!1,loader:"dots",opacity:.3,"is-full-page":!1},on:{"update:active":function(e){t.isLoading=e}}}),t.activeChat?a("ChatMessages",{attrs:{activeChat:t.activeChat}}):a("div",{staticClass:"msg_card_body-logo"},[a("span",{})])],1)]),a("div",{staticClass:"card-footer"},[a("b-row",[a("b-col",{attrs:{cols:"6"}},[t.activeChat.local&&(t.activeChat.local.open||t.activeChat.local.active)?a("span",{staticClass:"btn btn-primary",on:{click:t.closeChat}},[t._v("\n                            Close Chat\n                            ")]):t._e()]),a("b-col",{attrs:{cols:"6"}},[t.activeChat.local&&t.activeChat.local.open?a("BaseVSelect",{staticClass:"text-sm w-100 float-left",attrs:{size:"sm","auto-position":"",options:"getx:/api/options/inbound_queue",optionKey:"code",optionLabel:"code"},on:{change:t.inboundQueueUpdate},model:{value:t.activeChat.assignedToQueue,callback:function(e){t.$set(t.activeChat,"assignedToQueue",e)},expression:"activeChat.assignedToQueue"}}):t._e()],1)],1)],1)])},n=[],i=(a("96cf"),a("3b8d")),o=a("d166"),r=a("9062"),c=a.n(r),l=a("3e84"),u=a("3902"),d=a("6172"),p={components:{Loading:c.a,SlideUpDown:l["a"],ChatMessages:u["a"]},props:{session:Object},computed:{},data:function(){return{message_text:"",quickReplies:null,selectedMedia:null,showMediaOptions:!1,showChatOptions:!1,lastMessageId:null,ilastMessageId:null,MyDict:o["b"],MyFlags:o["c"],MyConst:o["a"],isLoading:!1,showQuickActions:!1,activeChat:{messages:null}}},created:function(){console.log("created")},updated:function(){console.log("updated")},mounted:function(){this.loadMessages(),this.loadQuickLabels()},beforeUnmount:function(){},methods:{loadMessages:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("GetSessionChats..."),this.isLoading=!0,t.next=4,this.$store.dispatch("GetSessionChats",this.session);case 4:e=t.sent,console.log("resp",e),this.activeChat=d["a"].session(e),this.isLoading=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeBox:function(t){this.$emit("close")},closeChat:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$service.submit("/api/message/session/close",{sessionId:this.activeChat.sessionId});case 2:this.loadMessages(),this.$emit("update");case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),inboundQueueUpdate:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("this.activeChat.assignedToQueue",this.activeChat.assignedToQueue),t.next=3,this.$service.submit("/api/message/session/route",{sessionId:this.activeChat.sessionId,queue:this.activeChat.assignedToQueue||""});case 3:this.loadMessages(),this.$emit("update");case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadQuickLabels:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("LoadQuickLabels");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},m=p,f=(a("1ec90"),a("2877")),h=Object(f["a"])(m,s,n,!1,null,"0c8619c2",null);e["a"]=h.exports},e492:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-page-title"},[a("div",{staticClass:"page-title-wrapper"},[a("div",{staticClass:"page-title-heading"},[a("div",{staticClass:"page-title-icon"},[a("i",{class:t.icon})]),a("div",[t._v("\n                "+t._s(t.heading)+"\n                "),a("div",{staticClass:"page-title-subheading"},[t._t("subheading",(function(){return[t._v("\n                        "+t._s(t.subheading)+"\n                    ")]}))],2)])]),a("div",{staticClass:"page-title-actions"},[t._l(t.ifFilters,(function(e,s){return a("span",{key:"filter-"+s,staticClass:"filter-wrapper"},[t._t("filter("+e.name+")",(function(){return[e.hidden?t._e():a("span")]}),null,{filter:e})],2)})),t.dateranegeinput&&!t.dateranegeinput.hidden?a("span",{staticClass:"action-wrapper"},[a("date-range-picker",{attrs:{opens:"left","time-picker":!1,"control-container-class":"reportrange-text btn btn-success",ranges:t.dateranegeinput.ranges},on:{select:t.onDateRangeSelect,update:t.onDateRangeUpdate},scopedSlots:t._u([{key:"input",fn:function(e){return[a("i",{staticClass:"fa fa-calendar-alt"}),t._v(" "+t._s(t._f("date")(e.startDate))+" - "+t._s(t._f("date")(e.endDate))+"\n    ")]}}],null,!1,2163278788),model:{value:t.dateranegeinput.range,callback:function(e){t.$set(t.dateranegeinput,"range",e)},expression:"dateranegeinput.range"}})],1):t._e(),t._l(t.actions,(function(e,s){return a("span",{key:"action-"+s,staticClass:"action-wrapper"},[t._t("action("+e.name+")",(function(){return[e.hidden||!1===t.actionShow[e.name]?t._e():a("span",[e.link?a("router-link",{staticClass:"btn-shadow d-inline-flex align-items-center btn",class:{"btn-link":"link"==e.type,"btn-success":!e.type||"button"==e.type},attrs:{tag:"button",to:e.link,type:"button"}},[e.icon?a("i",{staticClass:"mr-2",class:e.icon}):t._e(),t._v("\n                            "+t._s(e.label)+" \n                        ")]):"lane"==e.type?a("div",{staticClass:"d-inline-flex align-items-center",staticStyle:{"min-width":"220px"}},[a("v-select",{staticClass:"w-100",attrs:{options:t.input.lane.options,searchable:!1,clearable:!1,placeholder:"Select Account"},on:{input:function(a){return t.clickAction(e)}},scopedSlots:t._u([{key:"selected-option",fn:function(e){return[a("div",{},[a("span",{staticClass:"contact_type contact_type-24 fab",class:t.MyDict.social[e.contactType]}),t._v("  "+t._s(e.lane))])]}},{key:"open-indicator",fn:function(e){var s=e.attributes;return[a("span",t._b({staticClass:"fa fa-caret-down"},"span",s,!1))]}},{key:"option",fn:function(e){var s=e.contactType,n=e.lane;return[a("span",{staticClass:"contact_type contact_type-24 fab",class:t.MyDict.social[s]}),t._v("  "+t._s(n)+"\n                                ")]}}],null,!0),model:{value:t.input.lane.value,callback:function(e){t.$set(t.input.lane,"value",e)},expression:"input.lane.value"}})],1):"search"==e.type?a("div",{staticClass:"d-inline-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.search.value,expression:"input.search.value"}],staticClass:"form-control",attrs:{type:"text",name:""},domProps:{value:t.input.search.value},on:{input:function(e){e.target.composing||t.$set(t.input.search,"value",e.target.value)}}})]):"apply"==e.type?a("div",{staticClass:"d-inline-flex"},[a("button",{staticClass:"btn-shadow  align-items-center btn btn-success",on:{click:function(a){return t.clickAction(e)}}},[e.icon?a("i",{class:e.icon}):t._e(),t._v(t._s(e.label))])]):a("div",{staticClass:"d-inline-flex"},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.modal,expression:"action.modal"}],staticClass:"btn-shadow  align-items-center btn",class:{"btn-link":"link"==e.type,"btn-success":!e.type||"button"==e.type},on:{click:function(a){return t.clickAction(e)}}},[e.icon?a("i",{staticClass:"mr-2",class:e.icon}):t._e(),t._v("\n                                "+t._s(e.label)+"\n                            ")])],1)],1)]}),null,{action:e})],2)}))],2)]),a("div",{staticStyle:{clear:"both",height:"0px"}})])},n=[],i=(a("7f7f"),a("96cf"),a("3b8d")),o=a("bbf5"),r=a.n(o),c=(a("53b4"),a("2ead"),a("c1df")),l=a.n(c),u=a("4a7a"),d=a.n(u),p=(a("6dfc"),a("d166"));function m(t){return t.hour(0).minute(0).seconds(0).milliseconds(0)}function f(t){return t.hour(23).minute(59).seconds(59).milliseconds(999)}var h={components:{DateRangePicker:r.a,vSelect:d.a},data:function(){var t=this;return{MyFlags:p["c"],MyDict:p["b"],MyConst:p["a"],dateranegeinput:function(){if(!t.daterange)return null;var e=t.daterange.startDate||m(l()().subtract(7,"day")).toDate(),a=t.daterange.endDate||f(l()()).toDate();return{range:{startDate:e,endDate:a},ranges:{Today:[m(l()()).toDate(),f(l()()).toDate()],"Last 7 Days":[m(l()().subtract(7,"day")).toDate(),f(l()()).toDate()],Yesterday:[m(l()().subtract(1,"day")).toDate(),f(l()().subtract(1,"day")).toDate()],"This month":[m(l()().date(1)).toDate(),f(l()()).toDate()],"Last month":[m(l()().subtract(1,"month").date(1)).toDate(),f(l()().date(0)).toDate()],"This year":[m(l()().month(0).date(1)).toDate(),f(l()()).toDate()],"Last year":[m(l()().subtract(1,"year").month(0).date(1)).toDate(),f(l()().month(0).date(0)).toDate()]}}}(),input:{lane:{options:[],value:null,sender:""},search:{value:null},contacts:""}}},computed:{ifFilters:function(){return this.filters||[]}},filters:{date:function(t){return t?t.toLocaleString():""}},created:function(t){this.daterange&&(this.daterange.startDate||(this.daterange.startDate=m(l()()).toDate()),this.daterange.endDate||(this.daterange.endDate=f(l()()).toDate()),this.sanitizeDateRange(this.daterange)),this.loadLanes()},methods:{sanitizeDateRange:function(t){var e=l()(t.startDate),a=l()(t.endDate);return t.startDate=m(e).toDate(),t.endDate=f(a).toDate(),t},loadLanes:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$service.getX("/api/options/channels");case 2:t.sent,this.input.lane.options=this.$store.getters.StateApi.OptionsChannels;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onDateRangeSelect:function(t){console.log("select",t);var e=this.sanitizeDateRange(t);this.dateranegeinput.range.startDate=e.startDate,this.dateranegeinput.range.endDate=e.endDate},onDateRangeUpdate:function(t){console.log("c_update",t),this.daterange&&(this.daterange.startDate=t.startDate,this.daterange.endDate=t.endDate,this.$emit("dateRangeOnUpdate",t))},clickAction:function(t){this.$emit("action",t)},action:function(t,e,a){for(var s in this.actions)if(this.actions[s].name==t){this.actions[s][e]=a;break}},getInput:function(t){var e;return null===(e=this.input[t])||void 0===e?void 0:e.value}},props:{icon:String,heading:String,subheading:String,actions:Array,filters:Array,daterange:{type:Object,default:function(){return null}},actionShow:{type:Object,default:function(){return{message:"hello"}}}}},g=h,v=(a("02fc"),a("fb11"),a("2877")),_=Object(v["a"])(g,s,n,!1,null,null,null);e["a"]=_.exports},e836:function(t,e,a){"use strict";a("3daa")},f0fd:function(t,e,a){"use strict";a("0fdc")},fb11:function(t,e,a){"use strict";a("da41")}}]);