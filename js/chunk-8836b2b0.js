(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8836b2b0"],{2051:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("validation-provider",e._b({attrs:{rules:e.rules,name:e.name},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,s=t.valid,l=t.invalid,i=t.validated;return[a("b-form-group",{staticClass:"form-group-input",class:[{"is-question":e.question}],attrs:{"label-for":"'fmg-' + inputId"}},[e._t("label",(function(){return[e.label||e.name?a("label",{class:[{focused:e.focused},{"is-valid":s&&i},{"is-invalid":l&&i},{"has-value":""!=e.value},e.labelClasses],attrs:{for:"fmg-"+e.inputId}},[e._v("\n        "+e._s(e.label||e.name)+"\n      ")]):e._e()]})),a("div",{class:[{"input-group":e.hasIcon||e.feedback},{focused:e.focused},{"input-group-alternative":e.alternative},{"has-label":e.label||e.name||e.$slots.label},e.inputGroupClasses]},[e.prependIcon||e.$slots.prepend?a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[e._t("prepend",(function(){return[a("i",{class:e.prependIcon})]}))],2)]):e._e(),a("textarea",e._g(e._b({staticClass:"form-control",class:[{"is-valid":s&&i&&e.successMessage},{"is-invalid":l&&i},e.inputClasses],attrs:{id:"fmg-"+e.inputId,type:e.type,valid:s,placeholder:e.$attrs.placeholder,required:e.required},domProps:{value:e.value}},"textarea",e.$attrs,!1),e.listeners)),e.feedback?a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[a("i",{staticClass:"fa",class:[{"fa-exclamation-circle text-danger":n[0]},{"fa-check-circle text-success":s&&i}]})])]):e._e(),e.appendIcon||e.$slots.append||e.textLimit>0?a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[e._t("append",(function(){return[e.textLimit>0?a("span",{},[e._v("\n                  "+e._s(e.value?e.value.length:0)+"/"+e._s(e.textLimit)+"\n                ")]):a("i",{class:e.appendIcon})]}))],2)]):e._e(),e._t("infoBlock")],2),e._t("help",(function(){return[e.showHelpMessage?a("div",{staticClass:"help-feedback"},[e._v("\n          "+e._s(e.helpMessage||e.$attrs.placeholder)+"\n        ")]):e._e()]})),e.strengthBar?a("password-meter",{directives:[{name:"show",rawName:"v-show",value:e.strengthBar,expression:"strengthBar"}],attrs:{password:e.value},on:{score:e.listeners.score}}):e._e(),e._t("success",(function(){return[s&&i&&e.successMessage?a("div",{staticClass:"valid-feedback"},[e._v("\n        "+e._s(e.successMessage)+"\n      ")]):e._e()]})),e._t("error",(function(){return[n[0]?a("div",{staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n        "+e._s(n[0])+"\n      ")]):e._e()]}))],2)]}}],null,!0)},"validation-provider",e.$attrs,!1))},s=[],l=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),i=(a("c5f6"),a("0127")),r=a.n(i);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u=0,p={components:{passwordMeter:r.a},inheritAttrs:!1,name:"base-text-area",props:{required:{type:Boolean,description:"Whether input is required (adds an asterix *)"},question:{type:Boolean,default:!1,description:"Whether to amnimate placeholder to lable"},feedback:{type:Boolean,default:!1,description:"Whether to show feedback icon"},strengthBar:{type:Boolean,default:!1,description:"Whether to show Password Strength Bar"},textLimit:{type:Number,default:0},group:{type:Boolean,description:"Whether input is an input group (manual override in special cases)"},alternative:{type:Boolean,description:"Whether input is of alternative layout"},label:{type:String,description:"Input label (text before input)"},error:{type:String,description:"Input error (below input)"},successMessage:{type:String,description:"Input success message",default:""},helpMessage:{type:String,description:"Input help message",default:""},labelClasses:{type:String,description:"Input label css classes",default:"form-control-label"},inputClasses:{type:String,description:"Input css classes"},inputGroupClasses:{type:String,description:"Input group css classes"},value:{type:[String,Number],description:"Input value"},type:{type:String,description:"Input type",default:"text"},appendIcon:{type:String,description:"Append icon (right)"},prependIcon:{type:String,description:"Prepend icon (left)"},rules:{type:[String,Array,Object],description:"Vee validate validation rules",default:""},name:{type:String,description:"Input name (used for validation)",default:""}},data:function(){return{focused:!1,inputId:++u}},computed:{listeners:function(){return c(c({},this.$listeners),{},{input:this.updateValue,focus:this.onFocus,blur:this.onBlur,score:this.onScore})},slotData:function(){return c({focused:this.focused,error:this.error},this.listeners)},hasIcon:function(){var e=this.$slots,t=e.append,a=e.prepend;return void 0!==t||void 0!==a||void 0!==this.appendIcon||void 0!==this.prependIcon||this.textLimit>0||this.group},showHelpMessage:function(){if(this.helpMessage)return!0}},methods:{updateValue:function(e){var t=e.target.value;this.$emit("input",t)},onFocus:function(e){this.focused=!0,this.$emit("focus",e)},onBlur:function(e){this.focused=!1,this.$emit("blur",e)},onScore:function(e){this.$emit("score",e)}}},d=p,m=a("2877"),f=Object(m["a"])(d,n,s,!1,null,null,null);t["a"]=f.exports},"243c":function(e,t,a){},"2eb3":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"dropdown"==e.type?a("v-select",e._b({staticStyle:{"min-width":"220px"},attrs:{options:e.model.options,filterable:e.filterable,searchable:e.searchable,placeholder:e.placeholder,clearable:e.clearable},on:{search:e.onSearch,input:e.onChange},scopedSlots:e._u([{key:"selected-option",fn:function(t){return[e.selectedPrefixClass?a("span",{class:[e.selectedPrefixClass,"mr-1"]},[e._v(" ")]):e._e(),t.prefixClass?a("span",{class:[t.prefixClass,"mr-1"]},[e._v(" ")]):e._e(),e._v(e._s(t.label)+"\n    ")]}},{key:"option",fn:function(t){return[t.prefixClass?a("span",{class:[t.prefixClass,"mr-1"]},[e._v(" ")]):e._e(),e._v(e._s(t.label)+"\n    ")]}},{key:"open-indicator",fn:function(t){var n=t.attributes;return[a("span",e._b({staticClass:"fa fa-caret-down"},"span",n,!1))]}},e._l(Object.keys(e.$scopedSlots),(function(t){return{key:t,fn:function(a){return[e._t(t,null,null,a)]}}}))],null,!0),model:{value:e.model.value,callback:function(t){e.$set(e.model,"value",t)},expression:"model.value"}},"v-select",e.$attrs,!1)):a("span",[e.model.value?e._t("selected-option",(function(){return[e.selectedPrefixClass?a("span",{class:e.selectedPrefixClass},[e._v(" ")]):e._e(),e._v(e._s(e.model.value.label)+"\n    ")]}),null,{option:e.model.value}):e._e()],2)},s=[],l=(a("a481"),a("96cf"),a("3b8d")),i=(a("6b54"),a("75fc")),r=(a("7f7f"),a("4a7a")),o=a.n(r),c=(a("6dfc"),{components:{vSelect:o.a},props:{options:{default:"/options",description:"examples;- getx:RelativeGetXUrl,dispatch:DispatchableEventName,data:PathNameIn@data"},searchable:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},emptyDisplay:{type:String,default:null},placeholder:{type:String,default:""},optionKey:{type:String,default:"key"},optionLabel:{type:String,default:"label"},value:{default:null},selectDefault:{},selectedPrefixClass:{},filter:{},type:{type:String,default:"dropdown"}},data:function(){return{model:{options:[],value:null,sender:""}}},computed:{myOptions:function(){}},watch:{value:function(e,t){this.valueOnChange(e,t)},options:function(e,t){this.loadOptions()}},mounted:function(){this.loadOptions()},methods:{valueOnChange:function(e,t){this.selectModelValue()},selectModelValue:function(){for(var e in this.model.value=null,this.model.options)this.model.options[e].value==this.value&&(this.model.value=this.model.options[e]);!this.selectDefault||void 0!==this.model.value&&null!==this.model.value||1==this.selectDefault&&this.model.options[0]&&(this.model.value=this.model.options[0],this.onChange()),this.$emit("option",this.model.value)},fromOptions:function(e){var t=this,a=!1;if(this.model.options=e.map((function(e){if("string"==typeof e||"number"==typeof e)return{value:e,label:e,item:e};if(null===e||void 0===e)return a=!0,{value:e,label:t.emptyDisplay||t.placeholder,item:e};var n=e[t.optionKey]||e.id||e.key||e.code||e.value||e.label||e.name,s=e[t.optionLabel]||e.name||e.label||e.value||e.code||e.key||e.id;return{value:n,label:s||(null===n||void 0===n?t.emptyDisplay||t.placeholder:""),item:e,prefixClass:e.prefixClass||e.icon}})),!a&&t.emptyDisplay&&(this.model.options=[{value:null,label:this.emptyDisplay,item:null}].concat(Object(i["a"])(this.model.options))),this.filter){var n=[];"[object Array]"===Object.prototype.toString.call(this.filter)?n=Object(i["a"])(this.filter):"[object Object]"===Object.prototype.toString.call(this.filter)&&(n=[this.filter]),this.model.options=this.model.options.filter((function(e){return n.some((function(t){for(var a in t)if(!0===t[a]){if(!e.item[a])return!1}else if(t[a]!==e.item[a])return!1;return!0}))}))}this.selectModelValue()},loadOptions:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,n,s,l,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.options||"string"!=typeof this.options||0!=this.options.indexOf("data:")){e.next=7;break}return e.next=3,a("ab35")("./"+this.options.replace("data:","")+".json");case 3:t=e.sent,this.fromOptions(t.options),e.next=24;break;case 7:if(!this.options||"string"!=typeof this.options||0!=this.options.indexOf("getx:")){e.next=15;break}return n=this.options.replace("getx:",""),e.next=11,this.$service.getX(n);case 11:s=e.sent,this.fromOptions(s.results?s.results:s),e.next=24;break;case 15:if(!this.options||"string"!=typeof this.options||0!=this.options.indexOf("dispatch:")){e.next=23;break}return l=this.options.replace("dispatch:",""),e.next=19,this.$store.dispatch(l);case 19:i=e.sent,this.fromOptions(i.results?i.results:i),e.next=24;break;case 23:this.options&&this.fromOptions(this.options);case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onChange:function(){var e=this.model.value?this.model.value.value:null;this.$emit("input",e),this.$emit("change",e)},onSearch:function(e,t){this.$emit("search",e,t)},option:function(){return this.model.value}}}),u=c,p=(a("6cd3"),a("2877")),d=Object(p["a"])(u,n,s,!1,null,null,null);t["a"]=d.exports},"594a":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("MyVSelect",e._b({ref:"myVSelect",staticClass:"w-100 text-black",staticStyle:{"min-width":"220px"},attrs:{options:e.options,value:e.value,searchable:!1,clearable:!0,placeholder:"Select Template"},on:{input:e.clickAction},scopedSlots:e._u([{key:"selected-option",fn:function(t){return[e.$attrs.selectedPrefixClass?a("span",{class:e.$attrs.selectedPrefixClass},[e._v(" ")]):e._e(),e._v("\n        "+e._s(t.item.desc)+" ("+e._s(t.item.lang)+")\n    ")]}},{key:"option",fn:function(t){return[e._v("\n        "+e._s(t.item.desc)+" ("+e._s(t.item.lang)+") \n    ")]}}]),model:{value:e.model.value,callback:function(t){e.$set(e.model,"value",t)},expression:"model.value"}},"MyVSelect",e.$attrs,!1))},s=[],l=a("2eb3"),i={components:{MyVSelect:l["a"]},props:{options:{default:"getx:/api/tmpl/pushtemplate"},value:{default:null}},data:function(){return{model:{options:[],value:null,sender:""}}},mounted:function(){this.model.value=this.value},watch:{value:function(){this.model.value=this.value}},methods:{clickAction:function(){var e=this.model.value;this.$emit("input",e),this.$emit("change",e)},option:function(){return this.$refs.myVSelect.option()}}},r=i,o=a("2877"),c=Object(o["a"])(r,n,s,!1,null,null,null);t["a"]=c.exports},"6ad2":function(e,t,a){"use strict";a("243c")},"6cd3":function(e,t,a){"use strict";a("dbda")},"75fc":function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a("a745"),s=a.n(n),l=a("db2a");function i(e){if(s()(e))return Object(l["a"])(e)}var r=a("67bb"),o=a.n(r),c=a("5d58"),u=a.n(c),p=a("774e"),d=a.n(p);function m(e){if("undefined"!==typeof o.a&&null!=e[u.a]||null!=e["@@iterator"])return d()(e)}var f=a("e630");function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e){return i(e)||m(e)||Object(f["a"])(e)||h()}},"7f14":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("MyVSelect",e._b({ref:"myVSelect",staticClass:"w-100",staticStyle:{"min-width":"220px"},attrs:{options:e.options,searchable:!1,clearable:!1,placeholder:"Select Account",selectDefault:!0},on:{input:e.clickAction},scopedSlots:e._u([{key:"selected-option",fn:function(t){return[a("div",{},[a("span",{staticClass:"contact_type contact_type-24 fab",class:e.$global.MyDict.social[t.item.contactType]}),e._v("  "+e._s(t.item.lane)+"\n        ")])]}},{key:"option",fn:function(t){var n=t.item;return[a("span",{staticClass:"contact_type contact_type-24 fab",class:e.$global.MyDict.social[n.contactType]}),e._v("\n        "+e._s(n.lane)+"\n    ")]}}]),model:{value:e.model.value,callback:function(t){e.$set(e.model,"value",t)},expression:"model.value"}},"MyVSelect",e.$attrs,!1))},s=[],l=a("2eb3"),i={components:{MyVSelect:l["a"]},props:{options:{default:"getx:/api/options/channels"},value:{default:null}},data:function(){return{model:{value:null,sender:"",option:null}}},computed:{},mounted:function(){this.model.value=this.value},methods:{clickAction:function(){var e=this.model.value;this.$emit("input",e),this.$emit("change",e)},option:function(){return this.$refs.myVSelect.option()}}},r=i,o=a("2877"),c=Object(o["a"])(r,n,s,!1,null,null,null);t["a"]=c.exports},"88b4":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.templateId?a("MyVSelect",e._b({ref:"channelSelect",staticClass:"w-100 text-black",staticStyle:{"min-width":"220px"},attrs:{hidden:"",options:e.src,searchable:!1,clearable:!0,placeholder:"Select Template"},on:{option:e.optionReady,input:e.clickAction},model:{value:e.templateId,callback:function(t){e.templateId=t},expression:"templateId"}},"MyVSelect",e.$attrs,!1)):e._e(),e.templateConfig?a("div",{staticClass:"message-preview w-100",class:e.format},["WHATSAPP"==e.format?a("span",[a("div",{staticClass:"message-text"},[e.templateConfig.attachments&&e.templateConfig.attachments[0]?a("div",{class:["message-attachment-inline","attachment-"+e.templateConfig.attachments[0].mediaType]}):e._e(),e.templateConfig.title?a("div",{staticClass:"message-title"},[e._v(e._s(e.templateConfig.title))]):e._e(),a("div",{staticClass:"message-body"},[e._v(e._s(e.content.text))]),a("div",{staticClass:"message-footer"},[e._v(e._s(e.templateConfig.footer))])]),e.content.options?a("div",{staticClass:"message-buttons"},e._l(e.content.options.buttons,(function(t,n){return a("div",{key:n,staticClass:"message-button"},["URL"==t.type?a("i",{staticClass:"fa fa-external-link-alt"},[e._v(" ")]):e._e(),e._v(e._s(t.label)+"\n            ")])})),0):e._e()]):a("span",[a("div",{staticClass:"message-text"},[e.templateConfig.title?a("div",{staticClass:"message-title"},[e._v(e._s(e.templateConfig.title))]):e._e(),a("div",[e._v(e._s(e.content.text))])]),e.content.options?a("div",{staticClass:"message-buttons"},e._l(e.content.options.buttons,(function(t,n){return a("div",{key:n,staticClass:"message-button"},["URL"==t.type?a("i",{staticClass:"fa fa-external-link-alt"}):e._e(),e._v(e._s(t.label)+"\n            ")])})),0):e._e()])]):e._e()],1)},s=[],l=(a("28a5"),a("3ef3")),i=a("9dbb"),r=a.n(i),o=a("2eb3"),c={contact:{name:"John Doe",phone:"919876543210",email:"John.Doe@company.com"}},u={name:"MessagePreview",components:{MyVSelect:o["a"]},data:function(){return{templateConfig:null}},computed:{content:function(){if(!this.templateConfig)return{text:"",options:{}};var e=this.templateConfig.template;try{var t;e=r.a.render(this.templateConfig.template,Object.assign(c,{data:this.templateConfig.data,contact:(null===this||void 0===this||null===(t=this.model)||void 0===t?void 0:t.contact)||c.contact}))}catch(n){}var a=(e||"").split("---options---");return{text:a[0],options:Object.assign({},l["a"].message_form_options(l["a"].map_from_string(a[1])),this.templateConfig.options)}},options:function(){}},mounted:function(){this.templateConfig=this.template},methods:{clickAction:function(){},optionReady:function(e){console.log("Option",e),e&&(this.templateConfig=e.item)}},props:{icon:String,heading:String,subheading:String,actions:Array,template:{type:Object},templateId:{type:String},src:{type:String,default:"getx:/api/options/tmpl/hsm"},format:{type:String,default:"WHATSAPP"},model:{}},watch:{template:function(){this.templateConfig=this.template}}},p=u,d=(a("6ad2"),a("2877")),m=Object(d["a"])(p,n,s,!1,null,null,null);t["a"]=m.exports},"9dbb":function(e,t,a){(function(t,a){e.exports=a()})(0,(function(){"use strict";
/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function a(e){return"function"===typeof e}function n(e){return t(e)?"array":typeof e}function s(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function l(e,t){return null!=e&&"object"===typeof e&&t in e}function i(e,t){return null!=e&&"object"!==typeof e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var r=RegExp.prototype.test;function o(e,t){return r.call(e,t)}var c=/\S/;function u(e){return!o(c,e)}var p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function d(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return p[e]}))}var m=/\s*/,f=/\s+/,h=/\s*=/,b=/\s*\}/,v=/#|\^|\/|>|\{|&|=|!/;function g(e,a){if(!e)return[];var n,l,i,r=!1,o=[],c=[],p=[],d=!1,g=!1,w="",S=0;function k(){if(d&&!g)while(p.length)delete c[p.pop()];else p=[];d=!1,g=!1}function O(e){if("string"===typeof e&&(e=e.split(f,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);n=new RegExp(s(e[0])+"\\s*"),l=new RegExp("\\s*"+s(e[1])),i=new RegExp("\\s*"+s("}"+e[1]))}O(a||C.tags);var I,T,E,$,M,R,P=new _(e);while(!P.eos()){if(I=P.pos,E=P.scanUntil(n),E)for(var A=0,L=E.length;A<L;++A)$=E.charAt(A),u($)?(p.push(c.length),w+=$):(g=!0,r=!0,w+=" "),c.push(["text",$,I,I+1]),I+=1,"\n"===$&&(k(),w="",S=0,r=!1);if(!P.scan(n))break;if(d=!0,T=P.scan(v)||"name",P.scan(m),"="===T?(E=P.scanUntil(h),P.scan(h),P.scanUntil(l)):"{"===T?(E=P.scanUntil(i),P.scan(b),P.scanUntil(l),T="&"):E=P.scanUntil(l),!P.scan(l))throw new Error("Unclosed tag at "+P.pos);if(M=">"==T?[T,E,I,P.pos,w,S,r]:[T,E,I,P.pos],S++,c.push(M),"#"===T||"^"===T)o.push(M);else if("/"===T){if(R=o.pop(),!R)throw new Error('Unopened section "'+E+'" at '+I);if(R[1]!==E)throw new Error('Unclosed section "'+R[1]+'" at '+I)}else"name"===T||"{"===T||"&"===T?g=!0:"="===T&&O(E)}if(k(),R=o.pop(),R)throw new Error('Unclosed section "'+R[1]+'" at '+P.pos);return x(y(c))}function y(e){for(var t,a,n=[],s=0,l=e.length;s<l;++s)t=e[s],t&&("text"===t[0]&&a&&"text"===a[0]?(a[1]+=t[1],a[3]=t[3]):(n.push(t),a=t));return n}function x(e){for(var t,a,n=[],s=n,l=[],i=0,r=e.length;i<r;++i)switch(t=e[i],t[0]){case"#":case"^":s.push(t),l.push(t),s=t[4]=[];break;case"/":a=l.pop(),a[5]=t[2],s=l.length>0?l[l.length-1][4]:n;break;default:s.push(t)}return n}function _(e){this.string=e,this.tail=e,this.pos=0}function w(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function S(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}_.prototype.eos=function(){return""===this.tail},_.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var a=t[0];return this.tail=this.tail.substring(a.length),this.pos+=a.length,a},_.prototype.scanUntil=function(e){var t,a=this.tail.search(e);switch(a){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,a),this.tail=this.tail.substring(a)}return this.pos+=t.length,t},w.prototype.push=function(e){return new w(e,this)},w.prototype.lookup=function(e){var t,n=this.cache;if(n.hasOwnProperty(e))t=n[e];else{var s,r,o,c=this,u=!1;while(c){if(e.indexOf(".")>0){s=c.view,r=e.split("."),o=0;while(null!=s&&o<r.length)o===r.length-1&&(u=l(s,r[o])||i(s,r[o])),s=s[r[o++]]}else s=c.view[e],u=l(c.view,e);if(u){t=s;break}c=c.parent}n[e]=t}return a(t)&&(t=t.call(this.view)),t},S.prototype.clearCache=function(){"undefined"!==typeof this.templateCache&&this.templateCache.clear()},S.prototype.parse=function(e,t){var a=this.templateCache,n=e+":"+(t||C.tags).join(":"),s="undefined"!==typeof a,l=s?a.get(n):void 0;return void 0==l&&(l=g(e,t),s&&a.set(n,l)),l},S.prototype.render=function(e,t,a,n){var s=this.getConfigTags(n),l=this.parse(e,s),i=t instanceof w?t:new w(t,void 0);return this.renderTokens(l,i,a,e,n)},S.prototype.renderTokens=function(e,t,a,n,s){for(var l,i,r,o="",c=0,u=e.length;c<u;++c)r=void 0,l=e[c],i=l[0],"#"===i?r=this.renderSection(l,t,a,n,s):"^"===i?r=this.renderInverted(l,t,a,n,s):">"===i?r=this.renderPartial(l,t,a,s):"&"===i?r=this.unescapedValue(l,t):"name"===i?r=this.escapedValue(l,t,s):"text"===i&&(r=this.rawValue(l)),void 0!==r&&(o+=r);return o},S.prototype.renderSection=function(e,n,s,l,i){var r=this,o="",c=n.lookup(e[1]);function u(e){return r.render(e,n,s,i)}if(c){if(t(c))for(var p=0,d=c.length;p<d;++p)o+=this.renderTokens(e[4],n.push(c[p]),s,l,i);else if("object"===typeof c||"string"===typeof c||"number"===typeof c)o+=this.renderTokens(e[4],n.push(c),s,l,i);else if(a(c)){if("string"!==typeof l)throw new Error("Cannot use higher-order sections without the original template");c=c.call(n.view,l.slice(e[3],e[5]),u),null!=c&&(o+=c)}else o+=this.renderTokens(e[4],n,s,l,i);return o}},S.prototype.renderInverted=function(e,a,n,s,l){var i=a.lookup(e[1]);if(!i||t(i)&&0===i.length)return this.renderTokens(e[4],a,n,s,l)},S.prototype.indentPartial=function(e,t,a){for(var n=t.replace(/[^ \t]/g,""),s=e.split("\n"),l=0;l<s.length;l++)s[l].length&&(l>0||!a)&&(s[l]=n+s[l]);return s.join("\n")},S.prototype.renderPartial=function(e,t,n,s){if(n){var l=this.getConfigTags(s),i=a(n)?n(e[1]):n[e[1]];if(null!=i){var r=e[6],o=e[5],c=e[4],u=i;0==o&&c&&(u=this.indentPartial(i,c,r));var p=this.parse(u,l);return this.renderTokens(p,t,n,u,s)}}},S.prototype.unescapedValue=function(e,t){var a=t.lookup(e[1]);if(null!=a)return a},S.prototype.escapedValue=function(e,t,a){var n=this.getConfigEscape(a)||C.escape,s=t.lookup(e[1]);if(null!=s)return"number"===typeof s&&n===C.escape?String(s):n(s)},S.prototype.rawValue=function(e){return e[1]},S.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"===typeof e?e.tags:void 0},S.prototype.getConfigEscape=function(e){return e&&"object"===typeof e&&!t(e)?e.escape:void 0};var C={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){k.templateCache=e},get templateCache(){return k.templateCache}},k=new S;return C.clearCache=function(){return k.clearCache()},C.parse=function(e,t){return k.parse(e,t)},C.render=function(e,t,a,s){if("string"!==typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return k.render(e,t,a,s)},C.escape=d,C.Scanner=_,C.Context=w,C.Writer=S,C}))},b012:function(e,t){function a(e,t,a){var n,s,l,i,r;function o(){var c=Date.now()-i;c<t&&c>=0?n=setTimeout(o,t-c):(n=null,a||(r=e.apply(l,s),l=s=null))}null==t&&(t=100);var c=function(){l=this,s=arguments,i=Date.now();var c=a&&!n;return n||(n=setTimeout(o,t)),c&&(r=e.apply(l,s),l=s=null),r};return c.clear=function(){n&&(clearTimeout(n),n=null)},c.flush=function(){n&&(r=e.apply(l,s),l=s=null,clearTimeout(n),n=null)},c}a.debounce=a,e.exports=a},cd69:function(e,t,a){"use strict";a("dad0")},dad0:function(e,t,a){},dbda:function(e,t,a){},ef9f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-tmpl-hsm-waba"},[a("master-view",{directives:[{name:"show",rawName:"v-show",value:!e.template.code,expression:"!template.code"}],ref:"templatesView",attrs:{goodTables:"",header:{heading:"WhatsApp Templates",subheading:"All the templates registered with WhatsApp",icon:"icon-gradient bg-happy-itmeo fa fa-whatsapp"},table:e.table,filters:e.filters,actions:[{label:"Create Message Template",icon:"plus",name:"ADD_ITEM",modal:e.modelName}],autoApply:!1},on:{action:e.onAction,rows:e.onRows},scopedSlots:e._u([{key:"filter(channelId)",fn:function(t){var n=t.apply,s=t.filter;return[a("MyChannelSelect",{attrs:{filter:{channelType:"wa360"}},on:{change:n},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"filter.value"}})]}},{key:"filter(sync)",fn:function(e){var t=e.apply,n=e.filter;return[a("b-button",{staticClass:"fa fa-sync",attrs:{variant:"success"},on:{click:function(e){n.value=!0,t()}}})]}},{key:"cell(template_status)",fn:function(t){var n=t.item;return[a("my-status",{model:{value:n.template.status,callback:function(t){e.$set(n.template,"status",t)},expression:"item.template.status"}},[e._v(" "+e._s(n.template.status))])]}},{key:"cell(row_actions)",fn:function(t){var n=t.item;return[a("MyHSMTmplSelect",{staticClass:"text-sm",on:{change:function(t){return e.onChange(n,"hsmTemplateId")}},model:{value:n.hsmTemplateId,callback:function(t){e.$set(n,"hsmTemplateId",t)},expression:"item.hsmTemplateId"}})]}},{key:"cell(template_code)",fn:function(t){var n=t.item;return[a("b-button",{attrs:{variant:"link",to:{name:"wabatemplate",params:{channelId:n.channelId,code:n.code,lang:n.lang}}},on:{click:function(t){return e.selectTemplate(n)}}},[e._v("\n                "+e._s(n.code)+"\n            ")])]}}])}),e.template.code?a("master-view",{attrs:{header:{heading:e.template.code,subheading:e.template.category,icon:"icon-gradient bg-happy-itmeo fa fa-whatsapp"},actions:[{name:"cancel"}]},scopedSlots:e._u([{key:"action(cancel)",fn:function(t){var n=t.action;return[a("b-button",{attrs:{variant:"success",to:{name:"wabatemplates"}},on:{click:function(t){return e.selectTemplate({})}}},[e._v(e._s(n.name))])]}},{key:"body",fn:function(){return[a("b-row",[a("b-col",{attrs:{cols:"2"}},[a("b-list-group",[a("b-list-group-item",[a("span",{staticClass:"font-weight-bold text-md"},[e._v("Languages")])]),e._l(e.templates,(function(t){return a("b-list-group-item",{key:t.lang,class:{"bg-teal-100":t.lang==e.template.lang},attrs:{pointer:""},on:{click:function(a){return e.selectTemplate(t)}}},[a("my-status",{model:{value:t.template.status,callback:function(a){e.$set(t.template,"status",a)},expression:"temp.template.status"}}),e._v("\n                             \n                            "),a("my-text",{attrs:{options:"data:languages",value:t.lang,optionKey:"waba"}})],1)})),a("b-list-group-item",[a("my-v-select",{staticStyle:{"min-width":"50px",width:"100%"},attrs:{options:"data:languages",placeholder:"Add language",optionKey:"waba",filterable:"",searchable:"",filter:{waba:!0}},model:{value:e.newLanguage,callback:function(t){e.newLanguage=t},expression:"newLanguage"}})],1)],2)],1),a("b-col",{attrs:{cols:"7"}},[a("validation-observer",{ref:"templateStructure",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit;return[a("b-form",{attrs:{role:"form"},on:{submit:function(t){return t.preventDefault(),n(e.onSaveTamplete)}}},[a("b-card",{attrs:{"no-body":""},scopedSlots:e._u([{key:"header",fn:function(){return[a("span",{staticClass:"font-weight-bold text-md"},[a("my-text",{attrs:{options:"data:languages",value:e.template.lang,optionKey:"waba"}}),e._v(" Message content\n                            ")],1),e._v("  \n                            "),e.template.template.status?e._e():a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete Unsaved template",expression:"'Delete Unsaved template'"}],staticClass:"text-danger text-left",attrs:{pointer:""},on:{click:function(t){return e.onDelete(e.template)}}},[a("i",{staticClass:"fa fa-trash"})]),a("my-status",{staticClass:"float-right",model:{value:e.template.template.status,callback:function(t){e.$set(e.template.template,"status",t)},expression:"template.template.status"}},[e._v(" "+e._s(e.template.template.status||"unsaved"))])]},proxy:!0}],null,!0)},[a("b-card-body",{staticClass:"border-bottom"},[a("b-card-title",[a("h5",{staticClass:"font-weight-bold text-lg"},[e._v("Header "),a("b-badge",{staticClass:"text-xs bg-greyish text-dark",attrs:{variant:"dark"}},[e._v("optional")])],1)]),a("b-card-sub-title",{staticClass:"mb-2 text-sm"},[e._v("\n                                Add a title or choose which type of media you'll use for this header.")]),a("b-card-text",[a("my-v-select",{staticClass:"mb-1",attrs:{emptyDisplay:"None",selectDefault:!0,clearable:!1,disabled:e.nonEditable,options:"data:waba/message_types"},model:{value:e.templateSimple.header.format,callback:function(t){e.$set(e.templateSimple.header,"format",t)},expression:"templateSimple.header.format"}}),"TEXT"==e.templateSimple.header.format?a("base-input",{attrs:{prelabel:"",name:"Header Text",disabled:e.nonEditable,textLimit:60,required:"",rules:"required|max:60|HBNumVar:*,0,1",helpMessage:"Your title can include only one variable"},model:{value:e.templateSimple.header.text,callback:function(t){e.$set(e.templateSimple.header,"text",t)},expression:"templateSimple.header.text"}}):e._e(),e.hasTextHeaderVariable?a("base-input",{attrs:{prelabel:"",name:"Sample {{1}}",disabled:e.nonEditable,textLimit:60,placeholder:"Sample value for {{1}}"},model:{value:e.templateSimple.exmaples.header_text,callback:function(t){e.$set(e.templateSimple.exmaples,"header_text",t)},expression:"templateSimple.exmaples.header_text"}}):e._e(),e.hasMediaHeader?a("base-input",{attrs:{prelabel:"",name:"Sample URL",disabled:e.nonEditable,placeholder:"Provide URL of sample "+e.templateSimple.header.format},model:{value:e.templateSimple.exmaples.header_handler,callback:function(t){e.$set(e.templateSimple.exmaples,"header_handler",t)},expression:"templateSimple.exmaples.header_handler"}}):e._e()],1)],1),a("b-card-body",{staticClass:"border-bottom"},[a("b-card-title",[a("h5",{staticClass:"font-weight-bold text-lg"},[e._v("Body")])]),a("b-card-sub-title",{staticClass:"mb-2 text-sm"},[e._v("\n                                Enter the text for your message in the language you've selected.\n                            ")]),a("b-card-text",[a("base-text-area",{attrs:{disabled:e.nonEditable,placeholder:"Type here",rules:"required|max:1024",rows:"10",textLimit:1024},model:{value:e.templateBody.text,callback:function(t){e.$set(e.templateBody,"text",t)},expression:"templateBody.text"}})],1)],1),a("b-card-body",{staticClass:"border-bottom"},[a("b-card-title",[a("h5",{staticClass:"font-weight-bold text-lg"},[e._v("Footer "),a("b-badge",{staticClass:"text-xs bg-greyish text-dark",attrs:{variant:"dark"}},[e._v("optional")])],1)]),a("b-card-sub-title",{staticClass:"mb-2 text-sm"},[e._v("\n                                Add a short line of text to the bottom of your message template.")]),a("b-card-text",[a("base-input",{attrs:{disabled:e.nonEditable,textLimit:60,rules:"max:60"},model:{value:e.templateFooter.text,callback:function(t){e.$set(e.templateFooter,"text",t)},expression:"templateFooter.text"}})],1)],1),a("b-card-body",{staticClass:"border-bottom"},[a("b-card-title",{staticClass:"d-flex"},[a("div",{staticClass:"flex-grow-1"},[a("h5",{staticClass:"font-weight-bold text-lg"},[e._v("Buttons   "),a("b-badge",{staticClass:"text-xs bg-greyish text-dark",attrs:{variant:"dark"}},[e._v("optional")])],1)]),e.nonEditable?e._e():a("b-button-group",{staticClass:"d-block",attrs:{size:"xs",variant:"outline-dark"}},[a("b-button",{attrs:{size:"xs",variant:"outline-dark",disabled:!e.canAddButton},on:{click:function(t){return e.addButton("QUICK_REPLY")}}},[e._v("+ Button")]),a("b-button",{attrs:{size:"xs",variant:"outline-dark",disabled:!e.canAddLink},on:{click:function(t){return e.addButton("URL")}}},[e._v("+ Link")]),a("b-button",{attrs:{size:"xs",variant:"outline-dark",disabled:!e.canAddPhone},on:{click:function(t){return e.addButton("PHONE_NUMBER")}}},[e._v("+ Call Button")])],1)],1),a("b-card-sub-title",{staticClass:"mb-2 text-sm"},[e._v("\n                                Create buttons that let customers respond to your message or take action.")]),a("b-card-text",[a("b-list-group",{attrs:{flush:""}},e._l(e.templateSimple.buttons.buttons,(function(t,n){return a("b-list-group-item",{key:"btn-"+n,staticClass:"bg-greyish border b-list-group-item-button"},[e.nonEditable?e._e():a("div",{staticClass:"text-white float-left bg-grey number-button",attrs:{pointer:""}},[e._v("\n                                           "+e._s(n+1)+"\n                                        ")]),e.nonEditable?e._e():a("div",{staticClass:"text-white float-right bg-greyer delete-button",attrs:{pointer:""},on:{click:function(t){return e.deleteButton(n)}}},[a("i",{staticClass:"fa fa-trash delete-button-icon"})]),"QUICK_REPLY"==t.type?a("base-input",{staticClass:"mb-0",attrs:{disabled:e.nonEditable,prelabel:"",label:"Button Text",textLimit:20,required:"",rules:"required|max:20"},model:{value:t.text,callback:function(a){e.$set(t,"text",a)},expression:"button.text"}}):e._e(),"PHONE_NUMBER"==t.type?a("div",[a("base-input",{staticClass:"mb-0",attrs:{disabled:e.nonEditable,prelabel:"",label:"Button Text",textLimit:20,required:"",rules:"required|max:20"},model:{value:t.text,callback:function(a){e.$set(t,"text",a)},expression:"button.text"}}),a("base-input",{class:"mb-0",attrs:{disabled:e.nonEditable,prelabel:"",name:"Phone Number",textLimit:20,required:"",rules:"required|phone"},model:{value:t.url,callback:function(a){e.$set(t,"url",a)},expression:"button.url"}})],1):e._e(),"URL"==t.type?a("div",[a("base-input",{staticClass:"mb-0",attrs:{disabled:e.nonEditable,prelabel:"",label:"Button Text",textLimit:20,required:"",rules:"required|max:20"},model:{value:t.text,callback:function(a){e.$set(t,"text",a)},expression:"button.text"}}),a("base-input",{class:"mb-0",attrs:{disabled:e.nonEditable,prelabel:"",name:"Link URL",helpMessage:"You can append only one variable at the of url",textLimit:2e3,rules:"required|max:2000|HBNumVar:end,0,1"},model:{value:t.url,callback:function(a){e.$set(t,"url",a)},expression:"button.url"}}),t.url&&t.url.indexOf("{{1}}")>-1?a("base-input",{attrs:{prelabel:"",name:"Sample URL",disabled:e.nonEditable,placeholder:"Provide complete URL of sample link"},model:{value:e.templateSimple.exmaples.header_handler,callback:function(t){e.$set(e.templateSimple.exmaples,"header_handler",t)},expression:"templateSimple.exmaples.header_handler"}}):e._e()],1):e._e()],1)})),1)],1)],1),a("b-card-footer",[e.nonEditable?e._e():a("b-button",{staticClass:"float-right",attrs:{type:"submit",variant:"primary"}},[e._v("Save")]),e.nonEditable?e._e():a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.modelNameSamples,expression:"modelNameSamples"}],staticClass:"float-right mr-1",attrs:{variant:"outline-primary"}},[e._v("Add Sample")])],1)],1)],1)]}}],null,!1,404456415)})],1),a("b-col",{attrs:{cols:"3"}},[a("template-preview",{attrs:{template:e.templatePreview}})],1)],1)]},proxy:!0}],null,!1,2086331472)}):e._e(),e.newItem?a("b-modal",{attrs:{id:e.modelName,title:(e.newItem.id?"Edit":"Add")+" Template "},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"position-relative form-group"},[a("button",{staticClass:"form-control btn btn-primary",attrs:{disabled:!e.isValidNewItem},on:{click:e.createItem}},[e._v("Create")])])]},proxy:!0}],null,!1,67083204)},[a("ValidationObserver",{ref:"form",staticClass:"my-normalize-v2"},[a("div",{staticClass:"form-group"},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("label",{attrs:{for:"examplePassword"}},[e._v("Message Category")]),a("my-v-select",{staticClass:"text-lg text-grey",staticStyle:{"min-width":"200px",width:"100%"},attrs:{options:"data:waba/message_categories",placeholder:"Select Message Category",filterable:"",searchable:""},model:{value:e.newItem.category,callback:function(t){e.$set(e.newItem,"category",t)},expression:"newItem.category"}}),a("span",{staticClass:"v-input-error"},[e._v(e._s(t.errors[0]))])]}}],null,!1,579382021)})],1),a("base-input",{staticClass:"mb-0",attrs:{disabled:e.nonEditable,label:"Template Name",textLimit:512,required:"",rules:"required|min:4|max:512"},model:{value:e.newItem.name,callback:function(t){e.$set(e.newItem,"name",t)},expression:"newItem.name"}}),a("div",{staticClass:"form-group"},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("label",{attrs:{for:"examplePassword"}},[e._v("Message Language")]),a("my-v-select",{staticClass:"text-lg text-grey",staticStyle:{"min-width":"50px",width:"100%"},attrs:{options:"data:languages",placeholder:"Select Message Language",optionKey:"waba",filterable:"",searchable:"",filter:{waba:!0}},model:{value:e.newItem.lang,callback:function(t){e.$set(e.newItem,"lang",t)},expression:"newItem.lang"}}),a("span",{staticClass:"v-input-error"},[e._v(e._s(t.errors[0]))])]}}],null,!1,18492161)})],1)],1)],1):e._e(),e.templatePreview?a("b-modal",{attrs:{id:e.modelNameSamples,size:"lg",title:"Add Sample Content"}},[a("b-row",[a("b-col",[a("p",{staticClass:"text-sm"},[e._v("To help us understand what kind of message you want to send, you have the option to provide specific content examples for your template. \n                You can add a sample template for one or all languages you are submitting.")]),a("p",{staticClass:"text-sm"},[e._v("Make sure not to include any actual user or customer information, and provide only sample content in your examples. \n                    "),a("a",{attrs:{href:"https://developers.facebook.com/docs/whatsapp/message-templates/guidelines"}},[e._v(" Learn More ")])]),a("b-list-group")],1),a("b-col",[a("template-preview",{attrs:{template:e.templatePreview}})],1)],1)],1):e._e(),e.templatePreview?a("b-modal",{attrs:{id:e.modelNamePreview,title:"Template Preview"},on:{ok:e.onSubmit}},[a("template-preview",{attrs:{template:e.templatePreview}})],1):e._e(),a("b-modal",{attrs:{id:"SHOW_CLIENT_ERROR",size:"lg",title:"WABA Response"}},[a("pre",[e._v(e._s(e._f("json")(e.ERROR_JSON)))])])],1)},s=[],l=(a("96cf"),a("3b8d")),i=(a("a481"),a("7f7f"),a("2f9b")),r=a("7f14"),o=a("594a"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("my-v-select",e._b({attrs:{type:"text"}},"my-v-select",e.$attrs,!1))},u=[],p=a("2eb3"),d={components:{MyVSelect:p["a"]}},m=d,f=a("2877"),h=Object(f["a"])(m,c,u,!1,null,null,null),b=h.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("i",{staticClass:"fa fa-circle",class:{"text-success":"approved"==e.value,"text-danger":"rejected"==e.value,"text-warning":"submitted"==e.value}}),e._t("default")],2)},g=[],y={props:{value:{}}},x=y,_=Object(f["a"])(x,v,g,!1,null,null,null),w=_.exports,S=a("2051"),C=a("1675");function k(e){return{channelId:e.channelId,code:e.code,lang:e.lang,category:e.category,contactType:e.contactType,channelType:e.channelType,template:{name:e.code,language:e.lang,category:e.category,components:[{type:"BODY",text:null},{type:"HEADER",format:null},{type:"FOOTER",text:null},{type:"BUTTONS",buttons:[]}]}}}function O(){return{header:{type:null,text:null},body:{text:null},footer:{text:null},buttons:{type:"None",urlType:"STATIC",buttons:[]},exmaples:{header_text:null,header_handler:null,body_text:[],button_url:null}}}var I=a("de0d"),T=a("88b4"),E=a("b012"),$=a.n(E),M={components:{MasterView:i["a"],MyChannelSelect:r["a"],MyHSMTmplSelect:o["a"],MyText:b,MyVSelect:p["a"],BaseTextArea:S["a"],BaseInput:C["a"],BaseSelect:I["a"],TemplatePreview:T["a"],MyStatus:w},data:function(){return{filters:[{name:"sync",label:"Sync",value:!1},{label:"Select Account",name:"channelId",type:"lane",value:""}],table:{fields:[{key:"template_code",label:"Template Code/Name",sortable:!0},{key:"template.category",label:"Category",sortable:!0},{key:"template_status",label:"Status",sortable:!0},{key:"template.language",label:"Language"},{key:"row_actions",label:"Linked HSM Template"}],tableClass:"text-sm",items:[],perPage:25,currentPage:1,rows:0,api:"api/tmpl/hsm/waba_templates"},modelName:"MODAL_WABA_TEMPLATE",modelNamePreview:"MODAL_WABA_TEMPLATE_PREVIEW",modelNameSamples:"MODAL_WABA_TEMPLATE_SAMPLES",modalInputs:[],oldHash:null,model:{channelId:""},template:k({}),templateSimple:O(),templates:[],newLanguage:null,newItem:{},ERROR_JSON:null}},computed:{items:function(){return this.$store.getters.StateAgents},teams:function(){return this.$store.getters.StateTeams},isValidNewItem:function(){return this.newItem.category&&this.newItem.name},templateBody:function(){return this.template.template.components.filter((function(e){return"BODY"==e.type}))[0]||{}},templateFooter:function(){return this.template.template.components.filter((function(e){return"FOOTER"==e.type}))[0]||{}},canAddButton:function(){var e,t;return null===(e=this.templateSimple)||void 0===e||null===(t=e.buttons)||void 0===t||!t.buttons||this.templateSimple.buttons.buttons.length<3&&!this.templateSimple.buttons.buttons.some((function(e){return"QUICK_REPLY"!==e.type}))},canAddLink:function(){var e,t;return null===(e=this.templateSimple)||void 0===e||null===(t=e.buttons)||void 0===t||!t.buttons||this.templateSimple.buttons.buttons.length<2&&!this.templateSimple.buttons.buttons.some((function(e){return"URL"===e.type||"QUICK_REPLY"===e.type}))},canAddPhone:function(){var e,t;return null===(e=this.templateSimple)||void 0===e||null===(t=e.buttons)||void 0===t||!t.buttons||this.templateSimple.buttons.buttons.length<2&&!this.templateSimple.buttons.buttons.some((function(e){return"PHONE_NUMBER"===e.type||"QUICK_REPLY"===e.type}))},nonEditable:function(){var e,t;return!(null===(e=this.template)||void 0===e||null===(t=e.template)||void 0===t||!t.status)},hasMediaHeader:function(){var e,t;return["IMAGE","VIDEO","DOCUMENT"].indexOf(null===(e=this.templateSimple)||void 0===e||null===(t=e.header)||void 0===t?void 0:t.format)>-1},hasTextHeaderVariable:function(){var e,t,a,n,s,l;return"TEXT"==(null===(e=this.templateSimple)||void 0===e||null===(t=e.header)||void 0===t?void 0:t.format)&&(null===(a=this.templateSimple)||void 0===a||null===(n=a.header)||void 0===n?void 0:n.text)&&(null===(s=this.templateSimple)||void 0===s||null===(l=s.header)||void 0===l?void 0:l.text.indexOf("{{1}}"))>-1},templatePreview:function(){var e,t;return{template:this.templateSimple.body.text,title:"TEXT"==this.templateSimple.header.format?this.templateSimple.header.text:null,attachments:["IMAGE","VIDEO","DOCUMENT"].indexOf(this.templateSimple.header.format)>-1?[{mediaType:this.templateSimple.header.format}]:null,footer:this.templateSimple.footer.text,options:{buttons:((null===(e=this.templateSimple)||void 0===e||null===(t=e.buttons)||void 0===t?void 0:t.buttons)||[]).map((function(e){return{label:e.text,type:e.type}}))}}}},watch:{newLanguage:function(e,t){console.log("watch.newLanguage",e,t),this.addTemplate(e)},"$route.params.channelId":function(){this.onLoad()},"newItem.name":function(){this.newItem.name=this.newItem.name.replace(" ","_").toLowerCase().replace(/[^A-Za-z0-9_]/g,"")}},mounted:function(){this.onLoad()},methods:{onLoad:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$route.params.channelId?this.filters[1].value=this.$route.params.channelId:this.template={};case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createItem:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.form.validate();case 2:t=e.sent,!0===t&&(this.selectTemplate({channelId:this.filters[1].value,code:this.newItem.name,category:this.newItem.category,lang:this.newItem.lang}),this.addTemplate(this.newItem.lang),this.$refs.form.reset(),this.$bvModal.hide(this.modelName));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$service.post("/api/tmpl/hsm/waba_templates",{category:this.template.template.category,language:this.template.template.language,name:this.template.template.name,components:this.template.template.components.filter((function(e){return!(!e.type&&"NONE"==e.type||"HEADER"==e.type&&!e.format||"FOOTER"==e.type&&!e.text||!("BUTTONS"!=e.type||e.buttons&&e.buttons.length))}))},{params:{channelId:this.template.channelId}});case 3:t=e.sent,this.template.id=t.results[0].id,this.template.lang=t.results[0].lang,this.template.code=t.results[0].code,this.template.template=t.results[0].template,console.log("resp",t),e.next=16;break;case 11:e.prev=11,e.t0=e["catch"](0),this.ERROR_JSON=e.t0.response.data.errors[0].body,this.$bvModal.show("SHOW_CLIENT_ERROR"),this.$refs.templateStructure.setErrors(e.t0.response.data.veeErrors);case 16:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}(),onSaveTamplete:function(){this.$bvModal.show(this.modelNamePreview)},onAction:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:switch(t.name){case"ADD_ITEM":default:console.log("NoMapping",t)}case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),onChange:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("hsmTemplateId"!=a){e.next=3;break}return e.next=3,this.$service.submit("api/tmpl/hsm/link",{templateId:t.id,hsmTemplateId:t.hsmTemplateId});case 3:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),refreshSelectedTemplates:function(){var e=this;this.templates=this.$refs.templatesView.getItems().filter((function(t){return t.code==e.template.code}))},selectTemplate:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.template=t,this.templateSimple=O(),this.template&&this.template.template&&this.template.template.components&&(a=this.templateSimple,this.template.template.components.map((function(e){"HEADER"==e.type?a.header=e:"BODY"==e.type?a.body=e:"FOOTER"==e.type?a.footer=e:"BUTTONS"==e.type&&(a.buttons=e)}))),this.refreshSelectedTemplates();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onRows:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$route.params.channelId&&this.$route.params.code&&this.$route.params.lang&&(console.log("rows",t),a=t.filter((function(e){return e.channelId==n.$route.params.channelId&&e.code==n.$route.params.code&&e.lang==n.$route.params.lang}))[0],a&&this.selectTemplate(a));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addTemplate:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:this.fixit(),a=this.templates.filter((function(e){return e.lang==t}))[0],a||(a=k(Object.assign({},this.template,{lang:t})),this.$refs.templatesView.getItems().push(a)),a&&this.selectTemplate(a);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onDelete:function(e){var t=this.$refs.templatesView.getItems();for(var a in t){var n=t[a];if(n.channelId==e.channelId&&n.code==e.code&&n.lang==e.lang){t.splice(a,1),this.refreshSelectedTemplates(),this.templates[0]?this.selectTemplate(this.templates[0]):this.selectTemplate({});break}}},addButton:function(e){this.templateSimple.buttons.buttons||(this.template.template.buttons=[],this.templateSimple.buttons.buttons=this.template.template.buttons),this.templateSimple.buttons.buttons.push({type:e})},deleteButton:function(e){this.templateSimple.buttons.buttons.splice(e,1)},fixit:$()((function(e){this.newLanguage=null}))}},R=M,P=(a("cd69"),Object(f["a"])(R,n,s,!1,null,null,null));t["default"]=P.exports}}]);