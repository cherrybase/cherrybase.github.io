(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8836b2b0"],{2051:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("validation-provider",t._b({attrs:{rules:t.rules,name:t.name},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,s=e.valid,i=e.invalid,l=e.validated;return[n("b-form-group",{staticClass:"form-group-input",class:[{"is-question":t.question}],attrs:{"label-for":"'fmg-' + inputId"}},[t._t("label",(function(){return[t.label||t.name?n("label",{class:[{focused:t.focused},{"is-valid":s&&l},{"is-invalid":i&&l},{"has-value":""!=t.value},t.labelClasses],attrs:{for:"fmg-"+t.inputId}},[t._v("\n        "+t._s(t.label||t.name)+"\n      ")]):t._e()]})),n("div",{class:[{"input-group":t.hasIcon||t.feedback},{focused:t.focused},{"input-group-alternative":t.alternative},{"has-label":t.label||t.name||t.$slots.label},t.inputGroupClasses]},[t.prependIcon||t.$slots.prepend?n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text"},[t._t("prepend",(function(){return[n("i",{class:t.prependIcon})]}))],2)]):t._e(),n("textarea",t._g(t._b({staticClass:"form-control",class:[{"is-valid":s&&l&&t.successMessage},{"is-invalid":i&&l},t.inputClasses],attrs:{id:"fmg-"+t.inputId,type:t.type,valid:s,placeholder:t.$attrs.placeholder,required:t.required},domProps:{value:t.value}},"textarea",t.$attrs,!1),t.listeners)),t.feedback?n("div",{staticClass:"input-group-append"},[n("span",{staticClass:"input-group-text"},[n("i",{staticClass:"fa",class:[{"fa-exclamation-circle text-danger":a[0]},{"fa-check-circle text-success":s&&l}]})])]):t._e(),t.appendIcon||t.$slots.append||t.textLimit>0?n("div",{staticClass:"input-group-append"},[n("span",{staticClass:"input-group-text"},[t._t("append",(function(){return[t.textLimit>0?n("span",{},[t._v("\n                  "+t._s(t.value?t.value.length:0)+"/"+t._s(t.textLimit)+"\n                ")]):n("i",{class:t.appendIcon})]}))],2)]):t._e(),t._t("infoBlock")],2),t._t("help",(function(){return[t.showHelpMessage?n("div",{staticClass:"help-feedback"},[t._v("\n          "+t._s(t.helpMessage||t.$attrs.placeholder)+"\n        ")]):t._e()]})),t.strengthBar?n("password-meter",{directives:[{name:"show",rawName:"v-show",value:t.strengthBar,expression:"strengthBar"}],attrs:{password:t.value},on:{score:t.listeners.score}}):t._e(),t._t("success",(function(){return[s&&l&&t.successMessage?n("div",{staticClass:"valid-feedback"},[t._v("\n        "+t._s(t.successMessage)+"\n      ")]):t._e()]})),t._t("error",(function(){return[a[0]?n("div",{staticClass:"invalid-feedback",staticStyle:{display:"block"}},[t._v("\n        "+t._s(a[0])+"\n      ")]):t._e()]}))],2)]}}],null,!0)},"validation-provider",t.$attrs,!1))},s=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),l=(n("c5f6"),n("0127")),r=n.n(l);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u=0,p={components:{passwordMeter:r.a},inheritAttrs:!1,name:"base-text-area",props:{required:{type:Boolean,description:"Whether input is required (adds an asterix *)"},question:{type:Boolean,default:!1,description:"Whether to amnimate placeholder to lable"},feedback:{type:Boolean,default:!1,description:"Whether to show feedback icon"},strengthBar:{type:Boolean,default:!1,description:"Whether to show Password Strength Bar"},textLimit:{type:Number,default:0},group:{type:Boolean,description:"Whether input is an input group (manual override in special cases)"},alternative:{type:Boolean,description:"Whether input is of alternative layout"},label:{type:String,description:"Input label (text before input)"},error:{type:String,description:"Input error (below input)"},successMessage:{type:String,description:"Input success message",default:""},helpMessage:{type:String,description:"Input help message",default:""},labelClasses:{type:String,description:"Input label css classes",default:"form-control-label"},inputClasses:{type:String,description:"Input css classes"},inputGroupClasses:{type:String,description:"Input group css classes"},value:{type:[String,Number],description:"Input value"},type:{type:String,description:"Input type",default:"text"},appendIcon:{type:String,description:"Append icon (right)"},prependIcon:{type:String,description:"Prepend icon (left)"},rules:{type:[String,Array,Object],description:"Vee validate validation rules",default:""},name:{type:String,description:"Input name (used for validation)",default:""}},data:function(){return{focused:!1,inputId:++u}},computed:{listeners:function(){return c(c({},this.$listeners),{},{input:this.updateValue,focus:this.onFocus,blur:this.onBlur,score:this.onScore})},slotData:function(){return c({focused:this.focused,error:this.error},this.listeners)},hasIcon:function(){var t=this.$slots,e=t.append,n=t.prepend;return void 0!==e||void 0!==n||void 0!==this.appendIcon||void 0!==this.prependIcon||this.textLimit>0||this.group},showHelpMessage:function(){if(this.helpMessage)return!0}},methods:{updateValue:function(t){var e=t.target.value;this.$emit("input",e)},onFocus:function(t){this.focused=!0,this.$emit("focus",t)},onBlur:function(t){this.focused=!1,this.$emit("blur",t)},onScore:function(t){this.$emit("score",t)}}},d=p,m=n("2877"),f=Object(m["a"])(d,a,s,!1,null,null,null);e["a"]=f.exports},"243c":function(t,e,n){},"2eb3":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"dropdown"==t.type?n("v-select",t._b({staticStyle:{"min-width":"220px"},attrs:{options:t.model.options,filterable:t.filterable,searchable:t.searchable,placeholder:t.placeholder,clearable:t.clearable},on:{search:t.onSearch,input:t.onChange},scopedSlots:t._u([{key:"selected-option",fn:function(e){return[t.selectedPrefixClass?n("span",{class:[t.selectedPrefixClass,"mr-1"]},[t._v(" ")]):t._e(),e.prefixClass?n("span",{class:[e.prefixClass,"mr-1"]},[t._v(" ")]):t._e(),t._v(t._s(e.label)+"\n    ")]}},{key:"option",fn:function(e){return[e.prefixClass?n("span",{class:[e.prefixClass,"mr-1"]},[t._v(" ")]):t._e(),t._v(t._s(e.label)+"\n    ")]}},{key:"open-indicator",fn:function(e){var a=e.attributes;return[n("span",t._b({staticClass:"fa fa-caret-down"},"span",a,!1))]}},t._l(Object.keys(t.$scopedSlots),(function(e){return{key:e,fn:function(n){return[t._t(e,null,null,n)]}}}))],null,!0),model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}},"v-select",t.$attrs,!1)):n("span",[t.model.value?t._t("selected-option",(function(){return[t.selectedPrefixClass?n("span",{class:t.selectedPrefixClass},[t._v(" ")]):t._e(),t._v(t._s(t.model.value.label)+"\n    ")]}),null,{option:t.model.value}):t._e()],2)},s=[],i=(n("a481"),n("96cf"),n("3b8d")),l=(n("6b54"),n("75fc")),r=(n("7f7f"),n("4a7a")),o=n.n(r),c=(n("6dfc"),{components:{vSelect:o.a},props:{options:{default:"/options",description:"examples;- getx:RelativeGetXUrl,dispatch:DispatchableEventName,data:PathNameIn@data"},searchable:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},emptyDisplay:{type:String,default:null},placeholder:{type:String,default:""},optionKey:{type:String,default:"key"},optionLabel:{type:String,default:"label"},value:{default:null},selectDefault:{},selectedPrefixClass:{},filter:{},type:{type:String,default:"dropdown"}},data:function(){return{model:{options:[],value:null,sender:""}}},computed:{myOptions:function(){}},watch:{value:function(t,e){this.valueOnChange(t,e)},options:function(t,e){this.loadOptions()}},mounted:function(){this.loadOptions()},methods:{valueOnChange:function(t,e){this.selectModelValue()},selectModelValue:function(){for(var t in this.model.value=null,this.model.options)this.model.options[t].value==this.value&&(this.model.value=this.model.options[t]);!this.selectDefault||void 0!==this.model.value&&null!==this.model.value||1==this.selectDefault&&this.model.options[0]&&(this.model.value=this.model.options[0],this.onChange()),this.$emit("option",this.model.value)},fromOptions:function(t){var e=this,n=!1;if(this.model.options=t.map((function(t){if("string"==typeof t||"number"==typeof t)return{value:t,label:t,item:t};if(null===t||void 0===t)return n=!0,{value:t,label:e.emptyDisplay||e.placeholder,item:t};var a=t[e.optionKey]||t.id||t.key||t.code||t.value||t.label||t.name,s=t[e.optionLabel]||t.name||t.label||t.value||t.code||t.key||t.id;return{value:a,label:s||(null===a||void 0===a?e.emptyDisplay||e.placeholder:""),item:t,prefixClass:t.prefixClass||t.icon}})),!n&&e.emptyDisplay&&(this.model.options=[{value:null,label:this.emptyDisplay,item:null}].concat(Object(l["a"])(this.model.options))),this.filter){var a=[];"[object Array]"===Object.prototype.toString.call(this.filter)?a=Object(l["a"])(this.filter):"[object Object]"===Object.prototype.toString.call(this.filter)&&(a=[this.filter]),this.model.options=this.model.options.filter((function(t){return a.some((function(e){for(var n in e)if(!0===e[n]){if(!t.item[n])return!1}else if(e[n]!==t.item[n])return!1;return!0}))}))}this.selectModelValue()},loadOptions:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,i,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.options||"string"!=typeof this.options||0!=this.options.indexOf("data:")){t.next=7;break}return t.next=3,n("ab35")("./"+this.options.replace("data:","")+".json");case 3:e=t.sent,this.fromOptions(e.options),t.next=24;break;case 7:if(!this.options||"string"!=typeof this.options||0!=this.options.indexOf("getx:")){t.next=15;break}return a=this.options.replace("getx:",""),t.next=11,this.$service.getX(a);case 11:s=t.sent,this.fromOptions(s.results?s.results:s),t.next=24;break;case 15:if(!this.options||"string"!=typeof this.options||0!=this.options.indexOf("dispatch:")){t.next=23;break}return i=this.options.replace("dispatch:",""),t.next=19,this.$store.dispatch(i);case 19:l=t.sent,this.fromOptions(l.results?l.results:l),t.next=24;break;case 23:this.options&&this.fromOptions(this.options);case 24:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onChange:function(){var t=this.model.value?this.model.value.value:null;this.$emit("input",t),this.$emit("change",t)},onSearch:function(t,e){this.$emit("search",t,e)},option:function(){return this.model.value}}}),u=c,p=(n("6cd3"),n("2877")),d=Object(p["a"])(u,a,s,!1,null,null,null);e["a"]=d.exports},"594a":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("MyVSelect",t._b({ref:"myVSelect",staticClass:"w-100 text-black",staticStyle:{"min-width":"220px"},attrs:{options:t.options,value:t.value,searchable:!1,clearable:!0,placeholder:"Select Template"},on:{input:t.clickAction},scopedSlots:t._u([{key:"selected-option",fn:function(e){return[t.$attrs.selectedPrefixClass?n("span",{class:t.$attrs.selectedPrefixClass},[t._v(" ")]):t._e(),t._v("\n        "+t._s(e.item.desc)+" ("+t._s(e.item.lang)+")\n    ")]}},{key:"option",fn:function(e){return[t._v("\n        "+t._s(e.item.desc)+" ("+t._s(e.item.lang)+") \n    ")]}}]),model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}},"MyVSelect",t.$attrs,!1))},s=[],i=n("2eb3"),l={components:{MyVSelect:i["a"]},props:{options:{default:"getx:/api/tmpl/pushtemplate"},value:{default:null}},data:function(){return{model:{options:[],value:null,sender:""}}},mounted:function(){this.model.value=this.value},watch:{value:function(){this.model.value=this.value}},methods:{clickAction:function(){var t=this.model.value;this.$emit("input",t),this.$emit("change",t)},option:function(){return this.$refs.myVSelect.option()}}},r=l,o=n("2877"),c=Object(o["a"])(r,a,s,!1,null,null,null);e["a"]=c.exports},"6ad2":function(t,e,n){"use strict";n("243c")},"6cd3":function(t,e,n){"use strict";n("dbda")},"75fc":function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var a=n("a745"),s=n.n(a),i=n("db2a");function l(t){if(s()(t))return Object(i["a"])(t)}var r=n("67bb"),o=n.n(r),c=n("5d58"),u=n.n(c),p=n("774e"),d=n.n(p);function m(t){if("undefined"!==typeof o.a&&null!=t[u.a]||null!=t["@@iterator"])return d()(t)}var f=n("e630");function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(t){return l(t)||m(t)||Object(f["a"])(t)||h()}},"7f14":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("MyVSelect",t._b({ref:"myVSelect",staticClass:"w-100",staticStyle:{"min-width":"220px"},attrs:{options:t.options,searchable:!1,clearable:!1,placeholder:"Select Account",selectDefault:!0},on:{input:t.clickAction},scopedSlots:t._u([{key:"selected-option",fn:function(e){return[n("div",{},[n("span",{staticClass:"contact_type contact_type-24 fab",class:t.$global.MyDict.social[e.item.contactType]}),t._v("  "+t._s(e.item.lane)+"\n        ")])]}},{key:"option",fn:function(e){var a=e.item;return[n("span",{staticClass:"contact_type contact_type-24 fab",class:t.$global.MyDict.social[a.contactType]}),t._v("\n        "+t._s(a.lane)+"\n    ")]}}]),model:{value:t.model.value,callback:function(e){t.$set(t.model,"value",e)},expression:"model.value"}},"MyVSelect",t.$attrs,!1))},s=[],i=n("2eb3"),l={components:{MyVSelect:i["a"]},props:{options:{default:"getx:/api/options/channels"},value:{default:null}},data:function(){return{model:{value:null,sender:"",option:null}}},computed:{},mounted:function(){this.model.value=this.value},methods:{clickAction:function(){var t=this.model.value;this.$emit("input",t),this.$emit("change",t)},option:function(){return this.$refs.myVSelect.option()}}},r=l,o=n("2877"),c=Object(o["a"])(r,a,s,!1,null,null,null);e["a"]=c.exports},"88b4":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.templateId?n("MyVSelect",t._b({ref:"channelSelect",staticClass:"w-100 text-black",staticStyle:{"min-width":"220px"},attrs:{hidden:"",options:t.src,searchable:!1,clearable:!0,placeholder:"Select Template"},on:{option:t.optionReady,input:t.clickAction},model:{value:t.templateId,callback:function(e){t.templateId=e},expression:"templateId"}},"MyVSelect",t.$attrs,!1)):t._e(),t.templateConfig?n("div",{staticClass:"message-preview w-100",class:t.format},["WHATSAPP"==t.format?n("span",[n("div",{staticClass:"message-text"},[t.templateConfig.attachments&&t.templateConfig.attachments[0]?n("div",{class:["message-attachment-inline","attachment-"+t.templateConfig.attachments[0].mediaType]}):t._e(),t.templateConfig.title?n("div",{staticClass:"message-title"},[t._v(t._s(t.templateConfig.title))]):t._e(),n("div",{staticClass:"message-body"},[t._v(t._s(t.content.text))])]),t.content.options?n("div",{staticClass:"message-buttons"},t._l(t.content.options.buttons,(function(e,a){return n("div",{key:a,staticClass:"message-button"},[t._v("\n            "+t._s(e.label)+"\n            ")])})),0):t._e()]):n("span",[n("div",{staticClass:"message-text"},[t.templateConfig.title?n("div",{staticClass:"message-title"},[t._v(t._s(t.templateConfig.title))]):t._e(),n("div",[t._v(t._s(t.content.text))])]),t.content.options?n("div",{staticClass:"message-buttons"},t._l(t.content.options.buttons,(function(e,a){return n("div",{key:a,staticClass:"message-button"},[t._v("\n            "+t._s(e.label)+"\n            ")])})),0):t._e()])]):t._e()],1)},s=[],i=(n("28a5"),n("3ef3")),l=n("9dbb"),r=n.n(l),o=n("2eb3"),c={contact:{name:"John Doe",phone:"919876543210",email:"John.Doe@company.com"}},u={name:"MessagePreview",components:{MyVSelect:o["a"]},data:function(){return{templateConfig:null}},computed:{content:function(){if(!this.templateConfig)return{text:"",options:{}};var t=this.templateConfig.template;try{var e;t=r.a.render(this.templateConfig.template,Object.assign(c,{data:this.templateConfig.data,contact:(null===this||void 0===this||null===(e=this.model)||void 0===e?void 0:e.contact)||c.contact}))}catch(a){}var n=(t||"").split("---options---");return{text:n[0],options:Object.assign({},i["a"].message_form_options(i["a"].map_from_string(n[1])),this.templateConfig.options)}},options:function(){}},mounted:function(){this.templateConfig=this.template},methods:{clickAction:function(){},optionReady:function(t){console.log("Option",t),t&&(this.templateConfig=t.item)}},props:{icon:String,heading:String,subheading:String,actions:Array,template:{type:Object},templateId:{type:String},src:{type:String,default:"getx:/api/options/tmpl/hsm"},format:{type:String,default:"WHATSAPP"},model:{}},watch:{template:function(){this.templateConfig=this.template}}},p=u,d=(n("6ad2"),n("2877")),m=Object(d["a"])(p,a,s,!1,null,null,null);e["a"]=m.exports},"9dbb":function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){"use strict";
/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */var t=Object.prototype.toString,e=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(t){return"function"===typeof t}function a(t){return e(t)?"array":typeof t}function s(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(t,e){return null!=t&&"object"===typeof t&&e in t}function l(t,e){return null!=t&&"object"!==typeof t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var r=RegExp.prototype.test;function o(t,e){return r.call(t,e)}var c=/\S/;function u(t){return!o(c,t)}var p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function d(t){return String(t).replace(/[&<>"'`=\/]/g,(function(t){return p[t]}))}var m=/\s*/,f=/\s+/,h=/\s*=/,b=/\s*\}/,v=/#|\^|\/|>|\{|&|=|!/;function g(t,n){if(!t)return[];var a,i,l,r=!1,o=[],c=[],p=[],d=!1,g=!1,_="",C=0;function k(){if(d&&!g)while(p.length)delete c[p.pop()];else p=[];d=!1,g=!1}function I(t){if("string"===typeof t&&(t=t.split(f,2)),!e(t)||2!==t.length)throw new Error("Invalid tags: "+t);a=new RegExp(s(t[0])+"\\s*"),i=new RegExp("\\s*"+s(t[1])),l=new RegExp("\\s*"+s("}"+t[1]))}I(n||S.tags);var T,O,$,E,j,M,P=new w(t);while(!P.eos()){if(T=P.pos,$=P.scanUntil(a),$)for(var A=0,B=$.length;A<B;++A)E=$.charAt(A),u(E)?(p.push(c.length),_+=E):(g=!0,r=!0,_+=" "),c.push(["text",E,T,T+1]),T+=1,"\n"===E&&(k(),_="",C=0,r=!1);if(!P.scan(a))break;if(d=!0,O=P.scan(v)||"name",P.scan(m),"="===O?($=P.scanUntil(h),P.scan(h),P.scanUntil(i)):"{"===O?($=P.scanUntil(l),P.scan(b),P.scanUntil(i),O="&"):$=P.scanUntil(i),!P.scan(i))throw new Error("Unclosed tag at "+P.pos);if(j=">"==O?[O,$,T,P.pos,_,C,r]:[O,$,T,P.pos],C++,c.push(j),"#"===O||"^"===O)o.push(j);else if("/"===O){if(M=o.pop(),!M)throw new Error('Unopened section "'+$+'" at '+T);if(M[1]!==$)throw new Error('Unclosed section "'+M[1]+'" at '+T)}else"name"===O||"{"===O||"&"===O?g=!0:"="===O&&I($)}if(k(),M=o.pop(),M)throw new Error('Unclosed section "'+M[1]+'" at '+P.pos);return x(y(c))}function y(t){for(var e,n,a=[],s=0,i=t.length;s<i;++s)e=t[s],e&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(a.push(e),n=e));return a}function x(t){for(var e,n,a=[],s=a,i=[],l=0,r=t.length;l<r;++l)switch(e=t[l],e[0]){case"#":case"^":s.push(e),i.push(e),s=e[4]=[];break;case"/":n=i.pop(),n[5]=e[2],s=i.length>0?i[i.length-1][4]:a;break;default:s.push(e)}return a}function w(t){this.string=t,this.tail=t,this.pos=0}function _(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function C(){this.templateCache={_cache:{},set:function(t,e){this._cache[t]=e},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}w.prototype.eos=function(){return""===this.tail},w.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},w.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},_.prototype.push=function(t){return new _(t,this)},_.prototype.lookup=function(t){var e,a=this.cache;if(a.hasOwnProperty(t))e=a[t];else{var s,r,o,c=this,u=!1;while(c){if(t.indexOf(".")>0){s=c.view,r=t.split("."),o=0;while(null!=s&&o<r.length)o===r.length-1&&(u=i(s,r[o])||l(s,r[o])),s=s[r[o++]]}else s=c.view[t],u=i(c.view,t);if(u){e=s;break}c=c.parent}a[t]=e}return n(e)&&(e=e.call(this.view)),e},C.prototype.clearCache=function(){"undefined"!==typeof this.templateCache&&this.templateCache.clear()},C.prototype.parse=function(t,e){var n=this.templateCache,a=t+":"+(e||S.tags).join(":"),s="undefined"!==typeof n,i=s?n.get(a):void 0;return void 0==i&&(i=g(t,e),s&&n.set(a,i)),i},C.prototype.render=function(t,e,n,a){var s=this.getConfigTags(a),i=this.parse(t,s),l=e instanceof _?e:new _(e,void 0);return this.renderTokens(i,l,n,t,a)},C.prototype.renderTokens=function(t,e,n,a,s){for(var i,l,r,o="",c=0,u=t.length;c<u;++c)r=void 0,i=t[c],l=i[0],"#"===l?r=this.renderSection(i,e,n,a,s):"^"===l?r=this.renderInverted(i,e,n,a,s):">"===l?r=this.renderPartial(i,e,n,s):"&"===l?r=this.unescapedValue(i,e):"name"===l?r=this.escapedValue(i,e,s):"text"===l&&(r=this.rawValue(i)),void 0!==r&&(o+=r);return o},C.prototype.renderSection=function(t,a,s,i,l){var r=this,o="",c=a.lookup(t[1]);function u(t){return r.render(t,a,s,l)}if(c){if(e(c))for(var p=0,d=c.length;p<d;++p)o+=this.renderTokens(t[4],a.push(c[p]),s,i,l);else if("object"===typeof c||"string"===typeof c||"number"===typeof c)o+=this.renderTokens(t[4],a.push(c),s,i,l);else if(n(c)){if("string"!==typeof i)throw new Error("Cannot use higher-order sections without the original template");c=c.call(a.view,i.slice(t[3],t[5]),u),null!=c&&(o+=c)}else o+=this.renderTokens(t[4],a,s,i,l);return o}},C.prototype.renderInverted=function(t,n,a,s,i){var l=n.lookup(t[1]);if(!l||e(l)&&0===l.length)return this.renderTokens(t[4],n,a,s,i)},C.prototype.indentPartial=function(t,e,n){for(var a=e.replace(/[^ \t]/g,""),s=t.split("\n"),i=0;i<s.length;i++)s[i].length&&(i>0||!n)&&(s[i]=a+s[i]);return s.join("\n")},C.prototype.renderPartial=function(t,e,a,s){if(a){var i=this.getConfigTags(s),l=n(a)?a(t[1]):a[t[1]];if(null!=l){var r=t[6],o=t[5],c=t[4],u=l;0==o&&c&&(u=this.indentPartial(l,c,r));var p=this.parse(u,i);return this.renderTokens(p,e,a,u,s)}}},C.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},C.prototype.escapedValue=function(t,e,n){var a=this.getConfigEscape(n)||S.escape,s=e.lookup(t[1]);if(null!=s)return"number"===typeof s&&a===S.escape?String(s):a(s)},C.prototype.rawValue=function(t){return t[1]},C.prototype.getConfigTags=function(t){return e(t)?t:t&&"object"===typeof t?t.tags:void 0},C.prototype.getConfigEscape=function(t){return t&&"object"===typeof t&&!e(t)?t.escape:void 0};var S={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){k.templateCache=t},get templateCache(){return k.templateCache}},k=new C;return S.clearCache=function(){return k.clearCache()},S.parse=function(t,e){return k.parse(t,e)},S.render=function(t,e,n,s){if("string"!==typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+a(t)+'" was given as the first argument for mustache#render(template, view, partials)');return k.render(t,e,n,s)},S.escape=d,S.Scanner=w,S.Context=_,S.Writer=C,S}))},b012:function(t,e){function n(t,e,n){var a,s,i,l,r;function o(){var c=Date.now()-l;c<e&&c>=0?a=setTimeout(o,e-c):(a=null,n||(r=t.apply(i,s),i=s=null))}null==e&&(e=100);var c=function(){i=this,s=arguments,l=Date.now();var c=n&&!a;return a||(a=setTimeout(o,e)),c&&(r=t.apply(i,s),i=s=null),r};return c.clear=function(){a&&(clearTimeout(a),a=null)},c.flush=function(){a&&(r=t.apply(i,s),i=s=null,clearTimeout(a),a=null)},c}n.debounce=n,t.exports=n},cd69:function(t,e,n){"use strict";n("dad0")},dad0:function(t,e,n){},dbda:function(t,e,n){},ef9f:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-tmpl-hsm-waba"},[n("master-view",{directives:[{name:"show",rawName:"v-show",value:!t.template.code,expression:"!template.code"}],ref:"templatesView",attrs:{goodTables:"",header:{heading:"WhatsApp Templates",subheading:"All the templates registered with WhatsApp",icon:"icon-gradient bg-happy-itmeo fa fa-whatsapp"},table:t.table,filters:t.filters,actions:[{label:"Create Message Template",icon:"plus",name:"ADD_ITEM",modal:t.modelName}],autoApply:!1},on:{action:t.onAction,rows:t.onRows},scopedSlots:t._u([{key:"filter(channelId)",fn:function(e){var a=e.apply,s=e.filter;return[n("MyChannelSelect",{attrs:{filter:{channelType:"wa360"}},on:{change:a},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"filter.value"}})]}},{key:"filter(sync)",fn:function(t){var e=t.apply,a=t.filter;return[n("b-button",{staticClass:"fa fa-sync",attrs:{variant:"success"},on:{click:function(t){a.value=!0,e()}}})]}},{key:"cell(row_actions)",fn:function(e){var a=e.item;return[n("MyHSMTmplSelect",{staticClass:"text-sm",on:{change:function(e){return t.onChange(a,"hsmTemplateId")}},model:{value:a.hsmTemplateId,callback:function(e){t.$set(a,"hsmTemplateId",e)},expression:"item.hsmTemplateId"}})]}},{key:"cell(template_code)",fn:function(e){var a=e.item;return[n("b-button",{attrs:{variant:"link",to:{name:"wabatemplate",params:{channelId:a.channelId,code:a.code,lang:a.lang}}},on:{click:function(e){return t.selectTemplate(a)}}},[t._v("\n                "+t._s(a.code)+"\n            ")])]}}])}),t.template.code?n("master-view",{attrs:{header:{heading:t.template.code,subheading:t.template.category,icon:"icon-gradient bg-happy-itmeo fa fa-whatsapp"},actions:[{name:"cancel"}]},scopedSlots:t._u([{key:"action(cancel)",fn:function(e){var a=e.action;return[n("b-button",{attrs:{variant:"success",to:{name:"wabatemplates"}},on:{click:function(e){return t.selectTemplate({})}}},[t._v(t._s(a.name))])]}},{key:"body",fn:function(){return[n("b-row",[n("b-col",{attrs:{cols:"2"}},[n("b-list-group",[n("b-list-group-item",[n("span",{staticClass:"font-weight-bold text-md"},[t._v("Languages")])]),t._l(t.templates,(function(e){return n("b-list-group-item",{key:e.lang,class:{"bg-teal-100":e.lang==t.template.lang},attrs:{pointer:""},on:{click:function(n){return t.selectTemplate(e)}}},[n("my-status",{model:{value:e.template.status,callback:function(n){t.$set(e.template,"status",n)},expression:"temp.template.status"}}),t._v("\n                             \n                            "),n("my-text",{attrs:{options:"data:languages",value:e.lang,optionKey:"waba"}})],1)})),n("b-list-group-item",[n("my-v-select",{staticStyle:{"min-width":"50px",width:"100%"},attrs:{options:"data:languages",placeholder:"Add language",optionKey:"waba",filterable:"",searchable:"",filter:{waba:!0}},model:{value:t.newLanguage,callback:function(e){t.newLanguage=e},expression:"newLanguage"}})],1)],2)],1),n("b-col",{attrs:{cols:"7"}},[n("validation-observer",{ref:"templateStructure",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.handleSubmit;return[n("b-form",{attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),a(t.onSubmit)}}},[n("b-card",{attrs:{"no-body":""},scopedSlots:t._u([{key:"header",fn:function(){return[n("span",{staticClass:"font-weight-bold text-md"},[n("my-text",{attrs:{options:"data:languages",value:t.template.lang,optionKey:"waba"}}),t._v(" Message content\n                            ")],1),t._v("  \n                            "),t.template.template.status?t._e():n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete Unsaved template",expression:"'Delete Unsaved template'"}],staticClass:"text-danger text-left",attrs:{pointer:""},on:{click:function(e){return t.onDelete(t.template)}}},[n("i",{staticClass:"fa fa-trash"})]),n("my-status",{staticClass:"float-right",model:{value:t.template.template.status,callback:function(e){t.$set(t.template.template,"status",e)},expression:"template.template.status"}},[t._v(" "+t._s(t.template.template.status||"unsaved"))])]},proxy:!0}],null,!0)},[n("b-card-body",{staticClass:"border-bottom"},[n("b-card-title",[n("h5",{staticClass:"font-weight-bold text-lg"},[t._v("Header "),n("b-badge",{staticClass:"text-xs bg-greyish text-dark",attrs:{variant:"dark"}},[t._v("optional")])],1)]),n("b-card-sub-title",{staticClass:"mb-2 text-sm"},[t._v("\n                                Add a title or choose which type of media you'll use for this header.")]),n("b-card-text",[n("my-v-select",{attrs:{emptyDisplay:"None",selectDefault:!0,clearable:!1,disabled:t.nonEditable,options:"data:waba/message_types"},model:{value:t.templateSimple.header.format,callback:function(e){t.$set(t.templateSimple.header,"format",e)},expression:"templateSimple.header.format"}}),"TEXT"==t.templateSimple.header.format?n("base-input",{attrs:{prelabel:"",name:"Header Text",disabled:t.nonEditable,textLimit:60,required:"",rules:"required|max:60|HBNumVar:*,0,1",helpMessage:"Your title can include only one variable"},model:{value:t.templateSimple.header.text,callback:function(e){t.$set(t.templateSimple.header,"text",e)},expression:"templateSimple.header.text"}}):t._e()],1)],1),n("b-card-body",{staticClass:"border-bottom"},[n("b-card-title",[n("h5",{staticClass:"font-weight-bold text-lg"},[t._v("Body")])]),n("b-card-sub-title",{staticClass:"mb-2 text-sm"},[t._v("\n                                Enter the text for your message in the language you've selected.\n                            ")]),n("b-card-text",[n("base-text-area",{attrs:{disabled:t.nonEditable,placeholder:"Type here",rules:"required|max:1024",rows:"10",textLimit:1024},model:{value:t.templateBody.text,callback:function(e){t.$set(t.templateBody,"text",e)},expression:"templateBody.text"}})],1)],1),n("b-card-body",{staticClass:"border-bottom"},[n("b-card-title",[n("h5",{staticClass:"font-weight-bold text-lg"},[t._v("Footer "),n("b-badge",{staticClass:"text-xs bg-greyish text-dark",attrs:{variant:"dark"}},[t._v("optional")])],1)]),n("b-card-sub-title",{staticClass:"mb-2 text-sm"},[t._v("\n                                Add a short line of text to the bottom of your message template.")]),n("b-card-text",[n("base-input",{attrs:{disabled:t.nonEditable,textLimit:60,rules:"max:60"},model:{value:t.templateFooter.text,callback:function(e){t.$set(t.templateFooter,"text",e)},expression:"templateFooter.text"}})],1)],1),n("b-card-body",{staticClass:"border-bottom"},[n("b-card-title",{staticClass:"d-flex"},[n("div",{staticClass:"flex-grow-1"},[n("h5",{staticClass:"font-weight-bold text-lg"},[t._v("Buttons   "),n("b-badge",{staticClass:"text-xs bg-greyish text-dark",attrs:{variant:"dark"}},[t._v("optional")])],1)]),t.nonEditable?t._e():n("b-button-group",{staticClass:"d-block",attrs:{size:"xs",variant:"outline-dark"}},[n("b-button",{attrs:{size:"xs",variant:"outline-dark",disabled:!t.canAddButton},on:{click:function(e){return t.addButton("QUICK_REPLY")}}},[t._v("+ Button")]),n("b-button",{attrs:{size:"xs",variant:"outline-dark",disabled:!t.canAddLink},on:{click:function(e){return t.addButton("URL")}}},[t._v("+ Link")]),n("b-button",{attrs:{size:"xs",variant:"outline-dark",disabled:!t.canAddPhone},on:{click:function(e){return t.addButton("PHONE_NUMBER")}}},[t._v("+ Call Button")])],1)],1),n("b-card-sub-title",{staticClass:"mb-2 text-sm"},[t._v("\n                                Create buttons that let customers respond to your message or take action.")]),n("b-card-text",[n("b-list-group",{attrs:{flush:""}},t._l(t.templateSimple.buttons.buttons,(function(e,a){return n("b-list-group-item",{key:"btn-"+a,staticClass:"bg-greyish border b-list-group-item-button"},[t.nonEditable?t._e():n("div",{staticClass:"text-white float-left bg-grey number-button",attrs:{pointer:""}},[t._v("\n                                           "+t._s(a+1)+"\n                                        ")]),t.nonEditable?t._e():n("div",{staticClass:"text-white float-right bg-greyer delete-button",attrs:{pointer:""},on:{click:function(e){return t.deleteButton(a)}}},[n("i",{staticClass:"fa fa-trash delete-button-icon"})]),"QUICK_REPLY"==e.type?n("base-input",{staticClass:"mb-0",attrs:{disabled:t.nonEditable,prelabel:"",label:"Button Text",textLimit:20,required:"",rules:"required|max:20"},model:{value:e.text,callback:function(n){t.$set(e,"text",n)},expression:"button.text"}}):t._e(),"PHONE_NUMBER"==e.type?n("div",[n("base-input",{staticClass:"mb-0",attrs:{disabled:t.nonEditable,prelabel:"",label:"Button Text",textLimit:20,required:"",rules:"required|max:20"},model:{value:e.text,callback:function(n){t.$set(e,"text",n)},expression:"button.text"}}),n("base-input",{class:"mb-0",attrs:{disabled:t.nonEditable,prelabel:"",name:"Phone Number",textLimit:20,required:"",rules:"required|phone"},model:{value:e.url,callback:function(n){t.$set(e,"url",n)},expression:"button.url"}})],1):t._e(),"URL"==e.type?n("div",[n("base-input",{staticClass:"mb-0",attrs:{disabled:t.nonEditable,prelabel:"",label:"Button Text",textLimit:20,required:"",rules:"required|max:20"},model:{value:e.text,callback:function(n){t.$set(e,"text",n)},expression:"button.text"}}),n("base-input",{class:"mb-0",attrs:{disabled:t.nonEditable,prelabel:"",name:"Link URL",helpMessage:"You can append only one variable at the of url",textLimit:2e3,rules:"required|max:2000|HBNumVar:end,0,1"},model:{value:e.url,callback:function(n){t.$set(e,"url",n)},expression:"button.url"}})],1):t._e()],1)})),1)],1)],1),n("b-card-footer",[t.nonEditable?t._e():n("b-button",{staticClass:"float-right",attrs:{type:"submit",variant:"primary"}},[t._v("Save")])],1)],1)],1)]}}],null,!1,3022996445)})],1),n("b-col",{attrs:{cols:"3"}},[n("template-preview",{attrs:{template:t.templatePreview}})],1)],1)]},proxy:!0}],null,!1,438259909)}):t._e(),t.newItem?n("b-modal",{attrs:{id:t.modelName,title:(t.newItem.id?"Edit":"Add")+" Template "},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[n("div",{staticClass:"position-relative form-group"},[n("button",{staticClass:"form-control btn btn-primary",attrs:{disabled:!t.isValidNewItem},on:{click:t.createItem}},[t._v("Create")])])]},proxy:!0}],null,!1,67083204)},[n("ValidationObserver",{ref:"form",staticClass:"my-normalize-v2"},[n("div",{staticClass:"form-group"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("label",{attrs:{for:"examplePassword"}},[t._v("Message Category")]),n("my-v-select",{staticClass:"text-lg text-grey",staticStyle:{"min-width":"200px",width:"100%"},attrs:{options:"data:waba/message_categories",placeholder:"Select Message Category",filterable:"",searchable:""},model:{value:t.newItem.category,callback:function(e){t.$set(t.newItem,"category",e)},expression:"newItem.category"}}),n("span",{staticClass:"v-input-error"},[t._v(t._s(e.errors[0]))])]}}],null,!1,579382021)})],1),n("base-input",{staticClass:"mb-0",attrs:{disabled:t.nonEditable,label:"Template Name",textLimit:512,required:"",rules:"required|min:4|max:512"},model:{value:t.newItem.name,callback:function(e){t.$set(t.newItem,"name",e)},expression:"newItem.name"}}),n("div",{staticClass:"form-group"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("label",{attrs:{for:"examplePassword"}},[t._v("Message Language")]),n("my-v-select",{staticClass:"text-lg text-grey",staticStyle:{"min-width":"50px",width:"100%"},attrs:{options:"data:languages",placeholder:"Select Message Language",optionKey:"waba",filterable:"",searchable:"",filter:{waba:!0}},model:{value:t.newItem.lang,callback:function(e){t.$set(t.newItem,"lang",e)},expression:"newItem.lang"}}),n("span",{staticClass:"v-input-error"},[t._v(t._s(e.errors[0]))])]}}],null,!1,18492161)})],1)],1)],1):t._e()],1)},s=[],i=(n("96cf"),n("3b8d")),l=(n("a481"),n("7f7f"),n("2f9b")),r=n("7f14"),o=n("594a"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("my-v-select",t._b({attrs:{type:"text"}},"my-v-select",t.$attrs,!1))},u=[],p=n("2eb3"),d={components:{MyVSelect:p["a"]}},m=d,f=n("2877"),h=Object(f["a"])(m,c,u,!1,null,null,null),b=h.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("i",{staticClass:"fa fa-circle",class:{"text-success":"approved"==t.value,"text-danger":"rejected"==t.value,"text-warning":"submitted"==t.value}}),t._t("default")],2)},g=[],y={props:{value:{}}},x=y,w=Object(f["a"])(x,v,g,!1,null,null,null),_=w.exports,C=n("2051"),S=n("1675");function k(t){return{channelId:t.channelId,code:t.code,lang:t.lang,category:t.category,contactType:t.contactType,channelType:t.channelType,template:{name:t.code,language:t.lang,category:t.category,components:[{type:"BODY",text:null},{type:"HEADER",format:null},{type:"FOOTER",text:null},{type:"BUTTONS",buttons:[]}]}}}function I(){return{header:{type:null,text:null},body:{text:null},footer:{text:null},buttons:{type:"None",urlType:"STATIC",buttons:[]}}}var T=n("de0d"),O=n("88b4"),$=n("b012"),E=n.n($),j={components:{MasterView:l["a"],MyChannelSelect:r["a"],MyHSMTmplSelect:o["a"],MyText:b,MyVSelect:p["a"],BaseTextArea:C["a"],BaseInput:S["a"],BaseSelect:T["a"],TemplatePreview:O["a"],MyStatus:_},data:function(){return{filters:[{name:"sync",label:"Sync",value:!1},{label:"Select Account",name:"channelId",type:"lane",value:""}],table:{fields:[{key:"template_code",label:"Template Code/Name",sortable:!0},{key:"template.category",label:"Category",sortable:!0},{key:"template.status",label:"Status",sortable:!0},{key:"template.language",label:"Language"},{key:"row_actions",label:"Linked HSM Template"}],tableClass:"text-sm",items:[],perPage:25,currentPage:1,rows:0,api:"api/tmpl/hsm/waba_templates"},modelName:"MODAL_WABA_TEMPLATE",modalInputs:[],oldHash:null,model:{channelId:""},template:k({}),templateSimple:I(),templates:[],newLanguage:null,newItem:{}}},computed:{items:function(){return this.$store.getters.StateAgents},teams:function(){return this.$store.getters.StateTeams},isValidNewItem:function(){return this.newItem.category&&this.newItem.name},templateBody:function(){return this.template.template.components.filter((function(t){return"BODY"==t.type}))[0]||{}},templateFooter:function(){return this.template.template.components.filter((function(t){return"FOOTER"==t.type}))[0]||{}},canAddButton:function(){var t,e;return null===(t=this.templateSimple)||void 0===t||null===(e=t.buttons)||void 0===e||!e.buttons||this.templateSimple.buttons.buttons.length<3&&!this.templateSimple.buttons.buttons.some((function(t){return"QUICK_REPLY"!==t.type}))},canAddLink:function(){var t,e;return null===(t=this.templateSimple)||void 0===t||null===(e=t.buttons)||void 0===e||!e.buttons||this.templateSimple.buttons.buttons.length<2&&!this.templateSimple.buttons.buttons.some((function(t){return"URL"===t.type||"QUICK_REPLY"===t.type}))},canAddPhone:function(){var t,e;return null===(t=this.templateSimple)||void 0===t||null===(e=t.buttons)||void 0===e||!e.buttons||this.templateSimple.buttons.buttons.length<2&&!this.templateSimple.buttons.buttons.some((function(t){return"PHONE_NUMBER"===t.type||"QUICK_REPLY"===t.type}))},nonEditable:function(){var t,e;return!(null===(t=this.template)||void 0===t||null===(e=t.template)||void 0===e||!e.status)},templatePreview:function(){var t,e;return{template:this.templateSimple.body.text,title:"TEXT"==this.templateSimple.header.format?this.templateSimple.header.text:null,attachments:["IMAGE","VIDEO","DOCUMENT"].indexOf(this.templateSimple.header.format)>-1?[{mediaType:this.templateSimple.header.format}]:null,options:{buttons:((null===(t=this.templateSimple)||void 0===t||null===(e=t.buttons)||void 0===e?void 0:e.buttons)||[]).map((function(t){return{label:t.text}}))}}}},watch:{newLanguage:function(t,e){console.log("watch.newLanguage",t,e),this.addTemplate(t)},"$route.params.channelId":function(){this.onLoad()},"newItem.name":function(){this.newItem.name=this.newItem.name.replace(" ","_").toUpperCase().replace(/[^A-Za-z0-9_]/g,"")}},mounted:function(){this.onLoad()},methods:{onLoad:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$route.params.channelId?this.filters[1].value=this.$route.params.channelId:this.template={};case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),createItem:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.form.validate();case 2:e=t.sent,!0===e&&(this.selectTemplate({channelId:this.filters[1].value,code:this.newItem.name,category:this.newItem.category,lang:this.newItem.lang}),this.addTemplate(this.newItem.lang),this.$refs.form.reset(),this.$bvModal.hide(this.modelName));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onSubmit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$service.post("/api/tmpl/hsm/waba_templates",{category:this.template.template.category,language:this.template.template.language,name:this.template.template.name,components:this.template.template.components.filter((function(t){return!(!t.type&&"NONE"==t.type||"HEADER"==t.type&&!t.format||"FOOTER"==t.type&&!t.text||!("BUTTONS"!=t.type||t.buttons&&t.buttons.length))}))},{params:{channelId:this.template.channelId}});case 3:e=t.sent,console.log("resp",e),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("error",t.t0.response.data),this.$refs.templateStructure.setErrors(t.t0.response.data.veeErrors);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),onAction:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:switch(e.name){case"ADD_ITEM":default:console.log("NoMapping",e)}case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),onChange:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("hsmTemplateId"!=n){t.next=3;break}return t.next=3,this.$service.submit("api/tmpl/hsm/link",{templateId:e.id,hsmTemplateId:e.hsmTemplateId});case 3:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),refreshSelectedTemplates:function(){var t=this;this.templates=this.$refs.templatesView.getItems().filter((function(e){return e.code==t.template.code}))},selectTemplate:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.template=e,this.templateSimple=I(),this.template&&this.template.template&&this.template.template.components&&(n=this.templateSimple,this.template.template.components.map((function(t){"HEADER"==t.type?n.header=t:"BODY"==t.type?n.body=t:"FOOTER"==t.type?n.footer=t:"BUTTONS"==t.type&&(n.buttons=t)}))),this.refreshSelectedTemplates();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onRows:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$route.params.channelId&&this.$route.params.code&&this.$route.params.lang&&(console.log("rows",e),n=e.filter((function(t){return t.channelId==a.$route.params.channelId&&t.code==a.$route.params.code&&t.lang==a.$route.params.lang}))[0],n&&this.selectTemplate(n));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),addTemplate:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:this.fixit(),n=this.templates.filter((function(t){return t.lang==e}))[0],n||(n=k(Object.assign({},this.template,{lang:e})),this.$refs.templatesView.getItems().push(n)),n&&this.selectTemplate(n);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onDelete:function(t){var e=this.$refs.templatesView.getItems();for(var n in e){var a=e[n];if(a.channelId==t.channelId&&a.code==t.code&&a.lang==t.lang){e.splice(n,1),this.refreshSelectedTemplates(),this.templates[0]?this.selectTemplate(this.templates[0]):this.selectTemplate({});break}}},addButton:function(t){this.templateSimple.buttons.buttons||(this.template.template.buttons=[],this.templateSimple.buttons.buttons=this.template.template.buttons),this.templateSimple.buttons.buttons.push({type:t})},deleteButton:function(t){this.templateSimple.buttons.buttons.splice(t,1)},fixit:E()((function(t){this.newLanguage=null}))}},M=j,P=(n("cd69"),Object(f["a"])(M,a,s,!1,null,null,null));e["default"]=P.exports}}]);