(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25a713bc"],{"183a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("b-row",[t("b-col",[t("b-card",{staticClass:"styler-20-80",attrs:{header:"Reset Key"}},[e.iCompany?t("b-row",{attrs:{slot:"header","align-v":"center"},slot:"header"},[t("b-col",{attrs:{cols:"4"}},[t("base-select",{attrs:{size:"sm",options:e.companies.map((function(e){return{id:e.companyId,label:e.company.displayName}}))},model:{value:e.iCompany.companyId,callback:function(t){e.$set(e.iCompany,"companyId",t)},expression:"iCompany.companyId"}})],1),t("b-col",{staticClass:"text-right",attrs:{cols:"8"}},[t("b-button",{staticClass:"btn btn-sm btn-outline-oa-blue",attrs:{to:"/app/"}},[e._v("\n              Cancel\n          ")])],1)],1):e._e(),t("base-input",{attrs:{variant:"outline-oa-blue",label:"From",layout:"flushed",prelabel:"",readonly:""},model:{value:e.company.displayName,callback:function(t){e.$set(e.company,"displayName",t)},expression:"company.displayName"}}),t("base-input",{attrs:{variant:"outline-oa-blue",label:"OrgId",layout:"flushed",prelabel:"",readonly:""},model:{value:e.company.companyId,callback:function(t){e.$set(e.company,"companyId",t)},expression:"company.companyId"}}),t("base-input",{attrs:{variant:"outline-oa-blue",label:"API Id",layout:"flushed",prelabel:"",readonly:"",copy:""},model:{value:e.api.id,callback:function(t){e.$set(e.api,"id",t)},expression:"api.id"}}),t("base-input",{attrs:{variant:"outline-oa-blue",label:"APIKey",prelabel:"",copy:"",readonly:""},scopedSlots:e._u([{key:"actions",fn:function(){return[t("b-button",{staticClass:"w-20",attrs:{variant:"outline-oa-blue"},on:{click:e.resetKey}},[e._v("\n                    Reset")])]},proxy:!0}]),model:{value:e.visibleApiKey,callback:function(t){e.visibleApiKey=t},expression:"visibleApiKey"}})],1)],1),t("b-col",{attrs:{hidden:""}})],1)],1)},s=[],r=(n("96cf"),n("3b8d")),i=n("bd86"),o=n("1675"),c=n("5deb"),p=function(){var e=this,t=e._self._c;return t("div",[e.deviceToken?t("b-card",{attrs:{header:"Messages"}},[t("ul",{staticClass:"list-unstyled"},e._l(e.validMessages,(function(n){return t("b-media",{key:n.noteId,staticClass:"m-1",attrs:{tag:"li"},scopedSlots:e._u([{key:"aside",fn:function(){return[t("b-img",{staticClass:"mr-2",attrs:{blank:"","blank-color":"#abc",width:"64",alt:"placeholder"}})]},proxy:!0}],null,!0)},[t("h5",{staticClass:"mt-0 mb-1"},[e._v(e._s(n.otp))]),t("p",{staticClass:"mb-0"},[t("i",{staticClass:"bi bi-stopwatch"}),e._v("\n              "+e._s(n.domain)+" : "+e._s(n.title)+"\n            ")]),t("b-progress",{attrs:{value:n.life,height:"3px",variant:"blue"}})],1)})),1)]):e.otpPrefix&&e.otpNounce?t("b-card",{attrs:{header:"Sign Up - Verify"}},[t("base-input",{key:"signup.otp",attrs:{label:e.otpPrefix,placeholder:"Enter OTP",prelabel:""},scopedSlots:e._u([{key:"append",fn:function(){return[t("span",{attrs:{type:"primary",pointer:""},on:{click:e.login}},[e._v("Verify")])]},proxy:!0}]),model:{value:e.otp,callback:function(t){e.otp=t},expression:"otp"}})],1):t("b-card",{attrs:{header:"Sign Up - Enter Phone"}},[t("base-input",{key:"signup.phone",attrs:{label:"Phone No",prelabel:""},scopedSlots:e._u([{key:"append",fn:function(){return[t("span",{attrs:{type:"primary",pointer:""},on:{click:e.login}},[e._v("Send")])]},proxy:!0}]),model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),t("b-card",[e.error?t("pre",{staticClass:"text-red"},[e._v(e._s(e.error)+"\n")]):e._e(),t("pre",[e._v("  DeviceId : "+e._s(e.deviceId)+"\n  Phone : "+e._s(e.phone)+"\n  Nounce : "+e._s(e.otpNounce)+"\n  Prefix : "+e._s(e.otpPrefix)+"\n  DeviceToken : "+e._s(e.deviceToken)+"\n      ")])])],1)},l=[],u=n("75fc"),d=n("e3ce"),h={data:function(){return{navbarOpen:!1,deviceId:"",phone:"",domain:"",otp:"",title:"",otpPrefix:"",otpNounce:"",deviceToken:"",error:"",messages:[]}},computed:{validMessages:function(){return this.messages.filter((function(e){var t=e.expiredAt.stamp-e.createdAt.stamp,n=e.expiredAt.stamp-Date.now();return e.life=n/t*100,e.life>0}))}},mounted:function(){var e=this;this.$global.Event.fp(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.deviceId=n,t.next=3,e.reloadCreds();case 3:return t.next=5,e.login();case 5:return t.next=7,e.fetchMessage();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},methods:{reloadCreds:function(){var e,t;this.phone=null===(e=this.$store.getters.local)||void 0===e||null===(t=e.notp)||void 0===t?void 0:t.phone,this.deviceToken=this.$service.localStorage.get("deviceToken")},login:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.phone){e.next=2;break}return e.abrupt("return");case 2:return this.$service.store("notp","phone",this.phone),this.error=null,e.prev=4,e.next=7,this.$service.post("/notp/api/v1/login",{deviceId:this.deviceId,phone:this.phone,deviceToken:this.deviceToken,otpNounce:this.otpNounce,otp:this.otp,title:this.title});case 7:t=e.sent,n=t.meta,t.results,console.log("meta==",n),n.otpPrefix&&n.otpNounce?(this.otpPrefix=n.otpPrefix,this.otpNounce=n.otpNounce):n.deviceToken&&(this.$service.localStorage.set("deviceToken",n.deviceToken),this.reloadCreds(),this.fetchMessage()),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),this.error="".concat(e.t0.response.data.status," ").concat(e.t0.response.data.statusKey);case 17:case"end":return e.stop()}}),e,this,[[4,14]])})));function t(){return e.apply(this,arguments)}return t}(),fetchMessage:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.reloadCreds(),this.deviceToken){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.$service.post("/notp/api/v1/messages/fetch",{deviceId:this.deviceId,phone:this.phone,deviceToken:this.deviceToken});case 5:t=e.sent,t.meta,n=t.results,this.messages=[].concat(Object(u["a"])(this.messages),Object(u["a"])(n)),setTimeout((function(){return a.fetchMessage()}),300);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},components:{BaseInput:o["default"],BaseButton:c["a"],ProfileApp:d["a"]}},m=h,v=n("2877"),f=Object(v["a"])(m,p,l,!1,null,null,null),b=f.exports,y=n("853d"),g={mixins:[y["a"]],data:function(){return Object(i["a"])({visibleApiKey:"*****************",navbarOpen:!1,domain:"demo",otp:"",title:"Login",apiKey:"*****************",validity:60},"otp",321654)},computed:{api:function(){var e;return(null===(e=this.iCompany)||void 0===e?void 0:e.api)||{id:"",key:"*****************"}},company:function(){return this.iCompany||{apiKey:"*****************"}}},mounted:function(){this.loadBasic()},methods:{refresh:function(){var e,t;null===(e=this.$store.getters.local)||void 0===e||null===(t=e.notp)||void 0===t||t.phone},resetKey:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.submit("/panel/api/v1/company/key",{companyId:this.company.companyId});case 2:t=e.sent,this.api.id=t.results[0].id,this.visibleApiKey=t.meta;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},components:{BaseInput:o["default"],BaseButton:c["a"],DemoReciever:b}},k=g,x=Object(v["a"])(k,a,s,!1,null,null,null);t["default"]=x.exports},"853d":function(e,t,n){"use strict";n("96cf");var a=n("3b8d");t["a"]={data:function(){return{basic:{isSelectDefaultCompanyEnabled:!1,isLoading:!1}}},computed:{companies:function(){return this.$store.getters.StateRest.PanelApiV1Companys},iCompany:function(){if(!this.$route.params.orgId)return null;for(var e in this.companies){var t=this.companies[e];if(t.company.companyId==this.$route.params.orgId)return t.company}}},watch:{"$route.params.orgId":function(){this.basic.isSelectDefaultCompanyEnabled&&this.selectDefaultCompany()}},methods:{loadBasic:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.basic.isLoding=!0,e.prev=1,e.next=4,this.$service.getX("/panel/api/v1/companys");case 4:return e.abrupt("return",e.sent);case 5:return e.prev=5,this.basic.isLoding=!1,e.finish(5);case 8:case"end":return e.stop()}}),e,this,[[1,,5,8]])})));function t(){return e.apply(this,arguments)}return t}(),selectDefaultCompany:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadBasic();case 2:0==this.$route.params.orgId&&this.$router.push({params:{orgId:this.companies[0].companyId}}),this.basic.isSelectDefaultCompanyEnabled=!0;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}}}}]);