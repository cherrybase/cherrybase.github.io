(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21563ba8"],{1027:function(e,t,n){},"1af6":function(e,t,n){var a=n("63b6");a(a.S,"Array",{isArray:n("9003")})},"20fd":function(e,t,n){"use strict";var a=n("d9f6"),s=n("aebd");e.exports=function(e,t,n){t in e?a.f(e,t,s(0,n)):e[t]=n}},"549b":function(e,t,n){"use strict";var a=n("d864"),s=n("63b6"),r=n("241e"),i=n("b0dc"),o=n("3702"),c=n("b447"),l=n("20fd"),u=n("7cd6");s(s.S+s.F*!n("4ee1")((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,s,p,d=r(e),f="function"==typeof this?this:Array,m=arguments.length,v=m>1?arguments[1]:void 0,b=void 0!==v,h=0,y=u(d);if(b&&(v=a(v,m>2?arguments[2]:void 0,2)),void 0==y||f==Array&&o(y))for(t=c(d.length),n=new f(t);t>h;h++)l(n,h,b?v(d[h],h):d[h]);else for(p=y.call(d),n=new f;!(s=p.next()).done;h++)l(n,h,b?i(p,v,[s.value,h],!0):s.value);return n.length=h,n}})},6704:function(e,t,n){"use strict";n("7907")},"75fc":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n("a745"),s=n.n(a);function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function i(e){if(s()(e))return r(e)}var o=n("67bb"),c=n.n(o),l=n("5d58"),u=n.n(l),p=n("774e"),d=n.n(p);function f(e){if("undefined"!==typeof c.a&&null!=e[u.a]||null!=e["@@iterator"])return d()(e)}function m(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?d()(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e){return i(e)||f(e)||m(e)||v()}},"774e":function(e,t,n){e.exports=n("d2d5")},7907:function(e,t,n){},a745:function(e,t,n){e.exports=n("f410")},b82a:function(e,t,n){"use strict";n("1027")},d2d5:function(e,t,n){n("1654"),n("549b"),e.exports=n("584a").Array.from},e740:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("page-title",{attrs:{heading:e.heading,subheading:e.subheading,icon:e.icon,actions:e.actions},on:{action:e.onAction}}),n("ValidationObserver",{ref:"session_form",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.invalid;return[n("div",{staticClass:"row"},[n("b-card",{staticClass:"col-md-4"},[n("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required",tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("label",[e._v("Account Details")]),n("v-select",{staticClass:"w-100",attrs:{options:e.input.lane.values,searchable:!1,clearable:!1,placeholder:"Select Account"},scopedSlots:e._u([{key:"selected-option",fn:function(t){return[n("div",{staticClass:"user_assignment-selected"},[n("span",{staticClass:"contact_type fab",class:e.MyDict.social[t.contactType]}),e._v("  "+e._s(t.lane))])]}},{key:"open-indicator",fn:function(t){var a=t.attributes;return[n("span",e._b({staticClass:"fa fa-caret-down"},"span",a,!1))]}},{key:"option",fn:function(t){var a=t.contactType,s=t.lane;return[n("span",{staticClass:"contact_type fab",class:e.MyDict.social[a]}),e._v("  "+e._s(s)+"\n                              ")]}}],null,!0),model:{value:e.input.lane.selected,callback:function(t){e.$set(e.input.lane,"selected",t)},expression:"input.lane.selected"}})]}}],null,!0)}),n("br"),n("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required|phoneML",vid:"input_contact_number",name:"Contact Number",mode:"lazy"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("label",[e._v("Contacts")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.input.contacts,expression:"input.contacts"}],staticClass:"form-control",attrs:{rows:"10"},domProps:{value:e.input.contacts},on:{input:function(t){t.target.composing||e.$set(e.input,"contacts",t.target.value)}}}),n("span",{staticClass:"v-input-error"},[e._v(e._s(t.errors[0]))])]}}],null,!0)})],1),n("b-card",{staticClass:"col-md-4 session-list"},[n("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required",tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("label",[e._v("Template")]),n("v-select",{staticClass:"w-100",attrs:{options:e.input.templates.values,searchable:!1,clearable:!1,placeholder:"Select Account"},scopedSlots:e._u([{key:"selected-option",fn:function(t){return[e._v("\n                                  "+e._s(t.name)+"    \n                              ")]}},{key:"open-indicator",fn:function(t){var a=t.attributes;return[n("span",e._b({staticClass:"fa fa-caret-down"},"span",a,!1))]}},{key:"option",fn:function(t){var a=t.category,s=t.name;return[n("small",{},[e._v(e._s(a))]),e._v("   "+e._s(s)+"\n                              ")]}}],null,!0),model:{value:e.input.templates.selected,callback:function(t){e.$set(e.input.templates,"selected",t)},expression:"input.templates.selected"}})]}}],null,!0)}),n("br"),n("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required|phone",vid:"input_contact_number",name:"Contact Number"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("label",[e._v("Message Preview")]),e.input.templates.selected?n("TemplatePreview",{attrs:{template:e.input.templates.selected}}):e._e(),n("span",{staticClass:"v-input-error"},[e._v(e._s(t.errors[0]))])]}}],null,!0)}),n("br"),n("b-form-row",[n("button",{staticClass:"form-control btn btn-primary",attrs:{name:"password",id:"examplePassword",disabled:a},on:{click:e.sendBulk}},[e._v("Send")])])],1)],1)]}}])})],1)},s=[],r=(n("4917"),n("7f7f"),n("96cf"),n("3b8d")),i=(n("28a5"),n("88b4")),o=n("d166"),c=n("3ef3"),l=n("e492"),u=n("9dbb"),p=n.n(u),d=n("ecee"),f=n("c074"),m=n("ad3d"),v=n("4a7a"),b=n.n(v);n("6dfc");function h(){return{code:"",dept_email:"",id:null,name:""}}d["c"].add(f["B"],f["A"],f["r"]);var y={contact:{name:"John Doe",phone:"919876543210",email:"John.Doe@company.com"}},_={components:{PageTitle:l["a"],"font-awesome-icon":m["a"],vSelect:b.a,TemplatePreview:i["a"]},data:function(){return{MyFlags:o["c"],MyDict:o["b"],MyConst:o["a"],heading:"Send Bulk",subheading:"Send bulk Messages to conatcts",icon:"pe-7s-chat icon-gradient bg-tempting-azure fa fa-file-import",actions:[{label:"View Past Jobs",name:"BULK_PUSH_JOBS",link:"/app/moderate/bulk-push-jobs",type:"link"}],input:{lane:{values:[],selected:[],sender:""},templates:{values:[],selected:null,sender:""},contacts:""},table:{fields:[{key:"actions",label:"Action"},{key:"startSessionStamp",label:"Start@"},{key:"closeSessionStamp",label:"Closed@"}],items:[],perPage:25,currentPage:1,rows:0},meta:{sender:null,contact:null,contactMobile:null,contactName:null,lane:null},newItem:h(),modelName:"MODAL_ADD_TEAM",sample:y}},computed:{preview:function(e){if(!this.input.templates.selected||!this.input.templates.selected.template)return{preview:"",text:""};var t=this.input.templates.selected.template.split("---options---");return{text:p.a.render(t[0],this.sample),options:c["a"].message_form_options(c["a"].map_from_string(t[1]))}}},created:function(e){this.loadLanes(),this.loadTemplates()},methods:{loadLanes:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.get("/api/options/channels");case 2:t=e.sent,this.input.lane.values=t.results.filter((function(e){return"WHATSAPP"==e.contactType}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadTemplates:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.get("/api/tmpl/pushtemplate");case 2:t=e.sent,this.input.templates.values=t.results;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onAction:function(e){switch(e.name){case"IMPORT_CHAT":this.$refs.file.click();break;case"EDIT_ITEM":this.oldHash=JSON.stringify(this.newItem),this.$bvModal.show(this.modelName),console.log("ADD_ITEM",e);break;case"CANCEL":this.$bvModal.hide(this.modelName);break;default:console.log("NoMapping",e)}},sendBulk:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.post("/api/message/bulk/push/send",{message:this.preview.text,subject:this.input.lane.selected.title,templateId:this.input.templates.selected.id,contact:{contactType:this.input.lane.selected.contactType,lane:this.input.lane.selected.lane,channel:this.input.lane.selected.channel},to:this.input.contacts.match(/[^\r\n\,]+/g).map((function(e){return e.trim()})).filter((function(e){return!!e}))});case 2:e.sent,this.$router.push("/app/moderate/bulk-push-jobs");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},g=_,w=(n("6704"),n("b82a"),n("2877")),k=Object(w["a"])(g,a,s,!1,null,"aa3a184a",null);t["default"]=k.exports},f410:function(e,t,n){n("1af6"),e.exports=n("584a").Array.isArray}}]);