(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c349ca0"],{"02fc":function(t,e,n){"use strict";n("3170")},"2f9b":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("page-title",{ref:"pageTitle",attrs:{heading:t.header.heading,icon:t.header.icon,actions:t.actions,filters:t.filters,subheading:t.header.subheading},on:{action:t.onActionINT},scopedSlots:t._u([t._l(Object.keys(t.$scopedSlots),(function(e){return{key:e,fn:function(n){return[t._t(e,null,null,Object.assign({},{apply:t.apply},n))]}}})),{key:"subheading",fn:function(){return[t._t("header-subheading",(function(){return[t._v("\n              "+t._s(t.header.subheading)+"      \n          ")]}))]},proxy:!0}],null,!0)}),t.table?n("b-table",{attrs:{id:"agent-session-list",striped:!0,bordered:!0,outlined:!1,small:!0,hover:!0,dark:!1,fixed:!1,"foot-clone":!1,"per-page":t.table.perPage,"current-page":t.table.currentPage,items:t.table.items,fields:t.table.fields},scopedSlots:t._u([t._l(Object.keys(t.$scopedSlots),(function(e){return{key:e,fn:function(n){return[t._t(e,null,null,n)]}}}))],null,!0)}):t._e(),t.table?n("b-pagination",{attrs:{"total-rows":t.table.rows,"per-page":t.table.perPage,"aria-controls":"agent-session-list"},model:{value:t.table.currentPage,callback:function(e){t.$set(t.table,"currentPage",e)},expression:"table.currentPage"}}):t._e()],1)},s=[],i=(n("7f7f"),n("96cf"),n("3b8d")),r=n("e492"),o=n("d166"),c={components:{PageTitle:r["a"]},props:{header:{type:Object},actions:{type:Array,default:function(){return[]}},filters:{type:Array,default:function(){return[]}},daterange:{type:Object},table:{type:Object},autoApply:{type:Boolean,default:!0},actionShow:{type:Object,default:function(){return{message:"hello"}}}},data:function(){return{MyFlags:o["c"],MyDict:o["b"],MyConst:o["a"],input:{daterange:{hidden:!0,startDate:null,endDate:null}},session:null}},mounted:function(t){this.autoApply&&this.getItems()},methods:{getItems:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,a,s,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a in n={},this.actions)console.log("actions",a,this.actions[a]),s=this.actions[a].param||this.actions[a].type,n[s]=this.getInput(s);for(a in this.filters)s=this.filters[a].name||this.filters[a].param||this.filters[a].type,n[s]=this.filters[a].value;for(i in e)n[i]=e[i];if(!this.table||!this.table.api){t.next=12;break}return t.next=7,this.$service.get(this.table.api,n);case 7:r=t.sent,this.table.items=r.results,this.table.rows=this.table.items.length,this.session=r.meta,console.log("sessions",r,this.table);case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),apply:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.getItems();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onActionINT:function(t){switch(console.log("onAction",t),t.type){case"apply":this.getItems();break;default:this.$emit("action",t)}},getInput:function(t){return this.$refs.pageTitle.getInput(t)}}},l=c,u=n("2877"),p=Object(u["a"])(l,a,s,!1,null,"5ba92127",null);e["a"]=p.exports},3170:function(t,e,n){},da41:function(t,e,n){},e492:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-page-title"},[n("div",{staticClass:"page-title-wrapper"},[n("div",{staticClass:"page-title-heading"},[n("div",{staticClass:"page-title-icon"},[n("i",{class:t.icon})]),n("div",[t._v("\n                "+t._s(t.heading)+"\n                "),n("div",{staticClass:"page-title-subheading"},[t._t("subheading",(function(){return[t._v("\n                        "+t._s(t.subheading)+"\n                    ")]}))],2)])]),n("div",{staticClass:"page-title-actions"},[t._l(t.filters,(function(e,a){return n("span",{key:"filter-"+a,staticClass:"filter-wrapper"},[t._t("filter("+e.name+")",(function(){return[e.hidden?t._e():n("span")]}),null,{filter:e})],2)})),t._l(t.actions,(function(e,a){return n("span",{key:"action-"+a,staticClass:"action-wrapper"},[t._t("action("+e.name+")",(function(){return[e.hidden||!1===t.actionShow[e.name]?t._e():n("span",[e.link?n("router-link",{staticClass:"btn-shadow d-inline-flex align-items-center btn",class:{"btn-link":"link"==e.type,"btn-success":!e.type||"button"==e.type},attrs:{tag:"button",to:e.link,type:"button"}},[e.icon?n("i",{staticClass:"mr-2",class:e.icon}):t._e(),t._v("\n                        "+t._s(e.label)+" \n                    ")]):"lane"==e.type?n("div",{staticClass:"d-inline-flex align-items-center",staticStyle:{"min-width":"220px"}},[n("v-select",{staticClass:"w-100",attrs:{options:t.input.lane.options,searchable:!1,clearable:!1,placeholder:"Select Account"},on:{input:function(n){return t.clickAction(e)}},scopedSlots:t._u([{key:"selected-option",fn:function(e){return[n("div",{},[n("span",{staticClass:"contact_type contact_type-24 fab",class:t.MyDict.social[e.contactType]}),t._v("  "+t._s(e.lane))])]}},{key:"open-indicator",fn:function(e){var a=e.attributes;return[n("span",t._b({staticClass:"fa fa-caret-down"},"span",a,!1))]}},{key:"option",fn:function(e){var a=e.contactType,s=e.lane;return[n("span",{staticClass:"contact_type contact_type-24 fab",class:t.MyDict.social[a]}),t._v("  "+t._s(s)+"\n                            ")]}}],null,!0),model:{value:t.input.lane.value,callback:function(e){t.$set(t.input.lane,"value",e)},expression:"input.lane.value"}})],1):"search"==e.type?n("div",{staticClass:"d-inline-flex"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input.search.value,expression:"input.search.value"}],staticClass:"form-control",attrs:{type:"text",name:""},domProps:{value:t.input.search.value},on:{input:function(e){e.target.composing||t.$set(t.input.search,"value",e.target.value)}}})]):"apply"==e.type?n("div",{staticClass:"d-inline-flex"},[n("button",{staticClass:"btn-shadow  align-items-center btn btn-success",on:{click:function(n){return t.clickAction(e)}}},[e.icon?n("i",{class:e.icon}):t._e(),t._v(t._s(e.label))])]):n("div",{staticClass:"d-inline-flex"},[n("button",{staticClass:"btn-shadow  align-items-center btn",class:{"btn-link":"link"==e.type,"btn-success":!e.type||"button"==e.type},on:{click:function(n){return t.clickAction(e)}}},[e.icon?n("i",{staticClass:"mr-2",class:e.icon}):t._e(),t._v("\n                            "+t._s(e.label)+" \n                        ")])])],1)]}),null,{action:e})],2)})),t.dateranegeinput&&!t.dateranegeinput.hidden?n("span",{staticClass:"action-wrapper"},[n("date-range-picker",{attrs:{opens:"left","time-picker":!1,"control-container-class":"reportrange-text btn btn-success",ranges:t.dateranegeinput.ranges},on:{select:t.onDateRangeSelect,update:t.onDateRangeUpdate},scopedSlots:t._u([{key:"input",fn:function(e){return[n("i",{staticClass:"fa fa-calendar-alt"}),t._v(" "+t._s(t._f("date")(e.startDate))+" - "+t._s(t._f("date")(e.endDate))+"\n                ")]}}],null,!1,4282143172),model:{value:t.dateranegeinput.range,callback:function(e){t.$set(t.dateranegeinput,"range",e)},expression:"dateranegeinput.range"}})],1):t._e()],2)]),n("div",{staticStyle:{clear:"both",height:"0px"}})])},s=[],i=(n("7f7f"),n("96cf"),n("3b8d")),r=n("bbf5"),o=n.n(r),c=(n("53b4"),n("2ead"),n("c1df")),l=n.n(c),u=n("4a7a"),p=n.n(u),d=(n("6dfc"),n("d166"));function f(t){return t.hour(0).minute(0).seconds(0).milliseconds(0)}function h(t){return t.hour(23).minute(59).seconds(59).milliseconds(999)}var g={components:{DateRangePicker:o.a,vSelect:p.a},data:function(){var t=this;return{MyFlags:d["c"],MyDict:d["b"],MyConst:d["a"],dateranegeinput:function(){if(!t.daterange)return null;var e=t.daterange.startDate||f(l()().subtract(7,"day")).toDate(),n=t.daterange.endDate||h(l()()).toDate();return{range:{startDate:e,endDate:n},ranges:{Today:[f(l()()).toDate(),h(l()()).toDate()],"Last 7 Days":[f(l()().subtract(7,"day")).toDate(),h(l()()).toDate()],Yesterday:[f(l()().subtract(1,"day")).toDate(),h(l()().subtract(1,"day")).toDate()],"This month":[f(l()().date(1)).toDate(),h(l()()).toDate()],"Last month":[f(l()().subtract(1,"month").date(1)).toDate(),h(l()().date(0)).toDate()],"This year":[f(l()().month(0).date(1)).toDate(),h(l()()).toDate()],"Last year":[f(l()().subtract(1,"year").month(0).date(1)).toDate(),h(l()().month(0).date(0)).toDate()]}}}(),input:{lane:{options:[],value:null,sender:""},search:{value:null},contacts:""}}},computed:{},filters:{date:function(t){return t?t.toLocaleString():""}},created:function(t){this.daterange&&(this.daterange.startDate||(this.daterange.startDate=f(l()()).toDate()),this.daterange.endDate||(this.daterange.endDate=h(l()()).toDate()),this.sanitizeDateRange(this.daterange)),this.loadLanes()},methods:{sanitizeDateRange:function(t){var e=l()(t.startDate),n=l()(t.endDate);return t.startDate=f(e).toDate(),t.endDate=h(n).toDate(),t},loadLanes:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$service.getX("/api/options/channels");case 2:t.sent,this.input.lane.options=this.$store.getters.StateApi.OptionsChannels;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onDateRangeSelect:function(t){console.log("select",t);var e=this.sanitizeDateRange(t);this.dateranegeinput.range.startDate=e.startDate,this.dateranegeinput.range.endDate=e.endDate},onDateRangeUpdate:function(t){console.log("c_update",t),this.daterange&&(this.daterange.startDate=t.startDate,this.daterange.endDate=t.endDate,this.$emit("dateRangeOnUpdate",t))},clickAction:function(t){this.$emit("action",t)},action:function(t,e,n){for(var a in this.actions)if(this.actions[a].name==t){this.actions[a][e]=n;break}},getInput:function(t){var e;return null===(e=this.input[t])||void 0===e?void 0:e.value}},props:{icon:String,heading:String,subheading:String,actions:Array,filters:Array,daterange:{type:Object,default:function(){return null}},actionShow:{type:Object,default:function(){return{message:"hello"}}}}},b=g,m=(n("02fc"),n("fb11"),n("2877")),y=Object(m["a"])(b,a,s,!1,null,null,null);e["a"]=y.exports},e7e2:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("MasterView",{attrs:{header:t.header,actions:t.actions,table:t.table},scopedSlots:t._u([{key:"cell(contact)",fn:function(e){return[n("i",{staticClass:"fab",class:t.MyDict.socialPrefix(e.item.contactType)}),t._v("\n        "+t._s(e.item.name||e.item.csid)+"\n  ")]}},{key:"cell(createdStamp)",fn:function(e){return[t._v("\n        "+t._s(t._f("formatDate")(e.item.createdStamp))+"\n  ")]}},{key:"cell(lastInBoundStamp)",fn:function(e){return[t._v("\n        "+t._s(t._f("formatDate")(e.item.lastInBoundStamp))+"\n  ")]}},{key:"cell(lastOutBoundStamp)",fn:function(e){return[t._v("\n        "+t._s(t._f("formatDate")(e.item.lastOutBoundStamp))+"\n  ")]}}])})],1)},s=[],i=(n("96cf"),n("3b8d")),r=n("2f9b"),o=n("d166"),c={components:{MasterView:r["a"]},data:function(){return{MyFlags:o["c"],MyDict:o["b"],MyConst:o["a"],header:{heading:"Contacts",subheading:"Use filters to search",icon:"pe-7s-chat icon-gradient bg-tempting-azure fa fa-address-book"},actions:[{label:"Search",name:"LANE_SELECT",type:"search",selectFirst:!0},{label:"Select Account",name:"LANE_SELECT",type:"lane",selectFirst:!0},{label:"Search",type:"apply",selectFirst:!0}],input:{daterange:{hidden:!0,startDate:null,endDate:null}},table:{fields:[{key:"contact",label:"Contact"},{key:"phone",label:"Phone"},{key:"email",label:"Email"},{key:"createdStamp",label:"Joined"},{key:"lastInBoundStamp",label:"LastIn"},{key:"lastOutBoundStamp",label:"LastOut"}],items:[],perPage:25,currentPage:1,rows:0,api:"/api/admins/contacts"},session:null}},mounted:function(t){},methods:{getItems:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$service.submit("/api/message/bulk/push/messages",{contactType:"WHATSAPP",bulkSessionId:this.$route.params.bulkSessionId});case 2:e=t.sent,this.table.items=e.results,this.table.rows=this.table.items.length,this.session=e.meta,console.log("sessions",e,this.table);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deleteItem:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("PostRequest",{url:"/api/message/session/import/trash",params:e});case 2:a=t.sent,this.sessions.items=a.results,this.sessions.rows=this.sessions.items.length;case 5:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),hideChat:function(t){this.session=null},showChat:function(t){this.session&&this.session.sessionId==t.sessionId?this.session=null:this.session=t}}},l=c,u=n("2877"),p=Object(u["a"])(l,a,s,!1,null,"414bd8fe",null);e["default"]=p.exports},fb11:function(t,e,n){"use strict";n("da41")}}]);