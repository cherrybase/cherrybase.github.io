(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ea0d671"],{1027:function(e,t,n){},"243c":function(e,t,n){},"2eb3":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"dropdown"==e.type?n("v-select",e._b({staticStyle:{"min-width":"220px"},attrs:{options:e.model.options,filterable:e.filterable,searchable:e.searchable,placeholder:e.placeholder,clearable:e.clearable},on:{search:e.onSearch,input:e.onChange},scopedSlots:e._u([{key:"selected-option",fn:function(t){return[e.selectedPrefixClass?n("span",{class:[e.selectedPrefixClass,"mr-1"]},[e._v(" ")]):e._e(),t.prefixClass?n("span",{class:[t.prefixClass,"mr-1"]},[e._v(" ")]):e._e(),e._v(e._s(t.label)+"\n    ")]}},{key:"option",fn:function(t){return[t.prefixClass?n("span",{class:[t.prefixClass,"mr-1"]},[e._v(" ")]):e._e(),e._v(e._s(t.label)+"\n    ")]}},{key:"open-indicator",fn:function(t){var a=t.attributes;return[n("span",e._b({staticClass:"fa fa-caret-down"},"span",a,!1))]}},e._l(Object.keys(e.$scopedSlots),(function(t){return{key:t,fn:function(n){return[e._t(t,null,null,n)]}}}))],null,!0),model:{value:e.model.value,callback:function(t){e.$set(e.model,"value",t)},expression:"model.value"}},"v-select",e.$attrs,!1)):n("span",[e.model.value?e._t("selected-option",(function(){return[e.selectedPrefixClass?n("span",{class:e.selectedPrefixClass},[e._v(" ")]):e._e(),e._v(e._s(e.model.value.label)+"\n    ")]}),null,{option:e.model.value}):e._e()],2)},s=[],i=(n("a481"),n("96cf"),n("3b8d")),o=(n("6b54"),n("75fc")),r=(n("7f7f"),n("4a7a")),l=n.n(r),c=(n("6dfc"),{components:{vSelect:l.a},props:{options:{default:"/options",description:"examples;- getx:RelativeGetXUrl,dispatch:DispatchableEventName,data:PathNameIn@data"},searchable:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},emptyDisplay:{type:String,default:null},placeholder:{type:String,default:""},optionKey:{type:String,default:"key"},optionLabel:{type:String,default:"label"},value:{default:null},selectDefault:{},selectedPrefixClass:{},filter:{},type:{type:String,default:"dropdown"}},data:function(){return{model:{options:[],value:null,sender:""}}},computed:{myOptions:function(){}},watch:{value:function(e,t){this.valueOnChange(e,t)},options:function(e,t){this.loadOptions()}},mounted:function(){this.loadOptions()},methods:{valueOnChange:function(e,t){this.selectModelValue()},selectModelValue:function(){for(var e in this.model.value=null,this.model.options)this.model.options[e].value==this.value&&(this.model.value=this.model.options[e]);!this.selectDefault||void 0!==this.model.value&&null!==this.model.value||1==this.selectDefault&&this.model.options[0]&&(this.model.value=this.model.options[0],this.onChange()),this.$emit("option",this.model.value)},fromOptions:function(e){var t=this,n=!1;if(this.model.options=e.map((function(e){if("string"==typeof e||"number"==typeof e)return{value:e,label:e,item:e};if(null===e||void 0===e)return n=!0,{value:e,label:t.emptyDisplay||t.placeholder,item:e};var a=e[t.optionKey]||e.id||e.key||e.code||e.value||e.label||e.name,s=e[t.optionLabel]||e.name||e.label||e.value||e.code||e.key||e.id;return{value:a,label:s||(null===a||void 0===a?t.emptyDisplay||t.placeholder:""),item:e,prefixClass:e.prefixClass||e.icon}})),!n&&t.emptyDisplay&&(this.model.options=[{value:null,label:this.emptyDisplay,item:null}].concat(Object(o["a"])(this.model.options))),this.filter){var a=[];"[object Array]"===Object.prototype.toString.call(this.filter)?a=Object(o["a"])(this.filter):"[object Object]"===Object.prototype.toString.call(this.filter)&&(a=[this.filter]),this.model.options=this.model.options.filter((function(e){return a.some((function(t){for(var n in t)if(!0===t[n]){if(!e.item[n])return!1}else if(t[n]!==e.item[n])return!1;return!0}))}))}this.selectModelValue()},loadOptions:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.options||"string"!=typeof this.options||0!=this.options.indexOf("data:")){e.next=7;break}return e.next=3,n("ab35")("./"+this.options.replace("data:","")+".json");case 3:t=e.sent,this.fromOptions(t.options),e.next=24;break;case 7:if(!this.options||"string"!=typeof this.options||0!=this.options.indexOf("getx:")){e.next=15;break}return a=this.options.replace("getx:",""),e.next=11,this.$service.getX(a);case 11:s=e.sent,this.fromOptions(s.results?s.results:s),e.next=24;break;case 15:if(!this.options||"string"!=typeof this.options||0!=this.options.indexOf("dispatch:")){e.next=23;break}return i=this.options.replace("dispatch:",""),e.next=19,this.$store.dispatch(i);case 19:o=e.sent,this.fromOptions(o.results?o.results:o),e.next=24;break;case 23:this.options&&this.fromOptions(this.options);case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onChange:function(){var e=this.model.value?this.model.value.value:null;this.$emit("input",e),this.$emit("change",e)},onSearch:function(e,t){this.$emit("search",e,t)},option:function(){return this.model.value}}}),u=c,p=(n("6cd3"),n("2877")),f=Object(p["a"])(u,a,s,!1,null,null,null);t["a"]=f.exports},6704:function(e,t,n){"use strict";n("7907")},"6ad2":function(e,t,n){"use strict";n("243c")},"6cd3":function(e,t,n){"use strict";n("dbda")},"75fc":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n("a745"),s=n.n(a),i=n("db2a");function o(e){if(s()(e))return Object(i["a"])(e)}var r=n("67bb"),l=n.n(r),c=n("5d58"),u=n.n(c),p=n("774e"),f=n.n(p);function d(e){if("undefined"!==typeof l.a&&null!=e[u.a]||null!=e["@@iterator"])return f()(e)}var h=n("e630");function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e){return o(e)||d(e)||Object(h["a"])(e)||m()}},7907:function(e,t,n){},"88b4":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.templateId?n("MyVSelect",e._b({ref:"channelSelect",staticClass:"w-100 text-black",staticStyle:{"min-width":"220px"},attrs:{hidden:"",options:e.src,searchable:!1,clearable:!0,placeholder:"Select Template"},on:{option:e.optionReady,input:e.clickAction},model:{value:e.templateId,callback:function(t){e.templateId=t},expression:"templateId"}},"MyVSelect",e.$attrs,!1)):e._e(),e.templateConfig?n("div",{staticClass:"message-preview w-100",class:e.format},["WHATSAPP"==e.format?n("span",[n("div",{staticClass:"message-text"},[e.templateConfig.attachments&&e.templateConfig.attachments[0]?n("div",{class:["message-attachment-inline","attachment-"+e.templateConfig.attachments[0].mediaType]}):e._e(),e.templateConfig.title?n("div",{staticClass:"message-title"},[e._v(e._s(e.templateConfig.title))]):e._e(),n("div",{staticClass:"message-body"},[e._v(e._s(e.content.text))])]),e.content.options?n("div",{staticClass:"message-buttons"},e._l(e.content.options.buttons,(function(t,a){return n("div",{key:a,staticClass:"message-button"},[e._v("\n            "+e._s(t.label)+"\n            ")])})),0):e._e()]):n("span",[n("div",{staticClass:"message-text"},[e.templateConfig.title?n("div",{staticClass:"message-title"},[e._v(e._s(e.templateConfig.title))]):e._e(),n("div",[e._v(e._s(e.content.text))])]),e.content.options?n("div",{staticClass:"message-buttons"},e._l(e.content.options.buttons,(function(t,a){return n("div",{key:a,staticClass:"message-button"},[e._v("\n            "+e._s(t.label)+"\n            ")])})),0):e._e()])]):e._e()],1)},s=[],i=(n("28a5"),n("3ef3")),o=n("9dbb"),r=n.n(o),l=n("2eb3"),c={contact:{name:"John Doe",phone:"919876543210",email:"John.Doe@company.com"}},u={name:"MessagePreview",components:{MyVSelect:l["a"]},data:function(){return{templateConfig:null}},computed:{content:function(){if(!this.templateConfig)return{text:"",options:{}};var e=this.templateConfig.template;try{var t;e=r.a.render(this.templateConfig.template,Object.assign(c,{data:this.templateConfig.data,contact:(null===this||void 0===this||null===(t=this.model)||void 0===t?void 0:t.contact)||c.contact}))}catch(a){}var n=(e||"").split("---options---");return{text:n[0],options:Object.assign({},i["a"].message_form_options(i["a"].map_from_string(n[1])),this.templateConfig.options)}},options:function(){}},mounted:function(){this.templateConfig=this.template},methods:{clickAction:function(){},optionReady:function(e){console.log("Option",e),e&&(this.templateConfig=e.item)}},props:{icon:String,heading:String,subheading:String,actions:Array,template:{type:Object},templateId:{type:String},src:{type:String,default:"getx:/api/options/tmpl/hsm"},format:{type:String,default:"WHATSAPP"},model:{}},watch:{template:function(){this.templateConfig=this.template}}},p=u,f=(n("6ad2"),n("2877")),d=Object(f["a"])(p,a,s,!1,null,null,null);t["a"]=d.exports},"9dbb":function(e,t,n){(function(t,n){e.exports=n()})(0,(function(){"use strict";
/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function n(e){return"function"===typeof e}function a(e){return t(e)?"array":typeof e}function s(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"===typeof e&&t in e}function o(e,t){return null!=e&&"object"!==typeof e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var r=RegExp.prototype.test;function l(e,t){return r.call(e,t)}var c=/\S/;function u(e){return!l(c,e)}var p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function f(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return p[e]}))}var d=/\s*/,h=/\s+/,m=/\s*=/,v=/\s*\}/,b=/#|\^|\/|>|\{|&|=|!/;function g(e,n){if(!e)return[];var a,i,o,r=!1,l=[],c=[],p=[],f=!1,g=!1,C="",k=0;function S(){if(f&&!g)while(p.length)delete c[p.pop()];else p=[];f=!1,g=!1}function O(e){if("string"===typeof e&&(e=e.split(h,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(s(e[0])+"\\s*"),i=new RegExp("\\s*"+s(e[1])),o=new RegExp("\\s*"+s("}"+e[1]))}O(n||x.tags);var j,P,T,A,D,E,M=new w(e);while(!M.eos()){if(j=M.pos,T=M.scanUntil(a),T)for(var $=0,I=T.length;$<I;++$)A=T.charAt($),u(A)?(p.push(c.length),C+=A):(g=!0,r=!0,C+=" "),c.push(["text",A,j,j+1]),j+=1,"\n"===A&&(S(),C="",k=0,r=!1);if(!M.scan(a))break;if(f=!0,P=M.scan(b)||"name",M.scan(d),"="===P?(T=M.scanUntil(m),M.scan(m),M.scanUntil(i)):"{"===P?(T=M.scanUntil(o),M.scan(v),M.scanUntil(i),P="&"):T=M.scanUntil(i),!M.scan(i))throw new Error("Unclosed tag at "+M.pos);if(D=">"==P?[P,T,j,M.pos,C,k,r]:[P,T,j,M.pos],k++,c.push(D),"#"===P||"^"===P)l.push(D);else if("/"===P){if(E=l.pop(),!E)throw new Error('Unopened section "'+T+'" at '+j);if(E[1]!==T)throw new Error('Unclosed section "'+E[1]+'" at '+j)}else"name"===P||"{"===P||"&"===P?g=!0:"="===P&&O(T)}if(S(),E=l.pop(),E)throw new Error('Unclosed section "'+E[1]+'" at '+M.pos);return _(y(c))}function y(e){for(var t,n,a=[],s=0,i=e.length;s<i;++s)t=e[s],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(a.push(t),n=t));return a}function _(e){for(var t,n,a=[],s=a,i=[],o=0,r=e.length;o<r;++o)switch(t=e[o],t[0]){case"#":case"^":s.push(t),i.push(t),s=t[4]=[];break;case"/":n=i.pop(),n[5]=t[2],s=i.length>0?i[i.length-1][4]:a;break;default:s.push(t)}return a}function w(e){this.string=e,this.tail=e,this.pos=0}function C(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function k(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}w.prototype.eos=function(){return""===this.tail},w.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},w.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},C.prototype.push=function(e){return new C(e,this)},C.prototype.lookup=function(e){var t,a=this.cache;if(a.hasOwnProperty(e))t=a[e];else{var s,r,l,c=this,u=!1;while(c){if(e.indexOf(".")>0){s=c.view,r=e.split("."),l=0;while(null!=s&&l<r.length)l===r.length-1&&(u=i(s,r[l])||o(s,r[l])),s=s[r[l++]]}else s=c.view[e],u=i(c.view,e);if(u){t=s;break}c=c.parent}a[e]=t}return n(t)&&(t=t.call(this.view)),t},k.prototype.clearCache=function(){"undefined"!==typeof this.templateCache&&this.templateCache.clear()},k.prototype.parse=function(e,t){var n=this.templateCache,a=e+":"+(t||x.tags).join(":"),s="undefined"!==typeof n,i=s?n.get(a):void 0;return void 0==i&&(i=g(e,t),s&&n.set(a,i)),i},k.prototype.render=function(e,t,n,a){var s=this.getConfigTags(a),i=this.parse(e,s),o=t instanceof C?t:new C(t,void 0);return this.renderTokens(i,o,n,e,a)},k.prototype.renderTokens=function(e,t,n,a,s){for(var i,o,r,l="",c=0,u=e.length;c<u;++c)r=void 0,i=e[c],o=i[0],"#"===o?r=this.renderSection(i,t,n,a,s):"^"===o?r=this.renderInverted(i,t,n,a,s):">"===o?r=this.renderPartial(i,t,n,s):"&"===o?r=this.unescapedValue(i,t):"name"===o?r=this.escapedValue(i,t,s):"text"===o&&(r=this.rawValue(i)),void 0!==r&&(l+=r);return l},k.prototype.renderSection=function(e,a,s,i,o){var r=this,l="",c=a.lookup(e[1]);function u(e){return r.render(e,a,s,o)}if(c){if(t(c))for(var p=0,f=c.length;p<f;++p)l+=this.renderTokens(e[4],a.push(c[p]),s,i,o);else if("object"===typeof c||"string"===typeof c||"number"===typeof c)l+=this.renderTokens(e[4],a.push(c),s,i,o);else if(n(c)){if("string"!==typeof i)throw new Error("Cannot use higher-order sections without the original template");c=c.call(a.view,i.slice(e[3],e[5]),u),null!=c&&(l+=c)}else l+=this.renderTokens(e[4],a,s,i,o);return l}},k.prototype.renderInverted=function(e,n,a,s,i){var o=n.lookup(e[1]);if(!o||t(o)&&0===o.length)return this.renderTokens(e[4],n,a,s,i)},k.prototype.indentPartial=function(e,t,n){for(var a=t.replace(/[^ \t]/g,""),s=e.split("\n"),i=0;i<s.length;i++)s[i].length&&(i>0||!n)&&(s[i]=a+s[i]);return s.join("\n")},k.prototype.renderPartial=function(e,t,a,s){if(a){var i=this.getConfigTags(s),o=n(a)?a(e[1]):a[e[1]];if(null!=o){var r=e[6],l=e[5],c=e[4],u=o;0==l&&c&&(u=this.indentPartial(o,c,r));var p=this.parse(u,i);return this.renderTokens(p,t,a,u,s)}}},k.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},k.prototype.escapedValue=function(e,t,n){var a=this.getConfigEscape(n)||x.escape,s=t.lookup(e[1]);if(null!=s)return"number"===typeof s&&a===x.escape?String(s):a(s)},k.prototype.rawValue=function(e){return e[1]},k.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"===typeof e?e.tags:void 0},k.prototype.getConfigEscape=function(e){return e&&"object"===typeof e&&!t(e)?e.escape:void 0};var x={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){S.templateCache=e},get templateCache(){return S.templateCache}},S=new k;return x.clearCache=function(){return S.clearCache()},x.parse=function(e,t){return S.parse(e,t)},x.render=function(e,t,n,s){if("string"!==typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+a(e)+'" was given as the first argument for mustache#render(template, view, partials)');return S.render(e,t,n,s)},x.escape=f,x.Scanner=w,x.Context=C,x.Writer=k,x}))},ab35:function(e,t,n){var a={"./countries.json":["3ab4","chunk-2d0c4816"],"./industries.json":["aeb3","chunk-2d21402b"],"./languages.json":["9726","chunk-2d0e5ed8"],"./waba/message_categories.json":["f3c4","chunk-2d22ca74"],"./waba/message_types.json":["31c4","chunk-2d0b9405"]};function s(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],s=t[0];return n.e(t[1]).then((function(){return n.t(s,3)}))}s.keys=function(){return Object.keys(a)},s.id="ab35",e.exports=s},b82a:function(e,t,n){"use strict";n("1027")},dbda:function(e,t,n){},e740:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("page-title",{attrs:{heading:e.heading,subheading:e.subheading,icon:e.icon,actions:e.actions},on:{action:e.onAction}}),n("ValidationObserver",{ref:"session_form",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.invalid;return[n("div",{staticClass:"row"},[n("b-card",{staticClass:"col-md-4"},[n("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required",tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("label",[e._v("Account Details")]),n("v-select",{staticClass:"w-100",attrs:{options:e.input.lane.values,searchable:!1,clearable:!1,placeholder:"Select Account"},scopedSlots:e._u([{key:"selected-option",fn:function(t){return[n("div",{staticClass:"user_assignment-selected"},[n("span",{staticClass:"contact_type fab",class:e.MyDict.social[t.contactType]}),e._v("  "+e._s(t.lane))])]}},{key:"open-indicator",fn:function(t){var a=t.attributes;return[n("span",e._b({staticClass:"fa fa-caret-down"},"span",a,!1))]}},{key:"option",fn:function(t){var a=t.contactType,s=t.lane;return[n("span",{staticClass:"contact_type fab",class:e.MyDict.social[a]}),e._v("  "+e._s(s)+"\n                              ")]}}],null,!0),model:{value:e.input.lane.selected,callback:function(t){e.$set(e.input.lane,"selected",t)},expression:"input.lane.selected"}})]}}],null,!0)}),n("br"),n("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required|phoneML",vid:"input_contact_number",name:"Contact Number",mode:"lazy"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("label",[e._v("Contacts")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.input.contacts,expression:"input.contacts"}],staticClass:"form-control",attrs:{rows:"10"},domProps:{value:e.input.contacts},on:{input:function(t){t.target.composing||e.$set(e.input,"contacts",t.target.value)}}}),n("span",{staticClass:"v-input-error"},[e._v(e._s(t.errors[0]))])]}}],null,!0)})],1),n("b-card",{staticClass:"col-md-4 session-list"},[n("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required",tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("label",[e._v("Template")]),n("v-select",{staticClass:"w-100",attrs:{options:e.input.templates.values,searchable:!1,clearable:!1,placeholder:"Select Account"},scopedSlots:e._u([{key:"selected-option",fn:function(t){return[e._v("\n                                  "+e._s(t.name)+"    \n                              ")]}},{key:"open-indicator",fn:function(t){var a=t.attributes;return[n("span",e._b({staticClass:"fa fa-caret-down"},"span",a,!1))]}},{key:"option",fn:function(t){var a=t.category,s=t.name;return[n("small",{},[e._v(e._s(a))]),e._v("   "+e._s(s)+"\n                              ")]}}],null,!0),model:{value:e.input.templates.selected,callback:function(t){e.$set(e.input.templates,"selected",t)},expression:"input.templates.selected"}})]}}],null,!0)}),n("br"),n("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required|phone",vid:"input_contact_number",name:"Contact Number"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("label",[e._v("Message Preview")]),e.input.templates.selected?n("TemplatePreview",{attrs:{template:e.input.templates.selected}}):e._e(),n("span",{staticClass:"v-input-error"},[e._v(e._s(t.errors[0]))])]}}],null,!0)}),n("br"),n("b-form-row",[n("button",{staticClass:"form-control btn btn-primary",attrs:{name:"password",id:"examplePassword",disabled:a},on:{click:e.sendBulk}},[e._v("Send")])])],1)],1)]}}])})],1)},s=[],i=(n("4917"),n("7f7f"),n("96cf"),n("3b8d")),o=(n("28a5"),n("88b4")),r=n("d166"),l=n("3ef3"),c=n("e492"),u=n("9dbb"),p=n.n(u),f=n("ecee"),d=n("c074"),h=n("ad3d"),m=n("4a7a"),v=n.n(m);n("6dfc");function b(){return{code:"",dept_email:"",id:null,name:""}}f["c"].add(d["B"],d["A"],d["r"]);var g={contact:{name:"John Doe",phone:"919876543210",email:"John.Doe@company.com"}},y={components:{PageTitle:c["a"],"font-awesome-icon":h["a"],vSelect:v.a,TemplatePreview:o["a"]},data:function(){return{MyFlags:r["c"],MyDict:r["b"],MyConst:r["a"],heading:"Send Bulk",subheading:"Send bulk Messages to conatcts",icon:"pe-7s-chat icon-gradient bg-tempting-azure fa fa-file-import",actions:[{label:"View Past Jobs",name:"BULK_PUSH_JOBS",link:"/app/moderate/bulk-push-jobs",type:"link"}],input:{lane:{values:[],selected:[],sender:""},templates:{values:[],selected:null,sender:""},contacts:""},table:{fields:[{key:"actions",label:"Action"},{key:"startSessionStamp",label:"Start@"},{key:"closeSessionStamp",label:"Closed@"}],items:[],perPage:25,currentPage:1,rows:0},meta:{sender:null,contact:null,contactMobile:null,contactName:null,lane:null},newItem:b(),modelName:"MODAL_ADD_TEAM",sample:g}},computed:{preview:function(e){if(!this.input.templates.selected||!this.input.templates.selected.template)return{preview:"",text:""};var t=this.input.templates.selected.template.split("---options---");return{text:p.a.render(t[0],this.sample),options:l["a"].message_form_options(l["a"].map_from_string(t[1]))}}},created:function(e){this.loadLanes(),this.loadTemplates()},methods:{loadLanes:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.get("/api/options/channels");case 2:t=e.sent,this.input.lane.values=t.results.filter((function(e){return"WHATSAPP"==e.contactType}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadTemplates:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.get("/api/tmpl/pushtemplate");case 2:t=e.sent,this.input.templates.values=t.results;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onAction:function(e){switch(e.name){case"IMPORT_CHAT":this.$refs.file.click();break;case"EDIT_ITEM":this.oldHash=JSON.stringify(this.newItem),this.$bvModal.show(this.modelName),console.log("ADD_ITEM",e);break;case"CANCEL":this.$bvModal.hide(this.modelName);break;default:console.log("NoMapping",e)}},sendBulk:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.post("/api/message/bulk/push/send",{message:this.preview.text,subject:this.input.lane.selected.title,templateId:this.input.templates.selected.id,contact:{contactType:this.input.lane.selected.contactType,lane:this.input.lane.selected.lane,channel:this.input.lane.selected.channel},to:this.input.contacts.match(/[^\r\n\,]+/g).map((function(e){return e.trim()})).filter((function(e){return!!e}))});case 2:e.sent,this.$router.push("/app/moderate/bulk-push-jobs");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},_=y,w=(n("6704"),n("b82a"),n("2877")),C=Object(w["a"])(_,a,s,!1,null,"aa3a184a",null);t["default"]=C.exports}}]);